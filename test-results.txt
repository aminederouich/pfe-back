
> backend@1.17.1 test
> jest

  console.log
    Received token: Token present

      at log (middleware/auth.js:9:13)

  console.error
    Token verification error: JsonWebTokenError {
      name: 'JsonWebTokenError',
      message: 'jwt malformed'
    }

    [0m [90m 210 |[39m       }[33m;[39m
     [90m 211 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 212 |[39m       console[33m.[39merror([32m'Token verification error:'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 213 |[39m
     [90m 214 |[39m       [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 215 |[39m         [36mthrow[39m [36mnew[39m [33mError[39m([32m'Invalid token'[39m)[33m;[39m[0m

      at Function.error [as verifyToken] (services/auth.service.js:212:15)
      at verifyToken (middleware/auth.js:20:38)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/express/lib/router/index.js:646:15
      at next (node_modules/express/lib/router/index.js:265:14)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at serveStatic (node_modules/serve-static/index.js:75:16)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at cookieParser (node_modules/cookie-parser/index.js:57:14)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at urlencodedParser (node_modules/body-parser/lib/types/urlencoded.js:85:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/body-parser/lib/read.js:137:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

  console.error
    Authentication error: Invalid token

    [0m [90m 28 |[39m     next()[33m;[39m
     [90m 29 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 30 |[39m     console[33m.[39merror([32m'Authentication error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 31 |[39m
     [90m 32 |[39m     [36mconst[39m getStatusCode [33m=[39m () [33m=>[39m {
     [90m 33 |[39m       [36mif[39m (error[33m.[39mmessage [33m===[39m [32m'JWT_SECRET is not defined'[39m) {[0m

      at error (middleware/auth.js:30:13)

[0mPOST /scores/calculate [33m401[0m 51.184 ms - 51[0m
  console.log
    Received token: Token present

      at log (middleware/auth.js:9:13)

  console.error
    Token verification error: JsonWebTokenError {
      name: 'JsonWebTokenError',
      message: 'jwt malformed'
    }

    [0m [90m 210 |[39m       }[33m;[39m
     [90m 211 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 212 |[39m       console[33m.[39merror([32m'Token verification error:'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 213 |[39m
     [90m 214 |[39m       [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 215 |[39m         [36mthrow[39m [36mnew[39m [33mError[39m([32m'Invalid token'[39m)[33m;[39m[0m

      at Function.error [as verifyToken] (services/auth.service.js:212:15)
      at verifyToken (middleware/auth.js:20:38)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/express/lib/router/index.js:646:15
      at next (node_modules/express/lib/router/index.js:265:14)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at serveStatic (node_modules/serve-static/index.js:75:16)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at cookieParser (node_modules/cookie-parser/index.js:57:14)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at urlencodedParser (node_modules/body-parser/lib/types/urlencoded.js:85:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/body-parser/lib/read.js:137:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

  console.error
    Authentication error: Invalid token

    [0m [90m 28 |[39m     next()[33m;[39m
     [90m 29 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 30 |[39m     console[33m.[39merror([32m'Authentication error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 31 |[39m
     [90m 32 |[39m     [36mconst[39m getStatusCode [33m=[39m () [33m=>[39m {
     [90m 33 |[39m       [36mif[39m (error[33m.[39mmessage [33m===[39m [32m'JWT_SECRET is not defined'[39m) {[0m

      at error (middleware/auth.js:30:13)

[0mPOST /scores/calculate [33m401[0m 9.375 ms - 51[0m
  console.log
    Received token: Token present

      at log (middleware/auth.js:9:13)

  console.error
    Token verification error: JsonWebTokenError {
      name: 'JsonWebTokenError',
      message: 'jwt malformed'
    }

    [0m [90m 210 |[39m       }[33m;[39m
     [90m 211 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 212 |[39m       console[33m.[39merror([32m'Token verification error:'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 213 |[39m
     [90m 214 |[39m       [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 215 |[39m         [36mthrow[39m [36mnew[39m [33mError[39m([32m'Invalid token'[39m)[33m;[39m[0m

      at Function.error [as verifyToken] (services/auth.service.js:212:15)
      at verifyToken (middleware/auth.js:20:38)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/express/lib/router/index.js:646:15
      at next (node_modules/express/lib/router/index.js:265:14)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at serveStatic (node_modules/serve-static/index.js:75:16)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at cookieParser (node_modules/cookie-parser/index.js:57:14)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at urlencodedParser (node_modules/body-parser/lib/types/urlencoded.js:85:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/body-parser/lib/read.js:137:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

  console.error
    Authentication error: Invalid token

    [0m [90m 28 |[39m     next()[33m;[39m
     [90m 29 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 30 |[39m     console[33m.[39merror([32m'Authentication error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 31 |[39m
     [90m 32 |[39m     [36mconst[39m getStatusCode [33m=[39m () [33m=>[39m {
     [90m 33 |[39m       [36mif[39m (error[33m.[39mmessage [33m===[39m [32m'JWT_SECRET is not defined'[39m) {[0m

      at error (middleware/auth.js:30:13)

[0mPOST /scores/calculate [33m401[0m 8.854 ms - 51[0m
  console.log
    Received token: No token

      at log (middleware/auth.js:9:13)

  console.log
    Authentication failed: No token provided

      at log (middleware/auth.js:12:15)

[0mPOST /scores/calculate [33m401[0m 4.435 ms - 50[0m
  console.log
    Received token: Token present

      at log (middleware/auth.js:9:13)

  console.error
    Token verification error: JsonWebTokenError {
      name: 'JsonWebTokenError',
      message: 'jwt malformed'
    }

    [0m [90m 210 |[39m       }[33m;[39m
     [90m 211 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 212 |[39m       console[33m.[39merror([32m'Token verification error:'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 213 |[39m
     [90m 214 |[39m       [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 215 |[39m         [36mthrow[39m [36mnew[39m [33mError[39m([32m'Invalid token'[39m)[33m;[39m[0m

      at Function.error [as verifyToken] (services/auth.service.js:212:15)
      at verifyToken (middleware/auth.js:20:38)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/express/lib/router/index.js:646:15
      at next (node_modules/express/lib/router/index.js:265:14)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at serveStatic (node_modules/serve-static/index.js:75:16)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at cookieParser (node_modules/cookie-parser/index.js:57:14)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at urlencodedParser (node_modules/body-parser/lib/types/urlencoded.js:85:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/body-parser/lib/read.js:137:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

  console.error
    Authentication error: Invalid token

    [0m [90m 28 |[39m     next()[33m;[39m
     [90m 29 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 30 |[39m     console[33m.[39merror([32m'Authentication error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 31 |[39m
     [90m 32 |[39m     [36mconst[39m getStatusCode [33m=[39m () [33m=>[39m {
     [90m 33 |[39m       [36mif[39m (error[33m.[39mmessage [33m===[39m [32m'JWT_SECRET is not defined'[39m) {[0m

      at error (middleware/auth.js:30:13)

[0mPOST /scores/calculate-multiple [33m401[0m 9.702 ms - 51[0m
  console.log
    Received token: Token present

      at log (middleware/auth.js:9:13)

  console.error
    Token verification error: JsonWebTokenError {
      name: 'JsonWebTokenError',
      message: 'jwt malformed'
    }

    [0m [90m 210 |[39m       }[33m;[39m
     [90m 211 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 212 |[39m       console[33m.[39merror([32m'Token verification error:'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 213 |[39m
     [90m 214 |[39m       [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 215 |[39m         [36mthrow[39m [36mnew[39m [33mError[39m([32m'Invalid token'[39m)[33m;[39m[0m

      at Function.error [as verifyToken] (services/auth.service.js:212:15)
      at verifyToken (middleware/auth.js:20:38)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/express/lib/router/index.js:646:15
      at next (node_modules/express/lib/router/index.js:265:14)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at serveStatic (node_modules/serve-static/index.js:75:16)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at cookieParser (node_modules/cookie-parser/index.js:57:14)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at urlencodedParser (node_modules/body-parser/lib/types/urlencoded.js:85:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/body-parser/lib/read.js:137:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

  console.error
    Authentication error: Invalid token

    [0m [90m 28 |[39m     next()[33m;[39m
     [90m 29 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 30 |[39m     console[33m.[39merror([32m'Authentication error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 31 |[39m
     [90m 32 |[39m     [36mconst[39m getStatusCode [33m=[39m () [33m=>[39m {
     [90m 33 |[39m       [36mif[39m (error[33m.[39mmessage [33m===[39m [32m'JWT_SECRET is not defined'[39m) {[0m

      at error (middleware/auth.js:30:13)

[0mPOST /scores/calculate-multiple [33m401[0m 9.472 ms - 51[0m
[0mGET /scores/ticket/ticket-123 [33m404[0m 1.987 ms - 121[0m
[0mGET /scores/ticket/ticket-no-scores [33m404[0m 1.013 ms - 127[0m
[0mGET /scores/employee/jira-123 [33m404[0m 0.996 ms - 121[0m
[0mGET /scores/employee/ [33m404[0m 1.238 ms - 113[0m
[0mGET /scores [33m404[0m 1.032 ms - 103[0m
  console.log
    Received token: Token present

      at log (middleware/auth.js:9:13)

  console.error
    Token verification error: JsonWebTokenError {
      name: 'JsonWebTokenError',
      message: 'jwt malformed'
    }

    [0m [90m 210 |[39m       }[33m;[39m
     [90m 211 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 212 |[39m       console[33m.[39merror([32m'Token verification error:'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 213 |[39m
     [90m 214 |[39m       [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 215 |[39m         [36mthrow[39m [36mnew[39m [33mError[39m([32m'Invalid token'[39m)[33m;[39m[0m

      at Function.error [as verifyToken] (services/auth.service.js:212:15)
      at verifyToken (middleware/auth.js:20:38)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/express/lib/router/index.js:646:15
      at next (node_modules/express/lib/router/index.js:265:14)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at serveStatic (node_modules/serve-static/index.js:75:16)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at cookieParser (node_modules/cookie-parser/index.js:57:14)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at urlencodedParser (node_modules/body-parser/lib/types/urlencoded.js:85:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/body-parser/lib/read.js:137:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

  console.error
    Authentication error: Invalid token

    [0m [90m 28 |[39m     next()[33m;[39m
     [90m 29 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 30 |[39m     console[33m.[39merror([32m'Authentication error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 31 |[39m
     [90m 32 |[39m     [36mconst[39m getStatusCode [33m=[39m () [33m=>[39m {
     [90m 33 |[39m       [36mif[39m (error[33m.[39mmessage [33m===[39m [32m'JWT_SECRET is not defined'[39m) {[0m

      at error (middleware/auth.js:30:13)

[0mPOST /scores/calculate [33m401[0m 9.549 ms - 51[0m
  console.log
    Received token: Token present

      at log (middleware/auth.js:9:13)

  console.error
    Token verification error: JsonWebTokenError {
      name: 'JsonWebTokenError',
      message: 'jwt malformed'
    }

    [0m [90m 210 |[39m       }[33m;[39m
     [90m 211 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 212 |[39m       console[33m.[39merror([32m'Token verification error:'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 213 |[39m
     [90m 214 |[39m       [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 215 |[39m         [36mthrow[39m [36mnew[39m [33mError[39m([32m'Invalid token'[39m)[33m;[39m[0m

      at Function.error [as verifyToken] (services/auth.service.js:212:15)
      at verifyToken (middleware/auth.js:20:38)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/express/lib/router/index.js:646:15
      at next (node_modules/express/lib/router/index.js:265:14)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at serveStatic (node_modules/serve-static/index.js:75:16)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at cookieParser (node_modules/cookie-parser/index.js:57:14)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at urlencodedParser (node_modules/body-parser/lib/types/urlencoded.js:85:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/body-parser/lib/read.js:137:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

  console.error
    Authentication error: Invalid token

    [0m [90m 28 |[39m     next()[33m;[39m
     [90m 29 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 30 |[39m     console[33m.[39merror([32m'Authentication error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 31 |[39m
     [90m 32 |[39m     [36mconst[39m getStatusCode [33m=[39m () [33m=>[39m {
     [90m 33 |[39m       [36mif[39m (error[33m.[39mmessage [33m===[39m [32m'JWT_SECRET is not defined'[39m) {[0m

      at error (middleware/auth.js:30:13)

[0mPOST /scores/calculate [33m401[0m 8.165 ms - 51[0m
  console.log
    Received token: Token present

      at log (middleware/auth.js:9:13)

  console.error
    Token verification error: JsonWebTokenError {
      name: 'JsonWebTokenError',
      message: 'jwt malformed'
    }

    [0m [90m 210 |[39m       }[33m;[39m
     [90m 211 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 212 |[39m       console[33m.[39merror([32m'Token verification error:'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 213 |[39m
     [90m 214 |[39m       [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 215 |[39m         [36mthrow[39m [36mnew[39m [33mError[39m([32m'Invalid token'[39m)[33m;[39m[0m

      at Function.error [as verifyToken] (services/auth.service.js:212:15)
      at verifyToken (middleware/auth.js:20:38)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/express/lib/router/index.js:646:15
      at next (node_modules/express/lib/router/index.js:265:14)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at serveStatic (node_modules/serve-static/index.js:75:16)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at cookieParser (node_modules/cookie-parser/index.js:57:14)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at urlencodedParser (node_modules/body-parser/lib/types/urlencoded.js:85:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/body-parser/lib/read.js:137:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

  console.error
    Authentication error: Invalid token

    [0m [90m 28 |[39m     next()[33m;[39m
     [90m 29 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 30 |[39m     console[33m.[39merror([32m'Authentication error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 31 |[39m
     [90m 32 |[39m     [36mconst[39m getStatusCode [33m=[39m () [33m=>[39m {
     [90m 33 |[39m       [36mif[39m (error[33m.[39mmessage [33m===[39m [32m'JWT_SECRET is not defined'[39m) {[0m

      at error (middleware/auth.js:30:13)

[0mPOST /scores/calculate [33m401[0m 13.437 ms - 51[0m
[0mGET /scores/employee/jira-123 [33m404[0m 0.845 ms - 121[0m
  console.log
    Received token: Token present

      at log (middleware/auth.js:9:13)

  console.error
    Token verification error: JsonWebTokenError {
      name: 'JsonWebTokenError',
      message: 'jwt malformed'
    }

    [0m [90m 210 |[39m       }[33m;[39m
     [90m 211 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 212 |[39m       console[33m.[39merror([32m'Token verification error:'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 213 |[39m
     [90m 214 |[39m       [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 215 |[39m         [36mthrow[39m [36mnew[39m [33mError[39m([32m'Invalid token'[39m)[33m;[39m[0m

      at Function.error [as verifyToken] (services/auth.service.js:212:15)
      at verifyToken (middleware/auth.js:20:38)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/express/lib/router/index.js:646:15
      at next (node_modules/express/lib/router/index.js:265:14)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at serveStatic (node_modules/serve-static/index.js:75:16)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at cookieParser (node_modules/cookie-parser/index.js:57:14)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at urlencodedParser (node_modules/body-parser/lib/types/urlencoded.js:85:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/body-parser/lib/read.js:137:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

  console.error
    Authentication error: Invalid token

    [0m [90m 28 |[39m     next()[33m;[39m
     [90m 29 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 30 |[39m     console[33m.[39merror([32m'Authentication error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 31 |[39m
     [90m 32 |[39m     [36mconst[39m getStatusCode [33m=[39m () [33m=>[39m {
     [90m 33 |[39m       [36mif[39m (error[33m.[39mmessage [33m===[39m [32m'JWT_SECRET is not defined'[39m) {[0m

      at error (middleware/auth.js:30:13)

[0mPOST /scores/calculate [33m401[0m 7.659 ms - 51[0m
  console.log
    Received token: Token present

      at log (middleware/auth.js:9:13)

  console.error
    Token verification error: JsonWebTokenError {
      name: 'JsonWebTokenError',
      message: 'jwt malformed'
    }

    [0m [90m 210 |[39m       }[33m;[39m
     [90m 211 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 212 |[39m       console[33m.[39merror([32m'Token verification error:'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 213 |[39m
     [90m 214 |[39m       [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 215 |[39m         [36mthrow[39m [36mnew[39m [33mError[39m([32m'Invalid token'[39m)[33m;[39m[0m

      at Function.error [as verifyToken] (services/auth.service.js:212:15)
      at verifyToken (middleware/auth.js:20:38)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/express/lib/router/index.js:646:15
      at next (node_modules/express/lib/router/index.js:265:14)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at serveStatic (node_modules/serve-static/index.js:75:16)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at cookieParser (node_modules/cookie-parser/index.js:57:14)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at urlencodedParser (node_modules/body-parser/lib/types/urlencoded.js:85:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/body-parser/lib/read.js:137:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

  console.error
    Authentication error: Invalid token

    [0m [90m 28 |[39m     next()[33m;[39m
     [90m 29 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 30 |[39m     console[33m.[39merror([32m'Authentication error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 31 |[39m
     [90m 32 |[39m     [36mconst[39m getStatusCode [33m=[39m () [33m=>[39m {
     [90m 33 |[39m       [36mif[39m (error[33m.[39mmessage [33m===[39m [32m'JWT_SECRET is not defined'[39m) {[0m

      at error (middleware/auth.js:30:13)

[0mPOST /scores/calculate [33m401[0m 6.858 ms - 51[0m
  console.log
    Received token: Token present

      at log (middleware/auth.js:9:13)

  console.error
    Token verification error: JsonWebTokenError {
      name: 'JsonWebTokenError',
      message: 'jwt malformed'
    }

    [0m [90m 210 |[39m       }[33m;[39m
     [90m 211 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 212 |[39m       console[33m.[39merror([32m'Token verification error:'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 213 |[39m
     [90m 214 |[39m       [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 215 |[39m         [36mthrow[39m [36mnew[39m [33mError[39m([32m'Invalid token'[39m)[33m;[39m[0m

      at Function.error [as verifyToken] (services/auth.service.js:212:15)
      at verifyToken (middleware/auth.js:20:38)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/express/lib/router/index.js:646:15
      at next (node_modules/express/lib/router/index.js:265:14)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at serveStatic (node_modules/serve-static/index.js:75:16)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at cookieParser (node_modules/cookie-parser/index.js:57:14)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at urlencodedParser (node_modules/body-parser/lib/types/urlencoded.js:85:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/body-parser/lib/read.js:137:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

  console.error
    Authentication error: Invalid token

    [0m [90m 28 |[39m     next()[33m;[39m
     [90m 29 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 30 |[39m     console[33m.[39merror([32m'Authentication error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 31 |[39m
     [90m 32 |[39m     [36mconst[39m getStatusCode [33m=[39m () [33m=>[39m {
     [90m 33 |[39m       [36mif[39m (error[33m.[39mmessage [33m===[39m [32m'JWT_SECRET is not defined'[39m) {[0m

      at error (middleware/auth.js:30:13)

[0mPOST /scores/calculate [33m401[0m 6.603 ms - 51[0m
  console.log
    Received token: Token present

      at log (middleware/auth.js:9:13)

  console.error
    Token verification error: JsonWebTokenError {
      name: 'JsonWebTokenError',
      message: 'jwt malformed'
    }

    [0m [90m 210 |[39m       }[33m;[39m
     [90m 211 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 212 |[39m       console[33m.[39merror([32m'Token verification error:'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 213 |[39m
     [90m 214 |[39m       [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 215 |[39m         [36mthrow[39m [36mnew[39m [33mError[39m([32m'Invalid token'[39m)[33m;[39m[0m

      at Function.error [as verifyToken] (services/auth.service.js:212:15)
      at verifyToken (middleware/auth.js:20:38)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/express/lib/router/index.js:646:15
      at next (node_modules/express/lib/router/index.js:265:14)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at serveStatic (node_modules/serve-static/index.js:75:16)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at cookieParser (node_modules/cookie-parser/index.js:57:14)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at urlencodedParser (node_modules/body-parser/lib/types/urlencoded.js:85:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/body-parser/lib/read.js:137:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

  console.error
    Authentication error: Invalid token

    [0m [90m 28 |[39m     next()[33m;[39m
     [90m 29 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 30 |[39m     console[33m.[39merror([32m'Authentication error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 31 |[39m
     [90m 32 |[39m     [36mconst[39m getStatusCode [33m=[39m () [33m=>[39m {
     [90m 33 |[39m       [36mif[39m (error[33m.[39mmessage [33m===[39m [32m'JWT_SECRET is not defined'[39m) {[0m

      at error (middleware/auth.js:30:13)

[0mPOST /scores/calculate [33m401[0m 8.355 ms - 51[0m
  console.log
    Received token: Token present

      at log (middleware/auth.js:9:13)

  console.error
    Token verification error: JsonWebTokenError {
      name: 'JsonWebTokenError',
      message: 'jwt malformed'
    }

    [0m [90m 210 |[39m       }[33m;[39m
     [90m 211 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 212 |[39m       console[33m.[39merror([32m'Token verification error:'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 213 |[39m
     [90m 214 |[39m       [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 215 |[39m         [36mthrow[39m [36mnew[39m [33mError[39m([32m'Invalid token'[39m)[33m;[39m[0m

      at Function.error [as verifyToken] (services/auth.service.js:212:15)
      at verifyToken (middleware/auth.js:20:38)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/express/lib/router/index.js:646:15
      at next (node_modules/express/lib/router/index.js:265:14)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at serveStatic (node_modules/serve-static/index.js:75:16)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at cookieParser (node_modules/cookie-parser/index.js:57:14)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at urlencodedParser (node_modules/body-parser/lib/types/urlencoded.js:85:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/body-parser/lib/read.js:137:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

  console.error
    Authentication error: Invalid token

    [0m [90m 28 |[39m     next()[33m;[39m
     [90m 29 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 30 |[39m     console[33m.[39merror([32m'Authentication error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 31 |[39m
     [90m 32 |[39m     [36mconst[39m getStatusCode [33m=[39m () [33m=>[39m {
     [90m 33 |[39m       [36mif[39m (error[33m.[39mmessage [33m===[39m [32m'JWT_SECRET is not defined'[39m) {[0m

      at error (middleware/auth.js:30:13)

[0mPOST /scores/calculate [33m401[0m 13.869 ms - 51[0m
  console.log
    Received token: Token present

      at log (middleware/auth.js:9:13)

  console.error
    Token verification error: JsonWebTokenError {
      name: 'JsonWebTokenError',
      message: 'jwt malformed'
    }

    [0m [90m 210 |[39m       }[33m;[39m
     [90m 211 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 212 |[39m       console[33m.[39merror([32m'Token verification error:'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 213 |[39m
     [90m 214 |[39m       [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 215 |[39m         [36mthrow[39m [36mnew[39m [33mError[39m([32m'Invalid token'[39m)[33m;[39m[0m

      at Function.error [as verifyToken] (services/auth.service.js:212:15)
      at verifyToken (middleware/auth.js:20:38)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/express/lib/router/index.js:646:15
      at next (node_modules/express/lib/router/index.js:265:14)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at serveStatic (node_modules/serve-static/index.js:75:16)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at cookieParser (node_modules/cookie-parser/index.js:57:14)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at urlencodedParser (node_modules/body-parser/lib/types/urlencoded.js:85:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/body-parser/lib/read.js:137:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

  console.error
    Authentication error: Invalid token

    [0m [90m 28 |[39m     next()[33m;[39m
     [90m 29 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 30 |[39m     console[33m.[39merror([32m'Authentication error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 31 |[39m
     [90m 32 |[39m     [36mconst[39m getStatusCode [33m=[39m () [33m=>[39m {
     [90m 33 |[39m       [36mif[39m (error[33m.[39mmessage [33m===[39m [32m'JWT_SECRET is not defined'[39m) {[0m

      at error (middleware/auth.js:30:13)

[0mPOST /scores/calculate [33m401[0m 9.841 ms - 51[0m
  console.log
    Received token: Token present

      at log (middleware/auth.js:9:13)

  console.error
    Token verification error: JsonWebTokenError {
      name: 'JsonWebTokenError',
      message: 'jwt malformed'
    }

    [0m [90m 210 |[39m       }[33m;[39m
     [90m 211 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 212 |[39m       console[33m.[39merror([32m'Token verification error:'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 213 |[39m
     [90m 214 |[39m       [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 215 |[39m         [36mthrow[39m [36mnew[39m [33mError[39m([32m'Invalid token'[39m)[33m;[39m[0m

      at Function.error [as verifyToken] (services/auth.service.js:212:15)
      at verifyToken (middleware/auth.js:20:38)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/express/lib/router/index.js:646:15
      at next (node_modules/express/lib/router/index.js:265:14)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at serveStatic (node_modules/serve-static/index.js:75:16)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at cookieParser (node_modules/cookie-parser/index.js:57:14)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at urlencodedParser (node_modules/body-parser/lib/types/urlencoded.js:85:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/body-parser/lib/read.js:137:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

  console.error
    Authentication error: Invalid token

    [0m [90m 28 |[39m     next()[33m;[39m
     [90m 29 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 30 |[39m     console[33m.[39merror([32m'Authentication error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 31 |[39m
     [90m 32 |[39m     [36mconst[39m getStatusCode [33m=[39m () [33m=>[39m {
     [90m 33 |[39m       [36mif[39m (error[33m.[39mmessage [33m===[39m [32m'JWT_SECRET is not defined'[39m) {[0m

      at error (middleware/auth.js:30:13)

[0mPOST /scores/calculate [33m401[0m 9.887 ms - 51[0m
  console.log
    Received token: Token present

      at log (middleware/auth.js:9:13)

  console.error
    Token verification error: JsonWebTokenError {
      name: 'JsonWebTokenError',
      message: 'jwt malformed'
    }

    [0m [90m 210 |[39m       }[33m;[39m
     [90m 211 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 212 |[39m       console[33m.[39merror([32m'Token verification error:'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 213 |[39m
     [90m 214 |[39m       [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 215 |[39m         [36mthrow[39m [36mnew[39m [33mError[39m([32m'Invalid token'[39m)[33m;[39m[0m

      at Function.error [as verifyToken] (services/auth.service.js:212:15)
      at verifyToken (middleware/auth.js:20:38)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/express/lib/router/index.js:646:15
      at next (node_modules/express/lib/router/index.js:265:14)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at serveStatic (node_modules/serve-static/index.js:75:16)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at cookieParser (node_modules/cookie-parser/index.js:57:14)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at urlencodedParser (node_modules/body-parser/lib/types/urlencoded.js:85:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/body-parser/lib/read.js:137:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

  console.error
    Authentication error: Invalid token

    [0m [90m 28 |[39m     next()[33m;[39m
     [90m 29 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 30 |[39m     console[33m.[39merror([32m'Authentication error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 31 |[39m
     [90m 32 |[39m     [36mconst[39m getStatusCode [33m=[39m () [33m=>[39m {
     [90m 33 |[39m       [36mif[39m (error[33m.[39mmessage [33m===[39m [32m'JWT_SECRET is not defined'[39m) {[0m

      at error (middleware/auth.js:30:13)

[0mPOST /scores/calculate [33m401[0m 10.942 ms - 51[0m
  console.log
    Received token: Token present

      at log (middleware/auth.js:9:13)

  console.error
    Token verification error: JsonWebTokenError {
      name: 'JsonWebTokenError',
      message: 'jwt malformed'
    }

    [0m [90m 210 |[39m       }[33m;[39m
     [90m 211 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 212 |[39m       console[33m.[39merror([32m'Token verification error:'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 213 |[39m
     [90m 214 |[39m       [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 215 |[39m         [36mthrow[39m [36mnew[39m [33mError[39m([32m'Invalid token'[39m)[33m;[39m[0m

      at Function.error [as verifyToken] (services/auth.service.js:212:15)
      at verifyToken (middleware/auth.js:20:38)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/express/lib/router/index.js:646:15
      at next (node_modules/express/lib/router/index.js:265:14)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at serveStatic (node_modules/serve-static/index.js:75:16)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at cookieParser (node_modules/cookie-parser/index.js:57:14)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at urlencodedParser (node_modules/body-parser/lib/types/urlencoded.js:85:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/body-parser/lib/read.js:137:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

  console.error
    Authentication error: Invalid token

    [0m [90m 28 |[39m     next()[33m;[39m
     [90m 29 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 30 |[39m     console[33m.[39merror([32m'Authentication error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 31 |[39m
     [90m 32 |[39m     [36mconst[39m getStatusCode [33m=[39m () [33m=>[39m {
     [90m 33 |[39m       [36mif[39m (error[33m.[39mmessage [33m===[39m [32m'JWT_SECRET is not defined'[39m) {[0m

      at error (middleware/auth.js:30:13)

[0mPOST /scores/calculate [33m401[0m 10.819 ms - 51[0m
  console.log
    Received token: Token present

      at log (middleware/auth.js:9:13)

  console.error
    Token verification error: JsonWebTokenError {
      name: 'JsonWebTokenError',
      message: 'jwt malformed'
    }

    [0m [90m 210 |[39m       }[33m;[39m
     [90m 211 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 212 |[39m       console[33m.[39merror([32m'Token verification error:'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 213 |[39m
     [90m 214 |[39m       [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 215 |[39m         [36mthrow[39m [36mnew[39m [33mError[39m([32m'Invalid token'[39m)[33m;[39m[0m

      at Function.error [as verifyToken] (services/auth.service.js:212:15)
      at verifyToken (middleware/auth.js:20:38)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/express/lib/router/index.js:646:15
      at next (node_modules/express/lib/router/index.js:265:14)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at serveStatic (node_modules/serve-static/index.js:75:16)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at cookieParser (node_modules/cookie-parser/index.js:57:14)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at urlencodedParser (node_modules/body-parser/lib/types/urlencoded.js:85:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/body-parser/lib/read.js:137:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

  console.error
    Authentication error: Invalid token

    [0m [90m 28 |[39m     next()[33m;[39m
     [90m 29 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 30 |[39m     console[33m.[39merror([32m'Authentication error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 31 |[39m
     [90m 32 |[39m     [36mconst[39m getStatusCode [33m=[39m () [33m=>[39m {
     [90m 33 |[39m       [36mif[39m (error[33m.[39mmessage [33m===[39m [32m'JWT_SECRET is not defined'[39m) {[0m

      at error (middleware/auth.js:30:13)

[0mPOST /scores/calculate [33m401[0m 10.324 ms - 51[0m
[0mGET /scores/ticket/ticket-123 [33m404[0m 1.056 ms - 121[0m
[0mGET /scores/ticket/ticket-123 [33m404[0m 1.018 ms - 121[0m
  console.log
    Received token: Token present

      at log (middleware/auth.js:9:13)

  console.error
    Token verification error: JsonWebTokenError {
      name: 'JsonWebTokenError',
      message: 'jwt malformed'
    }

    [0m [90m 210 |[39m       }[33m;[39m
     [90m 211 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 212 |[39m       console[33m.[39merror([32m'Token verification error:'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 213 |[39m
     [90m 214 |[39m       [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 215 |[39m         [36mthrow[39m [36mnew[39m [33mError[39m([32m'Invalid token'[39m)[33m;[39m[0m

      at Function.error [as verifyToken] (services/auth.service.js:212:15)
      at verifyToken (middleware/auth.js:20:38)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/express/lib/router/index.js:646:15
      at next (node_modules/express/lib/router/index.js:265:14)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at serveStatic (node_modules/serve-static/index.js:75:16)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at cookieParser (node_modules/cookie-parser/index.js:57:14)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at urlencodedParser (node_modules/body-parser/lib/types/urlencoded.js:85:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/body-parser/lib/read.js:137:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

  console.error
    Authentication error: Invalid token

    [0m [90m 28 |[39m     next()[33m;[39m
     [90m 29 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 30 |[39m     console[33m.[39merror([32m'Authentication error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 31 |[39m
     [90m 32 |[39m     [36mconst[39m getStatusCode [33m=[39m () [33m=>[39m {
     [90m 33 |[39m       [36mif[39m (error[33m.[39mmessage [33m===[39m [32m'JWT_SECRET is not defined'[39m) {[0m

      at error (middleware/auth.js:30:13)

[0mPOST /scores/calculate [33m401[0m 9.510 ms - 51[0m
[0mGET /scores [33m404[0m 1.126 ms - 103[0m
  console.log
    Received token: Token present

      at log (middleware/auth.js:9:13)

  console.error
    Token verification error: JsonWebTokenError {
      name: 'JsonWebTokenError',
      message: 'jwt malformed'
    }

    [0m [90m 210 |[39m       }[33m;[39m
     [90m 211 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 212 |[39m       console[33m.[39merror([32m'Token verification error:'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 213 |[39m
     [90m 214 |[39m       [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 215 |[39m         [36mthrow[39m [36mnew[39m [33mError[39m([32m'Invalid token'[39m)[33m;[39m[0m

      at Function.error [as verifyToken] (services/auth.service.js:212:15)
      at verifyToken (middleware/auth.js:20:38)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/express/lib/router/index.js:646:15
      at next (node_modules/express/lib/router/index.js:265:14)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at serveStatic (node_modules/serve-static/index.js:75:16)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at cookieParser (node_modules/cookie-parser/index.js:57:14)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at urlencodedParser (node_modules/body-parser/lib/types/urlencoded.js:85:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/body-parser/lib/read.js:137:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

  console.error
    Authentication error: Invalid token

    [0m [90m 28 |[39m     next()[33m;[39m
     [90m 29 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 30 |[39m     console[33m.[39merror([32m'Authentication error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 31 |[39m
     [90m 32 |[39m     [36mconst[39m getStatusCode [33m=[39m () [33m=>[39m {
     [90m 33 |[39m       [36mif[39m (error[33m.[39mmessage [33m===[39m [32m'JWT_SECRET is not defined'[39m) {[0m

      at error (middleware/auth.js:30:13)

[0mPOST /scores/calculate [33m401[0m 8.204 ms - 51[0m
FAIL test/integration/score.integration.test.js
  Integration Tests - Score and Rules Flow
    ├ù should handle score calculation with priority rules (15 ms)
    ├ù should handle score calculation with deadline rules (12 ms)
    ├ù should handle negative scores for late tickets (23 ms)
    ├ù should aggregate scores per user (7 ms)
    ├ù should handle concurrent score calculations (126 ms)
    ├ù should cache frequently accessed scores (20 ms)
    ├ù should validate score data types (14 ms)
    ├ù should handle database timeout gracefully (6 ms)
    ├ù should audit score calculations (13 ms)
    POST /scores/calculate - Integration
      ├ù should calculate score through full stack (82 ms)
      ├ù should validate ticket data (16 ms)
      ├ù should validate rule exists (15 ms)
      ÔêÜ should require authentication (10 ms)
    POST /scores/calculate-multiple - Integration
      ├ù should calculate multiple scores (19 ms)
      ├ù should handle partial failures (14 ms)
    GET /scores/ticket/:ticketId - Integration
      ├ù should get scores by ticket ID (6 ms)
      ├ù should return empty array for ticket with no scores (5 ms)
    GET /scores/employee/:uid - Integration
      ├ù should get employee global score (6 ms)
      ÔêÜ should validate uid parameter (6 ms)
    GET /scores - Integration
      ├ù should get all ticket scores (6 ms)

  ÔùÅ Integration Tests - Score and Rules Flow ÔÇ║ POST /scores/calculate - Integration ÔÇ║ should calculate score through full stack

    expect(received).toBe(expected) // Object.is equality

    Expected: 201
    Received: 401

      34 |         });
      35 |
    > 36 |       expect(response.status).toBe(201);
         |                               ^
      37 |       expect(response.body.success).toBe(true);
      38 |     });
      39 |

      at Object.toBe (test/integration/score.integration.test.js:36:31)

  ÔùÅ Integration Tests - Score and Rules Flow ÔÇ║ POST /scores/calculate - Integration ÔÇ║ should validate ticket data

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 401

      46 |         .send({ ticket: {}, ruleId: 'rule-123' });
      47 |
    > 48 |       expect(response.status).toBe(400);
         |                               ^
      49 |     });
      50 |
      51 |     it('should validate rule exists', async () => {

      at Object.toBe (test/integration/score.integration.test.js:48:31)

  ÔùÅ Integration Tests - Score and Rules Flow ÔÇ║ POST /scores/calculate - Integration ÔÇ║ should validate rule exists

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 401

      57 |         .send({ ticket: mockTicket, ruleId: 'invalid' });
      58 |
    > 59 |       expect(response.status).toBe(400);
         |                               ^
      60 |     });
      61 |
      62 |     it('should require authentication', async () => {

      at Object.toBe (test/integration/score.integration.test.js:59:31)

  ÔùÅ Integration Tests - Score and Rules Flow ÔÇ║ POST /scores/calculate-multiple - Integration ÔÇ║ should calculate multiple scores

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

      84 |         });
      85 |
    > 86 |       expect(response.status).toBe(200);
         |                               ^
      87 |       expect(response.body.data).toHaveLength(2);
      88 |     });
      89 |

      at Object.toBe (test/integration/score.integration.test.js:86:31)

  ÔùÅ Integration Tests - Score and Rules Flow ÔÇ║ POST /scores/calculate-multiple - Integration ÔÇ║ should handle partial failures

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

      102 |         });
      103 |
    > 104 |       expect(response.status).toBe(200);
          |                               ^
      105 |       expect(response.body.data).toHaveLength(2);
      106 |     });
      107 |   });

      at Object.toBe (test/integration/score.integration.test.js:104:31)

  ÔùÅ Integration Tests - Score and Rules Flow ÔÇ║ GET /scores/ticket/:ticketId - Integration ÔÇ║ should get scores by ticket ID

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 404

      115 |         .set('Authorization', 'Bearer token');
      116 |
    > 117 |       expect(response.status).toBe(200);
          |                               ^
      118 |       expect(response.body.data).toBeDefined();
      119 |     });
      120 |

      at Object.toBe (test/integration/score.integration.test.js:117:31)

  ÔùÅ Integration Tests - Score and Rules Flow ÔÇ║ GET /scores/ticket/:ticketId - Integration ÔÇ║ should return empty array for ticket with no scores

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 404

      126 |         .set('Authorization', 'Bearer token');
      127 |
    > 128 |       expect(response.status).toBe(200);
          |                               ^
      129 |       expect(response.body.data).toEqual([]);
      130 |     });
      131 |   });

      at Object.toBe (test/integration/score.integration.test.js:128:31)

  ÔùÅ Integration Tests - Score and Rules Flow ÔÇ║ GET /scores/employee/:uid - Integration ÔÇ║ should get employee global score

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 404

      139 |         .set('Authorization', 'Bearer token');
      140 |
    > 141 |       expect(response.status).toBe(200);
          |                               ^
      142 |     });
      143 |
      144 |     it('should validate uid parameter', async () => {

      at Object.toBe (test/integration/score.integration.test.js:141:31)

  ÔùÅ Integration Tests - Score and Rules Flow ÔÇ║ GET /scores - Integration ÔÇ║ should get all ticket scores

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 404

      159 |         .set('Authorization', 'Bearer token');
      160 |
    > 161 |       expect(response.status).toBe(200);
          |                               ^
      162 |       expect(response.body.data).toHaveLength(2);
      163 |     });
      164 |   });

      at Object.toBe (test/integration/score.integration.test.js:161:31)

  ÔùÅ Integration Tests - Score and Rules Flow ÔÇ║ should handle score calculation with priority rules

    TypeError: Cannot read properties of undefined (reading 'score')

      176 |       .send({ ticket: mockTicket, ruleId: 'rule-123' });
      177 |
    > 178 |     expect(response.body.data.score).toBe(10);
          |                               ^
      179 |   });
      180 |
      181 |   it('should handle score calculation with deadline rules', async () => {

      at Object.score (test/integration/score.integration.test.js:178:31)

  ÔùÅ Integration Tests - Score and Rules Flow ÔÇ║ should handle score calculation with deadline rules

    TypeError: Cannot read properties of undefined (reading 'score')

      190 |       .send({ ticket: mockTicket, ruleId: 'rule-123' });
      191 |
    > 192 |     expect(response.body.data.score).toBeGreaterThan(0);
          |                               ^
      193 |   });
      194 |
      195 |   it('should handle negative scores for late tickets', async () => {

      at Object.score (test/integration/score.integration.test.js:192:31)

  ÔùÅ Integration Tests - Score and Rules Flow ÔÇ║ should handle negative scores for late tickets

    TypeError: Cannot read properties of undefined (reading 'score')

      204 |       .send({ ticket: mockTicket, ruleId: 'rule-123' });
      205 |
    > 206 |     expect(response.body.data.score).toBeLessThan(0);
          |                               ^
      207 |   });
      208 |
      209 |   it('should aggregate scores per user', async () => {

      at Object.score (test/integration/score.integration.test.js:206:31)

  ÔùÅ Integration Tests - Score and Rules Flow ÔÇ║ should aggregate scores per user

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has type:  object
    Received has value: {"error": {}, "message": "Not Found", "path": "/scores/employee/jira-123", "status": 404, "timestamp": "2025-12-22T08:31:13.486Z"}

      218 |       .set('Authorization', 'Bearer token');
      219 |
    > 220 |     expect(response.body).toHaveLength(3);
          |                           ^
      221 |   });
      222 |
      223 |   it('should handle concurrent score calculations', async () => {

      at Object.toHaveLength (test/integration/score.integration.test.js:220:27)

  ÔùÅ Integration Tests - Score and Rules Flow ÔÇ║ should handle concurrent score calculations

    expect(received).toBe(expected) // Object.is equality

    Expected: 201
    Received: 401

      236 |     const responses = await Promise.all(requests);
      237 |     responses.forEach(response => {
    > 238 |       expect(response.status).toBe(201);
          |                               ^
      239 |     });
      240 |   });
      241 |

      at toBe (test/integration/score.integration.test.js:238:31)
          at Array.forEach (<anonymous>)
      at Object.forEach (test/integration/score.integration.test.js:237:15)

  ÔùÅ Integration Tests - Score and Rules Flow ÔÇ║ should cache frequently accessed scores

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 2
    Received number of calls: 0

      251 |       .set('Authorization', 'Bearer token');
      252 |
    > 253 |     expect(ScoreService.getScoresByTicketId).toHaveBeenCalledTimes(2);
          |                                              ^
      254 |   });
      255 |
      256 |   it('should validate score data types', async () => {

      at Object.toHaveBeenCalledTimes (test/integration/score.integration.test.js:253:46)

  ÔùÅ Integration Tests - Score and Rules Flow ÔÇ║ should validate score data types

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 401

      262 |       .send({ ticket: mockTicket, ruleId: 123 });
      263 |
    > 264 |     expect(response.status).toBe(400);
          |                             ^
      265 |   });
      266 |
      267 |   it('should handle database timeout gracefully', async () => {

      at Object.toBe (test/integration/score.integration.test.js:264:29)

  ÔùÅ Integration Tests - Score and Rules Flow ÔÇ║ should handle database timeout gracefully

    expect(received).toBe(expected) // Object.is equality

    Expected: 500
    Received: 404

      272 |       .set('Authorization', 'Bearer token');
      273 |
    > 274 |     expect(response.status).toBe(500);
          |                             ^
      275 |   });
      276 |
      277 |   it('should audit score calculations', async () => {

      at Object.toBe (test/integration/score.integration.test.js:274:29)

  ÔùÅ Integration Tests - Score and Rules Flow ÔÇ║ should audit score calculations

    TypeError: Cannot read properties of undefined (reading 'createdAt')

      286 |       .send({ ticket: mockTicket, ruleId: 'rule-123' });
      287 |
    > 288 |     expect(response.body.data.createdAt).toBeDefined();
          |                               ^
      289 |   });
      290 | });
      291 |

      at Object.createdAt (test/integration/score.integration.test.js:288:31)

  console.error
    Registration error: TypeError: Cannot read properties of undefined (reading 'user')
        at Function.user [as register] (C:\Project\PFE\pfe-back\services\auth.service.js:30:43)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at Object.<anonymous>.exports.signup (C:\Project\PFE\pfe-back\controllers\auth.controller.js:49:20)

    [0m [90m 44 |[39m       }[33m;[39m
     [90m 45 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 46 |[39m       console[33m.[39merror([32m'Registration error:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 47 |[39m
     [90m 48 |[39m       [90m// Handle specific Firebase Auth errors[39m
     [90m 49 |[39m       [36mif[39m (error[33m.[39mcode [33m===[39m [32m'auth/weak-password'[39m) {[0m

      at Function.error [as register] (services/auth.service.js:46:15)
      at Object.<anonymous>.exports.signup (controllers/auth.controller.js:49:20)

  console.error
    Signup error: Registration failed

    [0m [90m 60 |[39m     })[33m;[39m
     [90m 61 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 62 |[39m     console[33m.[39merror([32m'Signup error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 63 |[39m
     [90m 64 |[39m     [36mreturn[39m res[33m.[39mstatus([33mHTTP_STATUS[39m[33m.[39m[33mBAD_REQUEST[39m)[33m.[39mjson({
     [90m 65 |[39m       error[33m:[39m [36mtrue[39m[33m,[39m[0m

      at error (controllers/auth.controller.js:62:13)

[0mPOST /auth/signup [33m400[0m 17.770 ms - 46[0m
  console.error
    Login error: TypeError: Cannot read properties of undefined (reading 'user')
        at Function.user [as login] (C:\Project\PFE\pfe-back\services\auth.service.js:77:43)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at Object.<anonymous>.exports.signin (C:\Project\PFE\pfe-back\controllers\auth.controller.js:78:20)

    [0m [90m 93 |[39m       }[33m;[39m
     [90m 94 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 95 |[39m       console[33m.[39merror([32m'Login error:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 96 |[39m
     [90m 97 |[39m       [90m// Handle specific Firebase Auth errors[39m
     [90m 98 |[39m       [36mswitch[39m (error[33m.[39mcode) {[0m

      at Function.error (services/auth.service.js:95:15)
      at Object.<anonymous>.exports.signin (controllers/auth.controller.js:78:20)

  console.error
    Signin error: Authentication failed

    [0m [90m 85 |[39m     })[33m;[39m
     [90m 86 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 87 |[39m     console[33m.[39merror([32m'Signin error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 88 |[39m
     [90m 89 |[39m     [36mconst[39m getStatusCode [33m=[39m () [33m=>[39m {
     [90m 90 |[39m       [36mif[39m (error[33m.[39mmessage [33m===[39m [32m'Too many login attempts. Please try again later.'[39m) {[0m

      at error (controllers/auth.controller.js:87:13)

[0mPOST /auth/signin [33m401[0m 4.976 ms - 48[0m
[0mGET /auth/isLogged [33m404[0m 1.353 ms - 110[0m
[0mPOST /jira_config [33m404[0m 0.939 ms - 108[0m
[0mPOST /rules [33m404[0m 0.752 ms - 102[0m
[0mPOST /jira_client/search [33m404[0m 0.766 ms - 115[0m
[0mPUT /ticket/mock-ticket-id [33m404[0m 0.687 ms - 118[0m
  console.log
    Received token: Token present

      at log (middleware/auth.js:9:13)

  console.error
    Token verification error: JsonWebTokenError {
      name: 'JsonWebTokenError',
      message: 'jwt malformed'
    }

    [0m [90m 210 |[39m       }[33m;[39m
     [90m 211 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 212 |[39m       console[33m.[39merror([32m'Token verification error:'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 213 |[39m
     [90m 214 |[39m       [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 215 |[39m         [36mthrow[39m [36mnew[39m [33mError[39m([32m'Invalid token'[39m)[33m;[39m[0m

      at Function.error [as verifyToken] (services/auth.service.js:212:15)
      at verifyToken (middleware/auth.js:20:38)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/express/lib/router/index.js:646:15
      at next (node_modules/express/lib/router/index.js:265:14)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at serveStatic (node_modules/serve-static/index.js:75:16)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at cookieParser (node_modules/cookie-parser/index.js:57:14)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at urlencodedParser (node_modules/body-parser/lib/types/urlencoded.js:85:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/body-parser/lib/read.js:137:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

  console.error
    Authentication error: Invalid token

    [0m [90m 28 |[39m     next()[33m;[39m
     [90m 29 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 30 |[39m     console[33m.[39merror([32m'Authentication error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 31 |[39m
     [90m 32 |[39m     [36mconst[39m getStatusCode [33m=[39m () [33m=>[39m {
     [90m 33 |[39m       [36mif[39m (error[33m.[39mmessage [33m===[39m [32m'JWT_SECRET is not defined'[39m) {[0m

      at error (middleware/auth.js:30:13)

[0mPOST /scores/calculate [33m401[0m 7.564 ms - 51[0m
[0mGET /ticket/transitions/E2E-1 [33m404[0m 0.986 ms - 121[0m
[0mGET /scores/employee/mock-user-id [33m404[0m 0.766 ms - 125[0m
[0mGET /weeklyscores/20251222 [33m404[0m 0.890 ms - 118[0m
[0mGET /scores [33m404[0m 0.940 ms - 103[0m
[0mPOST /user/invite [33m404[0m 0.732 ms - 108[0m
  console.log
    Received token: Token present

      at log (middleware/auth.js:9:13)

  console.error
    Token verification error: JsonWebTokenError {
      name: 'JsonWebTokenError',
      message: 'jwt malformed'
    }

    [0m [90m 210 |[39m       }[33m;[39m
     [90m 211 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 212 |[39m       console[33m.[39merror([32m'Token verification error:'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 213 |[39m
     [90m 214 |[39m       [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 215 |[39m         [36mthrow[39m [36mnew[39m [33mError[39m([32m'Invalid token'[39m)[33m;[39m[0m

      at Function.error [as verifyToken] (services/auth.service.js:212:15)
      at verifyToken (middleware/auth.js:20:38)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/express/lib/router/index.js:646:15
      at next (node_modules/express/lib/router/index.js:265:14)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at serveStatic (node_modules/serve-static/index.js:75:16)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at cookieParser (node_modules/cookie-parser/index.js:57:14)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at urlencodedParser (node_modules/body-parser/lib/types/urlencoded.js:103:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at jsonParser (node_modules/body-parser/lib/types/json.js:122:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at logger (node_modules/morgan/index.js:144:5)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at cors (node_modules/cors/lib/index.js:188:7)
      at node_modules/cors/lib/index.js:224:17
      at originCallback (node_modules/cors/lib/index.js:214:15)
      at node_modules/cors/lib/index.js:219:13
      at optionsCallback (node_modules/cors/lib/index.js:199:9)
      at corsMiddleware (node_modules/cors/lib/index.js:204:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at cors (node_modules/cors/lib/index.js:188:7)
      at node_modules/cors/lib/index.js:224:17
      at originCallback (node_modules/cors/lib/index.js:214:15)
      at node_modules/cors/lib/index.js:219:13
      at optionsCallback (node_modules/cors/lib/index.js:199:9)
      at corsMiddleware (node_modules/cors/lib/index.js:204:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at expressInit (node_modules/express/lib/middleware/init.js:40:5)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at query (node_modules/express/lib/middleware/query.js:45:5)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at Function.handle (node_modules/express/lib/application.js:181:10)
      at Server.app (node_modules/express/lib/express.js:39:9)

  console.error
    Authentication error: Invalid token

    [0m [90m 28 |[39m     next()[33m;[39m
     [90m 29 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 30 |[39m     console[33m.[39merror([32m'Authentication error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 31 |[39m
     [90m 32 |[39m     [36mconst[39m getStatusCode [33m=[39m () [33m=>[39m {
     [90m 33 |[39m       [36mif[39m (error[33m.[39mmessage [33m===[39m [32m'JWT_SECRET is not defined'[39m) {[0m

      at error (middleware/auth.js:30:13)

[0mPOST /auth/logout [33m401[0m 12.859 ms - 51[0m
FAIL test/e2e/complete-workflows.e2e.test.js
  E2E Tests - Complete Workflows
    Complete User Registration and Project Setup Workflow
      ├ù should complete full user onboarding (42 ms)
      ├ù should setup project with Jira integration (6 ms)
      ├ù should create scoring rules for project (5 ms)
    Complete Ticket Management Workflow
      ├ù should sync tickets from Jira and calculate scores (5 ms)
      ÔêÜ should update ticket and recalculate score (15 ms)
      ÔêÜ should transition ticket through workflow (5 ms)
    Complete Reporting and Analytics Workflow
      ├ù should retrieve employee scores and statistics (4 ms)
      ├ù should generate and retrieve weekly reports (11 ms)
    Complete Team Management Workflow
      ├ù should invite and manage team members (5 ms)
    Complete Cleanup Workflow
      ÔêÜ should cleanup test data (17 ms)

  ÔùÅ E2E Tests - Complete Workflows ÔÇ║ Complete User Registration and Project Setup Workflow ÔÇ║ should complete full user onboarding

    expect(received).toContain(expected) // indexOf

    Expected value: 404
    Received array: [200, 401]

      45 |         .get('/auth/isLogged')
      46 |         .set('Authorization', authToken || 'Bearer mock-token');
    > 47 |       expect([200, 401]).toContain(verifyRes.status);
         |                          ^
      48 |     });
      49 |
      50 |     it('should setup project with Jira integration', async () => {

      at Object.toContain (test/e2e/complete-workflows.e2e.test.js:47:26)

  ÔùÅ E2E Tests - Complete Workflows ÔÇ║ Complete User Registration and Project Setup Workflow ÔÇ║ should setup project with Jira integration

    expect(received).toContain(expected) // indexOf

    Expected value: 404
    Received array: [200, 201, 400, 401]

      59 |           protocol: 'https',
      60 |         });
    > 61 |       expect([200, 201, 400, 401]).toContain(configRes.status);
         |                                    ^
      62 |
      63 |       const configId = configRes.body?.id || 'mock-config-id';
      64 |

      at Object.toContain (test/e2e/complete-workflows.e2e.test.js:61:36)

  ÔùÅ E2E Tests - Complete Workflows ÔÇ║ Complete User Registration and Project Setup Workflow ÔÇ║ should create scoring rules for project

    expect(received).toContain(expected) // indexOf

    Expected value: 404
    Received array: [200, 201, 400, 401]

      100 |           },
      101 |         });
    > 102 |       expect([200, 201, 400, 401]).toContain(ruleRes.status);
          |                                    ^
      103 |
      104 |       ruleId = ruleRes.body?.id || 'mock-rule-id';
      105 |     });

      at Object.toContain (test/e2e/complete-workflows.e2e.test.js:102:36)

  ÔùÅ E2E Tests - Complete Workflows ÔÇ║ Complete Ticket Management Workflow ÔÇ║ should sync tickets from Jira and calculate scores

    expect(received).toContain(expected) // indexOf

    Expected value: 404
    Received array: [200, 400, 401, 500]

      122 |           },
      123 |         });
    > 124 |       expect([200, 400, 401, 500]).toContain(searchRes.status);
          |                                    ^
      125 |
      126 |       // 2. Sync ticket to Firebase
      127 |       if (searchRes.body?.issues && searchRes.body.issues.length > 0) {

      at Object.toContain (test/e2e/complete-workflows.e2e.test.js:124:36)

  ÔùÅ E2E Tests - Complete Workflows ÔÇ║ Complete Reporting and Analytics Workflow ÔÇ║ should retrieve employee scores and statistics

    expect(received).toContain(expected) // indexOf

    Expected value: 404
    Received array: [200, 400, 401]

      208 |         .get(`/scores/employee/${userId || 'mock-user-id'}`)
      209 |         .set('Authorization', authToken || 'Bearer mock-token');
    > 210 |       expect([200, 400, 401]).toContain(globalScoreRes.status);
          |                               ^
      211 |
      212 |       // 2. Get ticket statistics
      213 |       const statsRes = await request(app)

      at Object.toContain (test/e2e/complete-workflows.e2e.test.js:210:31)

  ÔùÅ E2E Tests - Complete Workflows ÔÇ║ Complete Reporting and Analytics Workflow ÔÇ║ should generate and retrieve weekly reports

    expect(received).toContain(expected) // indexOf

    Expected value: 404
    Received array: [200, 401]

      234 |         .get('/scores')
      235 |         .set('Authorization', authToken || 'Bearer mock-token');
    > 236 |       expect([200, 401]).toContain(allScoresRes.status);
          |                          ^
      237 |     });
      238 |   });
      239 |

      at Object.toContain (test/e2e/complete-workflows.e2e.test.js:236:26)

  ÔùÅ E2E Tests - Complete Workflows ÔÇ║ Complete Team Management Workflow ÔÇ║ should invite and manage team members

    expect(received).toContain(expected) // indexOf

    Expected value: 404
    Received array: [201, 400, 409, 401]

      248 |           managerId: userId || 'mock-manager-id',
      249 |         });
    > 250 |       expect([201, 400, 409, 401]).toContain(inviteRes.status);
          |                                    ^
      251 |
      252 |       // 2. Get all team members
      253 |       const usersRes = await request(app)

      at Object.toContain (test/e2e/complete-workflows.e2e.test.js:250:36)

[0mPOST /auth/signup [32m201[0m 5.096 ms - 249[0m
  console.error
    Signup error: All required fields must be provided

    [0m [90m 60 |[39m     })[33m;[39m
     [90m 61 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 62 |[39m     console[33m.[39merror([32m'Signup error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 63 |[39m
     [90m 64 |[39m     [36mreturn[39m res[33m.[39mstatus([33mHTTP_STATUS[39m[33m.[39m[33mBAD_REQUEST[39m)[33m.[39mjson({
     [90m 65 |[39m       error[33m:[39m [36mtrue[39m[33m,[39m[0m

      at error (controllers/auth.controller.js:62:13)

[0mPOST /auth/signup [33m400[0m 2.353 ms - 63[0m
  console.error
    Signup error: The email address is already in use by another account

    [0m [90m 60 |[39m     })[33m;[39m
     [90m 61 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 62 |[39m     console[33m.[39merror([32m'Signup error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 63 |[39m
     [90m 64 |[39m     [36mreturn[39m res[33m.[39mstatus([33mHTTP_STATUS[39m[33m.[39m[33mBAD_REQUEST[39m)[33m.[39mjson({
     [90m 65 |[39m       error[33m:[39m [36mtrue[39m[33m,[39m[0m

      at error (controllers/auth.controller.js:62:13)

[0mPOST /auth/signup [33m400[0m 2.140 ms - 81[0m
[0mPOST /auth/signin [32m200[0m 1.088 ms - 268[0m
  console.error
    Signin error: Incorrect password

    [0m [90m 85 |[39m     })[33m;[39m
     [90m 86 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 87 |[39m     console[33m.[39merror([32m'Signin error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 88 |[39m
     [90m 89 |[39m     [36mconst[39m getStatusCode [33m=[39m () [33m=>[39m {
     [90m 90 |[39m       [36mif[39m (error[33m.[39mmessage [33m===[39m [32m'Too many login attempts. Please try again later.'[39m) {[0m

      at error (controllers/auth.controller.js:87:13)

[0mPOST /auth/signin [33m401[0m 2.055 ms - 45[0m
  console.error
    Signin error: No user found with this email

    [0m [90m 85 |[39m     })[33m;[39m
     [90m 86 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 87 |[39m     console[33m.[39merror([32m'Signin error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 88 |[39m
     [90m 89 |[39m     [36mconst[39m getStatusCode [33m=[39m () [33m=>[39m {
     [90m 90 |[39m       [36mif[39m (error[33m.[39mmessage [33m===[39m [32m'Too many login attempts. Please try again later.'[39m) {[0m

      at error (controllers/auth.controller.js:87:13)

[0mPOST /auth/signin [33m401[0m 2.104 ms - 56[0m
[0mPOST /auth/forgot-password [33m404[0m 0.688 ms - 117[0m
[0mPOST /auth/forgot-password [33m404[0m 0.588 ms - 117[0m
[0mGET /auth/isLogged [33m404[0m 0.869 ms - 110[0m
[0mGET /auth/isLogged [33m404[0m 0.827 ms - 110[0m
  console.log
    Received token: Token present

      at log (middleware/auth.js:9:13)

  console.error
    Authentication error: Cannot read properties of undefined (reading 'tokenData')

    [0m [90m 28 |[39m     next()[33m;[39m
     [90m 29 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 30 |[39m     console[33m.[39merror([32m'Authentication error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 31 |[39m
     [90m 32 |[39m     [36mconst[39m getStatusCode [33m=[39m () [33m=>[39m {
     [90m 33 |[39m       [36mif[39m (error[33m.[39mmessage [33m===[39m [32m'JWT_SECRET is not defined'[39m) {[0m

      at error (middleware/auth.js:30:13)

[0mPOST /auth/logout [33m401[0m 5.204 ms - 51[0m
[0mPOST /auth/signin [32m200[0m 0.513 ms - 262[0m
[0mPOST /auth/signin [32m200[0m 0.404 ms - 262[0m
[0mPOST /auth/signin [32m200[0m 0.364 ms - 262[0m
[0mPOST /auth/signin [32m200[0m 0.351 ms - 262[0m
[0mPOST /auth/signin [32m200[0m 0.342 ms - 262[0m
  console.error
    Signin error: Cannot read properties of undefined (reading 'message')

    [0m [90m 85 |[39m     })[33m;[39m
     [90m 86 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 87 |[39m     console[33m.[39merror([32m'Signin error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 88 |[39m
     [90m 89 |[39m     [36mconst[39m getStatusCode [33m=[39m () [33m=>[39m {
     [90m 90 |[39m       [36mif[39m (error[33m.[39mmessage [33m===[39m [32m'Too many login attempts. Please try again later.'[39m) {[0m

      at error (controllers/auth.controller.js:87:13)

[0mPOST /auth/signin [33m401[0m 2.314 ms - 82[0m
  console.error
    Signin error: Database connection failed: password=secret123

    [0m [90m 85 |[39m     })[33m;[39m
     [90m 86 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 87 |[39m     console[33m.[39merror([32m'Signin error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 88 |[39m
     [90m 89 |[39m     [36mconst[39m getStatusCode [33m=[39m () [33m=>[39m {
     [90m 90 |[39m       [36mif[39m (error[33m.[39mmessage [33m===[39m [32m'Too many login attempts. Please try again later.'[39m) {[0m

      at error (controllers/auth.controller.js:87:13)

[0mPOST /auth/signin [33m401[0m 1.853 ms - 73[0m
  console.error
    Signin error: Too many login attempts. Please try again later.

    [0m [90m 85 |[39m     })[33m;[39m
     [90m 86 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 87 |[39m     console[33m.[39merror([32m'Signin error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 88 |[39m
     [90m 89 |[39m     [36mconst[39m getStatusCode [33m=[39m () [33m=>[39m {
     [90m 90 |[39m       [36mif[39m (error[33m.[39mmessage [33m===[39m [32m'Too many login attempts. Please try again later.'[39m) {[0m

      at error (controllers/auth.controller.js:87:13)

[0mPOST /auth/signin [33m429[0m 1.862 ms - 75[0m
[0mGET /auth/isLogged [33m404[0m 0.792 ms - 110[0m
FAIL test/integration/auth.integration.test.js
  Integration Tests - Auth Flow
    ÔêÜ should handle concurrent login requests (14 ms)
    ÔêÜ should handle malformed requests (7 ms)
    ├ù should sanitize error messages (6 ms)
    ÔêÜ should rate limit excessive requests (6 ms)
    ÔêÜ should handle token refresh flow (4 ms)
    POST /auth/signup - Integration
      ÔêÜ should register user through full stack (11 ms)
      ÔêÜ should validate required fields (7 ms)
      ÔêÜ should handle duplicate email (6 ms)
    POST /auth/signin - Integration
      ÔêÜ should login user through full stack (5 ms)
      ÔêÜ should reject invalid credentials (7 ms)
      ÔêÜ should handle non-existent user (6 ms)
    POST /auth/forgot-password - Integration
      ├ù should send reset email through full stack (5 ms)
      ├ù should validate email format (4 ms)
    GET /auth/isLogged - Integration
      ├ù should verify authenticated user (5 ms)
      ├ù should reject unauthenticated request (5 ms)
    POST /auth/logout - Integration
      ├ù should logout user successfully (13 ms)

  ÔùÅ Integration Tests - Auth Flow ÔÇ║ POST /auth/forgot-password - Integration ÔÇ║ should send reset email through full stack

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 404

      127 |         .send({ email: 'test@example.com' });
      128 |
    > 129 |       expect(response.status).toBe(200);
          |                               ^
      130 |       expect(response.body.message).toContain('reset');
      131 |     });
      132 |

      at Object.toBe (test/integration/auth.integration.test.js:129:31)

  ÔùÅ Integration Tests - Auth Flow ÔÇ║ POST /auth/forgot-password - Integration ÔÇ║ should validate email format

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 404

      138 |         .send({ email: 'invalid-email' });
      139 |
    > 140 |       expect(response.status).toBe(400);
          |                               ^
      141 |     });
      142 |   });
      143 |

      at Object.toBe (test/integration/auth.integration.test.js:140:31)

  ÔùÅ Integration Tests - Auth Flow ÔÇ║ GET /auth/isLogged - Integration ÔÇ║ should verify authenticated user

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 404

      153 |         .set('Authorization', 'Bearer valid-jwt-token');
      154 |
    > 155 |       expect(response.status).toBe(200);
          |                               ^
      156 |       expect(response.body.user).toBeDefined();
      157 |     });
      158 |

      at Object.toBe (test/integration/auth.integration.test.js:155:31)

  ÔùÅ Integration Tests - Auth Flow ÔÇ║ GET /auth/isLogged - Integration ÔÇ║ should reject unauthenticated request

    expect(received).toBe(expected) // Object.is equality

    Expected: 401
    Received: 404

      161 |         .get('/auth/isLogged');
      162 |
    > 163 |       expect(response.status).toBe(401);
          |                               ^
      164 |     });
      165 |   });
      166 |

      at Object.toBe (test/integration/auth.integration.test.js:163:31)

  ÔùÅ Integration Tests - Auth Flow ÔÇ║ POST /auth/logout - Integration ÔÇ║ should logout user successfully

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

      176 |         .set('Authorization', 'Bearer valid-jwt-token');
      177 |
    > 178 |       expect(response.status).toBe(200);
          |                               ^
      179 |       expect(response.body.clearToken).toBe(true);
      180 |     });
      181 |   });

      at Object.toBe (test/integration/auth.integration.test.js:178:31)

  ÔùÅ Integration Tests - Auth Flow ÔÇ║ should sanitize error messages

    expect(received).not.toContain(expected) // indexOf

    Expected substring: not "secret"
    Received string:        "Database connection failed: password=secret123"

      217 |       .send({ email: 'test@example.com', password: 'pass' });
      218 |
    > 219 |     expect(response.body.message).not.toContain('secret');
          |                                       ^
      220 |   });
      221 |
      222 |   it('should rate limit excessive requests', async () => {

      at Object.toContain (test/integration/auth.integration.test.js:219:39)

  console.error
    Registration error: TypeError: Cannot read properties of undefined (reading 'user')
        at Function.user [as register] (C:\Project\PFE\pfe-back\services\auth.service.js:30:43)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at Object.<anonymous>.exports.signup (C:\Project\PFE\pfe-back\controllers\auth.controller.js:49:20)

    [0m [90m 44 |[39m       }[33m;[39m
     [90m 45 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 46 |[39m       console[33m.[39merror([32m'Registration error:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 47 |[39m
     [90m 48 |[39m       [90m// Handle specific Firebase Auth errors[39m
     [90m 49 |[39m       [36mif[39m (error[33m.[39mcode [33m===[39m [32m'auth/weak-password'[39m) {[0m

      at Function.error [as register] (services/auth.service.js:46:15)
      at Object.<anonymous>.exports.signup (controllers/auth.controller.js:49:20)

  console.error
    Signup error: Registration failed

    [0m [90m 60 |[39m     })[33m;[39m
     [90m 61 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 62 |[39m     console[33m.[39merror([32m'Signup error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 63 |[39m
     [90m 64 |[39m     [36mreturn[39m res[33m.[39mstatus([33mHTTP_STATUS[39m[33m.[39m[33mBAD_REQUEST[39m)[33m.[39mjson({
     [90m 65 |[39m       error[33m:[39m [36mtrue[39m[33m,[39m[0m

      at error (controllers/auth.controller.js:62:13)

[0mPOST /auth/signup [33m400[0m 13.998 ms - 46[0m
  console.error
    Login error: TypeError: Cannot read properties of undefined (reading 'user')
        at Function.user [as login] (C:\Project\PFE\pfe-back\services\auth.service.js:77:43)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at Object.<anonymous>.exports.signin (C:\Project\PFE\pfe-back\controllers\auth.controller.js:78:20)

    [0m [90m 93 |[39m       }[33m;[39m
     [90m 94 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 95 |[39m       console[33m.[39merror([32m'Login error:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 96 |[39m
     [90m 97 |[39m       [90m// Handle specific Firebase Auth errors[39m
     [90m 98 |[39m       [36mswitch[39m (error[33m.[39mcode) {[0m

      at Function.error (services/auth.service.js:95:15)
      at Object.<anonymous>.exports.signin (controllers/auth.controller.js:78:20)

  console.error
    Signin error: Authentication failed

    [0m [90m 85 |[39m     })[33m;[39m
     [90m 86 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 87 |[39m     console[33m.[39merror([32m'Signin error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 88 |[39m
     [90m 89 |[39m     [36mconst[39m getStatusCode [33m=[39m () [33m=>[39m {
     [90m 90 |[39m       [36mif[39m (error[33m.[39mmessage [33m===[39m [32m'Too many login attempts. Please try again later.'[39m) {[0m

      at error (controllers/auth.controller.js:87:13)

[0mPOST /auth/signin [33m401[0m 3.259 ms - 48[0m
[0mPOST /auth/forgot-password [33m404[0m 0.899 ms - 117[0m
[0mGET /auth/isLogged [33m404[0m 0.983 ms - 110[0m
  console.log
    Received token: Token present

      at log (middleware/auth.js:9:13)

  console.error
    Token verification error: JsonWebTokenError {
      name: 'JsonWebTokenError',
      message: 'jwt malformed'
    }

    [0m [90m 210 |[39m       }[33m;[39m
     [90m 211 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 212 |[39m       console[33m.[39merror([32m'Token verification error:'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 213 |[39m
     [90m 214 |[39m       [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 215 |[39m         [36mthrow[39m [36mnew[39m [33mError[39m([32m'Invalid token'[39m)[33m;[39m[0m

      at Function.error [as verifyToken] (services/auth.service.js:212:15)
      at verifyToken (middleware/auth.js:20:38)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/express/lib/router/index.js:646:15
      at next (node_modules/express/lib/router/index.js:265:14)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at serveStatic (node_modules/serve-static/index.js:75:16)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at cookieParser (node_modules/cookie-parser/index.js:57:14)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at urlencodedParser (node_modules/body-parser/lib/types/urlencoded.js:103:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at jsonParser (node_modules/body-parser/lib/types/json.js:122:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at logger (node_modules/morgan/index.js:144:5)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at cors (node_modules/cors/lib/index.js:188:7)
      at node_modules/cors/lib/index.js:224:17
      at originCallback (node_modules/cors/lib/index.js:214:15)
      at node_modules/cors/lib/index.js:219:13
      at optionsCallback (node_modules/cors/lib/index.js:199:9)
      at corsMiddleware (node_modules/cors/lib/index.js:204:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at cors (node_modules/cors/lib/index.js:188:7)
      at node_modules/cors/lib/index.js:224:17
      at originCallback (node_modules/cors/lib/index.js:214:15)
      at node_modules/cors/lib/index.js:219:13
      at optionsCallback (node_modules/cors/lib/index.js:199:9)
      at corsMiddleware (node_modules/cors/lib/index.js:204:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at expressInit (node_modules/express/lib/middleware/init.js:40:5)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at query (node_modules/express/lib/middleware/query.js:45:5)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at Function.handle (node_modules/express/lib/application.js:181:10)
      at Server.app (node_modules/express/lib/express.js:39:9)

  console.error
    Authentication error: Invalid token

    [0m [90m 28 |[39m     next()[33m;[39m
     [90m 29 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 30 |[39m     console[33m.[39merror([32m'Authentication error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 31 |[39m
     [90m 32 |[39m     [36mconst[39m getStatusCode [33m=[39m () [33m=>[39m {
     [90m 33 |[39m       [36mif[39m (error[33m.[39mmessage [33m===[39m [32m'JWT_SECRET is not defined'[39m) {[0m

      at error (middleware/auth.js:30:13)

[0mPOST /auth/logout [33m401[0m 10.867 ms - 51[0m
[0mGET /user [33m404[0m 1.003 ms - 101[0m
[0mGET /user/test-uid-123 [33m404[0m 0.771 ms - 114[0m
[0mGET /user/account/jira-123 [33m404[0m 0.743 ms - 118[0m
[0mPUT /user/test-uid-123 [33m404[0m 0.695 ms - 114[0m
[0mPOST /user/invite [33m404[0m 0.617 ms - 108[0m
  console.log
    Received token: Token present

      at log (middleware/auth.js:9:13)

  console.error
    Token verification error: JsonWebTokenError {
      name: 'JsonWebTokenError',
      message: 'jwt malformed'
    }

    [0m [90m 210 |[39m       }[33m;[39m
     [90m 211 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 212 |[39m       console[33m.[39merror([32m'Token verification error:'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 213 |[39m
     [90m 214 |[39m       [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 215 |[39m         [36mthrow[39m [36mnew[39m [33mError[39m([32m'Invalid token'[39m)[33m;[39m[0m

      at Function.error [as verifyToken] (services/auth.service.js:212:15)
      at verifyToken (middleware/auth.js:20:38)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/express/lib/router/index.js:646:15
      at next (node_modules/express/lib/router/index.js:265:14)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at SendStream.error (node_modules/serve-static/index.js:121:7)
      at SendStream.error (node_modules/send/index.js:270:17)
      at SendStream.onStatError (node_modules/send/index.js:417:12)
      at next (node_modules/send/index.js:730:16)
      at onstat (node_modules/send/index.js:719:14)

  console.error
    Authentication error: Invalid token

    [0m [90m 28 |[39m     next()[33m;[39m
     [90m 29 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 30 |[39m     console[33m.[39merror([32m'Authentication error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 31 |[39m
     [90m 32 |[39m     [36mconst[39m getStatusCode [33m=[39m () [33m=>[39m {
     [90m 33 |[39m       [36mif[39m (error[33m.[39mmessage [33m===[39m [32m'JWT_SECRET is not defined'[39m) {[0m

      at error (middleware/auth.js:30:13)

[0mGET /project/getAllProject [33m401[0m 5.595 ms - 51[0m
  console.log
    Received token: Token present

      at log (middleware/auth.js:9:13)

  console.error
    Token verification error: JsonWebTokenError {
      name: 'JsonWebTokenError',
      message: 'jwt malformed'
    }

    [0m [90m 210 |[39m       }[33m;[39m
     [90m 211 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 212 |[39m       console[33m.[39merror([32m'Token verification error:'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 213 |[39m
     [90m 214 |[39m       [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 215 |[39m         [36mthrow[39m [36mnew[39m [33mError[39m([32m'Invalid token'[39m)[33m;[39m[0m

      at Function.error [as verifyToken] (services/auth.service.js:212:15)
      at verifyToken (middleware/auth.js:20:38)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/express/lib/router/index.js:646:15
      at next (node_modules/express/lib/router/index.js:265:14)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at serveStatic (node_modules/serve-static/index.js:75:16)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at cookieParser (node_modules/cookie-parser/index.js:57:14)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at urlencodedParser (node_modules/body-parser/lib/types/urlencoded.js:85:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/body-parser/lib/read.js:137:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

  console.error
    Authentication error: Invalid token

    [0m [90m 28 |[39m     next()[33m;[39m
     [90m 29 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 30 |[39m     console[33m.[39merror([32m'Authentication error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 31 |[39m
     [90m 32 |[39m     [36mconst[39m getStatusCode [33m=[39m () [33m=>[39m {
     [90m 33 |[39m       [36mif[39m (error[33m.[39mmessage [33m===[39m [32m'JWT_SECRET is not defined'[39m) {[0m

      at error (middleware/auth.js:30:13)

[0mPOST /project/addNewProject [33m401[0m 6.407 ms - 51[0m
  console.log
    Received token: Token present

      at log (middleware/auth.js:9:13)

  console.error
    Token verification error: JsonWebTokenError {
      name: 'JsonWebTokenError',
      message: 'jwt malformed'
    }

    [0m [90m 210 |[39m       }[33m;[39m
     [90m 211 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 212 |[39m       console[33m.[39merror([32m'Token verification error:'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 213 |[39m
     [90m 214 |[39m       [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 215 |[39m         [36mthrow[39m [36mnew[39m [33mError[39m([32m'Invalid token'[39m)[33m;[39m[0m

      at Function.error [as verifyToken] (services/auth.service.js:212:15)
      at verifyToken (middleware/auth.js:20:38)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/express/lib/router/index.js:646:15
      at next (node_modules/express/lib/router/index.js:265:14)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at serveStatic (node_modules/serve-static/index.js:75:16)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at cookieParser (node_modules/cookie-parser/index.js:57:14)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at urlencodedParser (node_modules/body-parser/lib/types/urlencoded.js:85:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/body-parser/lib/read.js:137:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

  console.error
    Authentication error: Invalid token

    [0m [90m 28 |[39m     next()[33m;[39m
     [90m 29 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 30 |[39m     console[33m.[39merror([32m'Authentication error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 31 |[39m
     [90m 32 |[39m     [36mconst[39m getStatusCode [33m=[39m () [33m=>[39m {
     [90m 33 |[39m       [36mif[39m (error[33m.[39mmessage [33m===[39m [32m'JWT_SECRET is not defined'[39m) {[0m

      at error (middleware/auth.js:30:13)

[0mPOST /project/deleteProjectByID [33m401[0m 6.094 ms - 51[0m
  console.log
    Received token: Token present

      at log (middleware/auth.js:9:13)

  console.error
    Token verification error: JsonWebTokenError {
      name: 'JsonWebTokenError',
      message: 'jwt malformed'
    }

    [0m [90m 210 |[39m       }[33m;[39m
     [90m 211 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 212 |[39m       console[33m.[39merror([32m'Token verification error:'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 213 |[39m
     [90m 214 |[39m       [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 215 |[39m         [36mthrow[39m [36mnew[39m [33mError[39m([32m'Invalid token'[39m)[33m;[39m[0m

      at Function.error [as verifyToken] (services/auth.service.js:212:15)
      at verifyToken (middleware/auth.js:20:38)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/express/lib/router/index.js:646:15
      at next (node_modules/express/lib/router/index.js:265:14)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at serveStatic (node_modules/serve-static/index.js:75:16)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at cookieParser (node_modules/cookie-parser/index.js:57:14)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at urlencodedParser (node_modules/body-parser/lib/types/urlencoded.js:85:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/body-parser/lib/read.js:137:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

  console.error
    Authentication error: Invalid token

    [0m [90m 28 |[39m     next()[33m;[39m
     [90m 29 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 30 |[39m     console[33m.[39merror([32m'Authentication error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 31 |[39m
     [90m 32 |[39m     [36mconst[39m getStatusCode [33m=[39m () [33m=>[39m {
     [90m 33 |[39m       [36mif[39m (error[33m.[39mmessage [33m===[39m [32m'JWT_SECRET is not defined'[39m) {[0m

      at error (middleware/auth.js:30:13)

[0mPOST /project/updateProjectByID [33m401[0m 5.955 ms - 51[0m
[0mGET /project/project-123 [33m404[0m 0.765 ms - 116[0m
  console.log
    Received token: Token present

      at log (middleware/auth.js:9:13)

  console.error
    Token verification error: JsonWebTokenError {
      name: 'JsonWebTokenError',
      message: 'jwt malformed'
    }

    [0m [90m 210 |[39m       }[33m;[39m
     [90m 211 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 212 |[39m       console[33m.[39merror([32m'Token verification error:'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 213 |[39m
     [90m 214 |[39m       [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 215 |[39m         [36mthrow[39m [36mnew[39m [33mError[39m([32m'Invalid token'[39m)[33m;[39m[0m

      at Function.error [as verifyToken] (services/auth.service.js:212:15)
      at verifyToken (middleware/auth.js:20:38)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/express/lib/router/index.js:646:15
      at next (node_modules/express/lib/router/index.js:265:14)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at serveStatic (node_modules/serve-static/index.js:75:16)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at cookieParser (node_modules/cookie-parser/index.js:57:14)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at urlencodedParser (node_modules/body-parser/lib/types/urlencoded.js:85:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/body-parser/lib/read.js:137:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

  console.error
    Authentication error: Invalid token

    [0m [90m 28 |[39m     next()[33m;[39m
     [90m 29 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 30 |[39m     console[33m.[39merror([32m'Authentication error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 31 |[39m
     [90m 32 |[39m     [36mconst[39m getStatusCode [33m=[39m () [33m=>[39m {
     [90m 33 |[39m       [36mif[39m (error[33m.[39mmessage [33m===[39m [32m'JWT_SECRET is not defined'[39m) {[0m

      at error (middleware/auth.js:30:13)

[0mPOST /scores/calculate [33m401[0m 5.814 ms - 51[0m
  console.log
    Received token: Token present

      at log (middleware/auth.js:9:13)

  console.error
    Token verification error: JsonWebTokenError {
      name: 'JsonWebTokenError',
      message: 'jwt malformed'
    }

    [0m [90m 210 |[39m       }[33m;[39m
     [90m 211 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 212 |[39m       console[33m.[39merror([32m'Token verification error:'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 213 |[39m
     [90m 214 |[39m       [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 215 |[39m         [36mthrow[39m [36mnew[39m [33mError[39m([32m'Invalid token'[39m)[33m;[39m[0m

      at Function.error [as verifyToken] (services/auth.service.js:212:15)
      at verifyToken (middleware/auth.js:20:38)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/express/lib/router/index.js:646:15
      at next (node_modules/express/lib/router/index.js:265:14)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at serveStatic (node_modules/serve-static/index.js:75:16)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at cookieParser (node_modules/cookie-parser/index.js:57:14)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at urlencodedParser (node_modules/body-parser/lib/types/urlencoded.js:85:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/body-parser/lib/read.js:137:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

  console.error
    Authentication error: Invalid token

    [0m [90m 28 |[39m     next()[33m;[39m
     [90m 29 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 30 |[39m     console[33m.[39merror([32m'Authentication error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 31 |[39m
     [90m 32 |[39m     [36mconst[39m getStatusCode [33m=[39m () [33m=>[39m {
     [90m 33 |[39m       [36mif[39m (error[33m.[39mmessage [33m===[39m [32m'JWT_SECRET is not defined'[39m) {[0m

      at error (middleware/auth.js:30:13)

[0mPOST /scores/calculate-multiple [33m401[0m 6.325 ms - 51[0m
[0mGET /scores [33m404[0m 0.706 ms - 103[0m
[0mGET /scores/ticket/ticket-123 [33m404[0m 0.814 ms - 121[0m
[0mGET /scores/employee/jira-123 [33m404[0m 0.670 ms - 121[0m
[0mPOST /rules [33m404[0m 0.630 ms - 102[0m
[0mGET /rules [33m404[0m 0.665 ms - 102[0m
[0mGET /rules/rule-123 [33m404[0m 0.656 ms - 111[0m
[0mPOST /jira_config [33m404[0m 0.688 ms - 108[0m
[0mGET /jira_config/config-123 [33m404[0m 0.636 ms - 119[0m
[0mGET /weeklyscores [33m404[0m 0.865 ms - 109[0m
[0mGET /weeklyscores/20240101 [33m404[0m 0.820 ms - 118[0m
[0mGET /ticket/ticket-123 [33m404[0m 1.051 ms - 114[0m
[0mPUT /ticket/ticket-123 [33m404[0m 0.754 ms - 114[0m
[0mPOST /jira_client/search [33m404[0m 0.964 ms - 115[0m
FAIL test/functional/api.functional.test.js
  Functional API Tests - Complete Endpoints
    POST /auth/signup
      ÔêÜ should register new user (19 ms)
    POST /auth/signin
      ÔêÜ should login user (6 ms)
    POST /auth/forgot-password
      ├ù should send password reset email (8 ms)
    GET /auth/isLogged
      ├ù should verify authentication (5 ms)
    POST /auth/logout
      ÔêÜ should logout user (15 ms)
    GET /user
      ├ù should get all users (5 ms)
    GET /user/:uid
      ÔêÜ should get user by UID (4 ms)
    GET /user/account/:accountId
      ÔêÜ should get user by accountId (4 ms)
    PUT /user/:uid
      ÔêÜ should update user (4 ms)
    POST /user/invite
      ├ù should invite new user (4 ms)
    GET /project/getAllProject
      ÔêÜ should get all projects (9 ms)
    POST /project/addNewProject
      ÔêÜ should create new project (12 ms)
    POST /project/deleteProjectByID
      ÔêÜ should delete project (9 ms)
    POST /project/updateProjectByID
      ÔêÜ should update project (9 ms)
    GET /project/:projectId
      ÔêÜ should get project by ID (4 ms)
    POST /scores/calculate
      ÔêÜ should calculate ticket score (10 ms)
    POST /scores/calculate-multiple
      ÔêÜ should calculate multiple scores (11 ms)
    GET /scores
      ├ù should get all ticket scores (4 ms)
    GET /scores/ticket/:ticketId
      ├ù should get scores by ticket ID (4 ms)
    GET /scores/employee/:uid
      ├ù should get employee global score (4 ms)
    POST /rules
      ├ù should create new rule (4 ms)
    GET /rules
      ├ù should get all rules (4 ms)
    GET /rules/:ruleId
      ÔêÜ should get rule by ID (5 ms)
    POST /jira_config
      ├ù should create Jira config (4 ms)
    GET /jira_config/:configId
      ÔêÜ should get Jira config by ID (4 ms)
    GET /weeklyscores
      ├ù should get weekly top scores (5 ms)
    GET /weeklyscores/:weekId
      ÔêÜ should get weekly scores by week ID (6 ms)
    GET /ticket/:ticketId
      ÔêÜ should get ticket details (7 ms)
    PUT /ticket/:ticketId
      ÔêÜ should update ticket (5 ms)
    POST /jira_client/search
      ├ù should search Jira issues (7 ms)

  ÔùÅ Functional API Tests - Complete Endpoints ÔÇ║ POST /auth/forgot-password ÔÇ║ should send password reset email

    expect(received).toContain(expected) // indexOf

    Expected value: 404
    Received array: [200, 400]

      44 |         .post('/auth/forgot-password')
      45 |         .send({ email: 'test@example.com' });
    > 46 |       expect([200, 400]).toContain(res.status);
         |                          ^
      47 |     });
      48 |   });
      49 |

      at Object.toContain (test/functional/api.functional.test.js:46:26)

  ÔùÅ Functional API Tests - Complete Endpoints ÔÇ║ GET /auth/isLogged ÔÇ║ should verify authentication

    expect(received).toContain(expected) // indexOf

    Expected value: 404
    Received array: [200, 401]

      53 |         .get('/auth/isLogged')
      54 |         .set('Authorization', authToken);
    > 55 |       expect([200, 401]).toContain(res.status);
         |                          ^
      56 |     });
      57 |   });
      58 |

      at Object.toContain (test/functional/api.functional.test.js:55:26)

  ÔùÅ Functional API Tests - Complete Endpoints ÔÇ║ GET /user ÔÇ║ should get all users

    expect(received).toContain(expected) // indexOf

    Expected value: 404
    Received array: [200, 401]

      72 |         .get('/user')
      73 |         .set('Authorization', authToken);
    > 74 |       expect([200, 401]).toContain(res.status);
         |                          ^
      75 |     });
      76 |   });
      77 |

      at Object.toContain (test/functional/api.functional.test.js:74:26)

  ÔùÅ Functional API Tests - Complete Endpoints ÔÇ║ POST /user/invite ÔÇ║ should invite new user

    expect(received).toContain(expected) // indexOf

    Expected value: 404
    Received array: [201, 400, 409, 401]

      109 |         .set('Authorization', authToken)
      110 |         .send({ email: 'new@example.com', managerId: 'manager-123' });
    > 111 |       expect([201, 400, 409, 401]).toContain(res.status);
          |                                    ^
      112 |     });
      113 |   });
      114 |

      at Object.toContain (test/functional/api.functional.test.js:111:36)

  ÔùÅ Functional API Tests - Complete Endpoints ÔÇ║ GET /scores ÔÇ║ should get all ticket scores

    expect(received).toContain(expected) // indexOf

    Expected value: 404
    Received array: [200, 401]

      201 |         .get('/scores')
      202 |         .set('Authorization', authToken);
    > 203 |       expect([200, 401]).toContain(res.status);
          |                          ^
      204 |     });
      205 |   });
      206 |

      at Object.toContain (test/functional/api.functional.test.js:203:26)

  ÔùÅ Functional API Tests - Complete Endpoints ÔÇ║ GET /scores/ticket/:ticketId ÔÇ║ should get scores by ticket ID

    expect(received).toContain(expected) // indexOf

    Expected value: 404
    Received array: [200, 401]

      210 |         .get('/scores/ticket/ticket-123')
      211 |         .set('Authorization', authToken);
    > 212 |       expect([200, 401]).toContain(res.status);
          |                          ^
      213 |     });
      214 |   });
      215 |

      at Object.toContain (test/functional/api.functional.test.js:212:26)

  ÔùÅ Functional API Tests - Complete Endpoints ÔÇ║ GET /scores/employee/:uid ÔÇ║ should get employee global score

    expect(received).toContain(expected) // indexOf

    Expected value: 404
    Received array: [200, 400, 401]

      219 |         .get('/scores/employee/jira-123')
      220 |         .set('Authorization', authToken);
    > 221 |       expect([200, 400, 401]).toContain(res.status);
          |                               ^
      222 |     });
      223 |   });
      224 |

      at Object.toContain (test/functional/api.functional.test.js:221:31)

  ÔùÅ Functional API Tests - Complete Endpoints ÔÇ║ POST /rules ÔÇ║ should create new rule

    expect(received).toContain(expected) // indexOf

    Expected value: 404
    Received array: [201, 400, 401]

      234 |           priority: { High: { checked: true, value: 10 } },
      235 |         });
    > 236 |       expect([201, 400, 401]).toContain(res.status);
          |                               ^
      237 |     });
      238 |   });
      239 |

      at Object.toContain (test/functional/api.functional.test.js:236:31)

  ÔùÅ Functional API Tests - Complete Endpoints ÔÇ║ GET /rules ÔÇ║ should get all rules

    expect(received).toContain(expected) // indexOf

    Expected value: 404
    Received array: [200, 401]

      243 |         .get('/rules')
      244 |         .set('Authorization', authToken);
    > 245 |       expect([200, 401]).toContain(res.status);
          |                          ^
      246 |     });
      247 |   });
      248 |

      at Object.toContain (test/functional/api.functional.test.js:245:26)

  ÔùÅ Functional API Tests - Complete Endpoints ÔÇ║ POST /jira_config ÔÇ║ should create Jira config

    expect(received).toContain(expected) // indexOf

    Expected value: 404
    Received array: [201, 400, 401]

      267 |           password: 'api-token',
      268 |         });
    > 269 |       expect([201, 400, 401]).toContain(res.status);
          |                               ^
      270 |     });
      271 |   });
      272 |

      at Object.toContain (test/functional/api.functional.test.js:269:31)

  ÔùÅ Functional API Tests - Complete Endpoints ÔÇ║ GET /weeklyscores ÔÇ║ should get weekly top scores

    expect(received).toContain(expected) // indexOf

    Expected value: 404
    Received array: [200, 401]

      286 |         .get('/weeklyscores')
      287 |         .set('Authorization', authToken);
    > 288 |       expect([200, 401]).toContain(res.status);
          |                          ^
      289 |     });
      290 |   });
      291 |

      at Object.toContain (test/functional/api.functional.test.js:288:26)

  ÔùÅ Functional API Tests - Complete Endpoints ÔÇ║ POST /jira_client/search ÔÇ║ should search Jira issues

    expect(received).toContain(expected) // indexOf

    Expected value: 404
    Received array: [200, 400, 401, 500]

      335 |           },
      336 |         });
    > 337 |       expect([200, 400, 401, 500]).toContain(res.status);
          |                                    ^
      338 |     });
      339 |   });
      340 | });

      at Object.toContain (test/functional/api.functional.test.js:337:36)

[0mGET /user [33m404[0m 1.331 ms - 101[0m
[0mGET /user/test-uid-123 [33m404[0m 1.178 ms - 114[0m
[0mGET /user/invalid-uid [33m404[0m 0.839 ms - 113[0m
[0mGET /user/account/jira-123 [33m404[0m 0.725 ms - 118[0m
[0mPUT /user/test-uid-123 [33m404[0m 6.101 ms - 114[0m
  console.log
    Received token: Token present

      at log (middleware/auth.js:9:13)

  console.error
    Token verification error: JsonWebTokenError {
      name: 'JsonWebTokenError',
      message: 'jwt malformed'
    }

    [0m [90m 210 |[39m       }[33m;[39m
     [90m 211 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 212 |[39m       console[33m.[39merror([32m'Token verification error:'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 213 |[39m
     [90m 214 |[39m       [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 215 |[39m         [36mthrow[39m [36mnew[39m [33mError[39m([32m'Invalid token'[39m)[33m;[39m[0m

      at Function.error [as verifyToken] (services/auth.service.js:212:15)
      at verifyToken (middleware/auth.js:20:38)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/express/lib/router/index.js:646:15
      at next (node_modules/express/lib/router/index.js:265:14)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at SendStream.error (node_modules/serve-static/index.js:121:7)
      at SendStream.error (node_modules/send/index.js:270:17)
      at SendStream.onStatError (node_modules/send/index.js:417:12)
      at next (node_modules/send/index.js:730:16)
      at onstat (node_modules/send/index.js:719:14)

  console.error
    Authentication error: Invalid token

    [0m [90m 28 |[39m     next()[33m;[39m
     [90m 29 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 30 |[39m     console[33m.[39merror([32m'Authentication error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 31 |[39m
     [90m 32 |[39m     [36mconst[39m getStatusCode [33m=[39m () [33m=>[39m {
     [90m 33 |[39m       [36mif[39m (error[33m.[39mmessage [33m===[39m [32m'JWT_SECRET is not defined'[39m) {[0m

      at error (middleware/auth.js:30:13)

[0mGET /project/getAllProject [33m401[0m 5.032 ms - 51[0m
  console.log
    Received token: Token present

      at log (middleware/auth.js:9:13)

  console.error
    Token verification error: JsonWebTokenError {
      name: 'JsonWebTokenError',
      message: 'jwt malformed'
    }

    [0m [90m 210 |[39m       }[33m;[39m
     [90m 211 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 212 |[39m       console[33m.[39merror([32m'Token verification error:'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 213 |[39m
     [90m 214 |[39m       [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 215 |[39m         [36mthrow[39m [36mnew[39m [33mError[39m([32m'Invalid token'[39m)[33m;[39m[0m

      at Function.error [as verifyToken] (services/auth.service.js:212:15)
      at verifyToken (middleware/auth.js:20:38)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/express/lib/router/index.js:646:15
      at next (node_modules/express/lib/router/index.js:265:14)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at serveStatic (node_modules/serve-static/index.js:75:16)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at cookieParser (node_modules/cookie-parser/index.js:57:14)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at urlencodedParser (node_modules/body-parser/lib/types/urlencoded.js:85:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/body-parser/lib/read.js:137:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

  console.error
    Authentication error: Invalid token

    [0m [90m 28 |[39m     next()[33m;[39m
     [90m 29 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 30 |[39m     console[33m.[39merror([32m'Authentication error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 31 |[39m
     [90m 32 |[39m     [36mconst[39m getStatusCode [33m=[39m () [33m=>[39m {
     [90m 33 |[39m       [36mif[39m (error[33m.[39mmessage [33m===[39m [32m'JWT_SECRET is not defined'[39m) {[0m

      at error (middleware/auth.js:30:13)

[0mPOST /project/addNewProject [33m401[0m 6.884 ms - 51[0m
  console.log
    Received token: Token present

      at log (middleware/auth.js:9:13)

  console.error
    Token verification error: JsonWebTokenError {
      name: 'JsonWebTokenError',
      message: 'jwt malformed'
    }

    [0m [90m 210 |[39m       }[33m;[39m
     [90m 211 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 212 |[39m       console[33m.[39merror([32m'Token verification error:'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 213 |[39m
     [90m 214 |[39m       [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 215 |[39m         [36mthrow[39m [36mnew[39m [33mError[39m([32m'Invalid token'[39m)[33m;[39m[0m

      at Function.error [as verifyToken] (services/auth.service.js:212:15)
      at verifyToken (middleware/auth.js:20:38)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/express/lib/router/index.js:646:15
      at next (node_modules/express/lib/router/index.js:265:14)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at serveStatic (node_modules/serve-static/index.js:75:16)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at cookieParser (node_modules/cookie-parser/index.js:57:14)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at urlencodedParser (node_modules/body-parser/lib/types/urlencoded.js:85:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/body-parser/lib/read.js:137:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

  console.error
    Authentication error: Invalid token

    [0m [90m 28 |[39m     next()[33m;[39m
     [90m 29 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 30 |[39m     console[33m.[39merror([32m'Authentication error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 31 |[39m
     [90m 32 |[39m     [36mconst[39m getStatusCode [33m=[39m () [33m=>[39m {
     [90m 33 |[39m       [36mif[39m (error[33m.[39mmessage [33m===[39m [32m'JWT_SECRET is not defined'[39m) {[0m

      at error (middleware/auth.js:30:13)

[0mPOST /project/addNewProject [33m401[0m 7.014 ms - 51[0m
  console.log
    Received token: Token present

      at log (middleware/auth.js:9:13)

  console.error
    Token verification error: JsonWebTokenError {
      name: 'JsonWebTokenError',
      message: 'jwt malformed'
    }

    [0m [90m 210 |[39m       }[33m;[39m
     [90m 211 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 212 |[39m       console[33m.[39merror([32m'Token verification error:'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 213 |[39m
     [90m 214 |[39m       [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 215 |[39m         [36mthrow[39m [36mnew[39m [33mError[39m([32m'Invalid token'[39m)[33m;[39m[0m

      at Function.error [as verifyToken] (services/auth.service.js:212:15)
      at verifyToken (middleware/auth.js:20:38)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/express/lib/router/index.js:646:15
      at next (node_modules/express/lib/router/index.js:265:14)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at serveStatic (node_modules/serve-static/index.js:75:16)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at cookieParser (node_modules/cookie-parser/index.js:57:14)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at urlencodedParser (node_modules/body-parser/lib/types/urlencoded.js:85:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/body-parser/lib/read.js:137:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

  console.error
    Authentication error: Invalid token

    [0m [90m 28 |[39m     next()[33m;[39m
     [90m 29 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 30 |[39m     console[33m.[39merror([32m'Authentication error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 31 |[39m
     [90m 32 |[39m     [36mconst[39m getStatusCode [33m=[39m () [33m=>[39m {
     [90m 33 |[39m       [36mif[39m (error[33m.[39mmessage [33m===[39m [32m'JWT_SECRET is not defined'[39m) {[0m

      at error (middleware/auth.js:30:13)

[0mPOST /project/deleteProjectByID [33m401[0m 7.169 ms - 51[0m
  console.log
    Received token: Token present

      at log (middleware/auth.js:9:13)

  console.error
    Token verification error: JsonWebTokenError {
      name: 'JsonWebTokenError',
      message: 'jwt malformed'
    }

    [0m [90m 210 |[39m       }[33m;[39m
     [90m 211 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 212 |[39m       console[33m.[39merror([32m'Token verification error:'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 213 |[39m
     [90m 214 |[39m       [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 215 |[39m         [36mthrow[39m [36mnew[39m [33mError[39m([32m'Invalid token'[39m)[33m;[39m[0m

      at Function.error [as verifyToken] (services/auth.service.js:212:15)
      at verifyToken (middleware/auth.js:20:38)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/express/lib/router/index.js:646:15
      at next (node_modules/express/lib/router/index.js:265:14)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at serveStatic (node_modules/serve-static/index.js:75:16)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at cookieParser (node_modules/cookie-parser/index.js:57:14)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at urlencodedParser (node_modules/body-parser/lib/types/urlencoded.js:85:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/body-parser/lib/read.js:137:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

  console.error
    Authentication error: Invalid token

    [0m [90m 28 |[39m     next()[33m;[39m
     [90m 29 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 30 |[39m     console[33m.[39merror([32m'Authentication error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 31 |[39m
     [90m 32 |[39m     [36mconst[39m getStatusCode [33m=[39m () [33m=>[39m {
     [90m 33 |[39m       [36mif[39m (error[33m.[39mmessage [33m===[39m [32m'JWT_SECRET is not defined'[39m) {[0m

      at error (middleware/auth.js:30:13)

[0mPOST /project/deleteProjectByID [33m401[0m 10.239 ms - 51[0m
  console.log
    Received token: Token present

      at log (middleware/auth.js:9:13)

  console.error
    Token verification error: JsonWebTokenError {
      name: 'JsonWebTokenError',
      message: 'jwt malformed'
    }

    [0m [90m 210 |[39m       }[33m;[39m
     [90m 211 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 212 |[39m       console[33m.[39merror([32m'Token verification error:'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 213 |[39m
     [90m 214 |[39m       [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 215 |[39m         [36mthrow[39m [36mnew[39m [33mError[39m([32m'Invalid token'[39m)[33m;[39m[0m

      at Function.error [as verifyToken] (services/auth.service.js:212:15)
      at verifyToken (middleware/auth.js:20:38)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/express/lib/router/index.js:646:15
      at next (node_modules/express/lib/router/index.js:265:14)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at serveStatic (node_modules/serve-static/index.js:75:16)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at cookieParser (node_modules/cookie-parser/index.js:57:14)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at urlencodedParser (node_modules/body-parser/lib/types/urlencoded.js:85:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/body-parser/lib/read.js:137:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

  console.error
    Authentication error: Invalid token

    [0m [90m 28 |[39m     next()[33m;[39m
     [90m 29 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 30 |[39m     console[33m.[39merror([32m'Authentication error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 31 |[39m
     [90m 32 |[39m     [36mconst[39m getStatusCode [33m=[39m () [33m=>[39m {
     [90m 33 |[39m       [36mif[39m (error[33m.[39mmessage [33m===[39m [32m'JWT_SECRET is not defined'[39m) {[0m

      at error (middleware/auth.js:30:13)

[0mPOST /project/updateProjectByID [33m401[0m 6.164 ms - 51[0m
[0mPOST /user/invite [33m404[0m 0.704 ms - 108[0m
[0mGET /user/stats/test-uid-123 [32m200[0m 1.194 ms - 33[0m
[0mGET /project/project-123 [33m404[0m 0.690 ms - 116[0m
  console.log
    Received token: Token present

      at log (middleware/auth.js:9:13)

  console.error
    Token verification error: JsonWebTokenError {
      name: 'JsonWebTokenError',
      message: 'jwt malformed'
    }

    [0m [90m 210 |[39m       }[33m;[39m
     [90m 211 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 212 |[39m       console[33m.[39merror([32m'Token verification error:'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 213 |[39m
     [90m 214 |[39m       [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 215 |[39m         [36mthrow[39m [36mnew[39m [33mError[39m([32m'Invalid token'[39m)[33m;[39m[0m

      at Function.error [as verifyToken] (services/auth.service.js:212:15)
      at verifyToken (middleware/auth.js:20:38)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/express/lib/router/index.js:646:15
      at next (node_modules/express/lib/router/index.js:265:14)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at serveStatic (node_modules/serve-static/index.js:75:16)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at cookieParser (node_modules/cookie-parser/index.js:57:14)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at urlencodedParser (node_modules/body-parser/lib/types/urlencoded.js:85:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/body-parser/lib/read.js:137:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

  console.error
    Authentication error: Invalid token

    [0m [90m 28 |[39m     next()[33m;[39m
     [90m 29 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 30 |[39m     console[33m.[39merror([32m'Authentication error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 31 |[39m
     [90m 32 |[39m     [36mconst[39m getStatusCode [33m=[39m () [33m=>[39m {
     [90m 33 |[39m       [36mif[39m (error[33m.[39mmessage [33m===[39m [32m'JWT_SECRET is not defined'[39m) {[0m

      at error (middleware/auth.js:30:13)

[0mPOST /project/addNewProject [33m401[0m 6.223 ms - 51[0m
[0mPUT /user/test-uid-123 [33m404[0m 0.559 ms - 114[0m
[0mPUT /user/test-uid-123 [33m404[0m 0.460 ms - 114[0m
[0mPUT /user/test-uid-123 [33m404[0m 0.437 ms - 114[0m
[0mPUT /user/test-uid-123 [33m404[0m 0.423 ms - 114[0m
[0mPUT /user/test-uid-123 [33m404[0m 0.409 ms - 114[0m
  console.log
    Received token: Token present

      at log (middleware/auth.js:9:13)

  console.error
    Token verification error: JsonWebTokenError {
      name: 'JsonWebTokenError',
      message: 'jwt malformed'
    }

    [0m [90m 210 |[39m       }[33m;[39m
     [90m 211 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 212 |[39m       console[33m.[39merror([32m'Token verification error:'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 213 |[39m
     [90m 214 |[39m       [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 215 |[39m         [36mthrow[39m [36mnew[39m [33mError[39m([32m'Invalid token'[39m)[33m;[39m[0m

      at Function.error [as verifyToken] (services/auth.service.js:212:15)
      at verifyToken (middleware/auth.js:20:38)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/express/lib/router/index.js:646:15
      at next (node_modules/express/lib/router/index.js:265:14)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at SendStream.error (node_modules/serve-static/index.js:121:7)
      at SendStream.error (node_modules/send/index.js:270:17)
      at SendStream.onStatError (node_modules/send/index.js:417:12)
      at next (node_modules/send/index.js:730:16)
      at onstat (node_modules/send/index.js:719:14)

  console.error
    Authentication error: Invalid token

    [0m [90m 28 |[39m     next()[33m;[39m
     [90m 29 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 30 |[39m     console[33m.[39merror([32m'Authentication error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 31 |[39m
     [90m 32 |[39m     [36mconst[39m getStatusCode [33m=[39m () [33m=>[39m {
     [90m 33 |[39m       [36mif[39m (error[33m.[39mmessage [33m===[39m [32m'JWT_SECRET is not defined'[39m) {[0m

      at error (middleware/auth.js:30:13)

[0mGET /project/getAllProject [33m401[0m 5.039 ms - 51[0m
[0mPOST /user/setPassword [33m404[0m 0.711 ms - 113[0m
[0mPOST /user/invite [33m404[0m 0.536 ms - 108[0m
  console.log
    Received token: Token present

      at log (middleware/auth.js:9:13)

  console.error
    Token verification error: JsonWebTokenError {
      name: 'JsonWebTokenError',
      message: 'jwt malformed'
    }

    [0m [90m 210 |[39m       }[33m;[39m
     [90m 211 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 212 |[39m       console[33m.[39merror([32m'Token verification error:'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 213 |[39m
     [90m 214 |[39m       [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 215 |[39m         [36mthrow[39m [36mnew[39m [33mError[39m([32m'Invalid token'[39m)[33m;[39m[0m

      at Function.error [as verifyToken] (services/auth.service.js:212:15)
      at verifyToken (middleware/auth.js:20:38)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/express/lib/router/index.js:646:15
      at next (node_modules/express/lib/router/index.js:265:14)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at serveStatic (node_modules/serve-static/index.js:75:16)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at cookieParser (node_modules/cookie-parser/index.js:57:14)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at urlencodedParser (node_modules/body-parser/lib/types/urlencoded.js:85:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/body-parser/lib/read.js:137:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

  console.error
    Authentication error: Invalid token

    [0m [90m 28 |[39m     next()[33m;[39m
     [90m 29 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 30 |[39m     console[33m.[39merror([32m'Authentication error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 31 |[39m
     [90m 32 |[39m     [36mconst[39m getStatusCode [33m=[39m () [33m=>[39m {
     [90m 33 |[39m       [36mif[39m (error[33m.[39mmessage [33m===[39m [32m'JWT_SECRET is not defined'[39m) {[0m

      at error (middleware/auth.js:30:13)

[0mPOST /project/deleteProjectByID [33m401[0m 6.575 ms - 51[0m
[0mGET /user?page=1&limit=10 [33m404[0m 0.874 ms - 117[0m
  console.log
    Received token: Token present

      at log (middleware/auth.js:9:13)

  console.error
    Token verification error: JsonWebTokenError {
      name: 'JsonWebTokenError',
      message: 'jwt malformed'
    }

    [0m [90m 210 |[39m       }[33m;[39m
     [90m 211 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 212 |[39m       console[33m.[39merror([32m'Token verification error:'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 213 |[39m
     [90m 214 |[39m       [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 215 |[39m         [36mthrow[39m [36mnew[39m [33mError[39m([32m'Invalid token'[39m)[33m;[39m[0m

      at Function.error [as verifyToken] (services/auth.service.js:212:15)
      at verifyToken (middleware/auth.js:20:38)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/express/lib/router/index.js:646:15
      at next (node_modules/express/lib/router/index.js:265:14)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at SendStream.error (node_modules/serve-static/index.js:121:7)
      at SendStream.error (node_modules/send/index.js:270:17)
      at SendStream.onStatError (node_modules/send/index.js:417:12)
      at next (node_modules/send/index.js:730:16)
      at onstat (node_modules/send/index.js:719:14)

  console.error
    Authentication error: Invalid token

    [0m [90m 28 |[39m     next()[33m;[39m
     [90m 29 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 30 |[39m     console[33m.[39merror([32m'Authentication error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 31 |[39m
     [90m 32 |[39m     [36mconst[39m getStatusCode [33m=[39m () [33m=>[39m {
     [90m 33 |[39m       [36mif[39m (error[33m.[39mmessage [33m===[39m [32m'JWT_SECRET is not defined'[39m) {[0m

      at error (middleware/auth.js:30:13)

[0mGET /project/getAllProject?search=Test [33m401[0m 4.969 ms - 51[0m
FAIL test/integration/user-project.integration.test.js
  Integration Tests - User and Project Flow
    ÔêÜ should handle user invitation flow (6 ms)
    ÔêÜ should get user ticket stats (5 ms)
    ├ù should handle project with multiple users (4 ms)
    ├ù should validate project key format (11 ms)
    ÔêÜ should handle concurrent user updates (13 ms)
    ├ù should filter projects by user role (10 ms)
    ÔêÜ should handle user password change (5 ms)
    ├ù should validate email format on invite (4 ms)
    ├ù should handle project deletion cascade (10 ms)
    ├ù should paginate user list (6 ms)
    ├ù should search projects by name (9 ms)
    GET /user - Integration
      ├ù should get all users (13 ms)
    GET /user/:uid - Integration
      ├ù should get user by UID (5 ms)
      ÔêÜ should return 404 for non-existent user (5 ms)
    GET /user/account/:accountId - Integration
      ├ù should get user by accountId (4 ms)
    PUT /user/:uid - Integration
      ├ù should update user successfully (11 ms)
    GET /project/getAllProject - Integration
      ├ù should get all projects (9 ms)
    POST /project/addNewProject - Integration
      ├ù should create new project (11 ms)
      ├ù should validate required project fields (15 ms)
    POST /project/deleteProjectByID - Integration
      ├ù should delete project successfully (11 ms)
      ├ù should return 404 for non-existent project (15 ms)
    POST /project/updateProjectByID - Integration
      ├ù should update project successfully (10 ms)

  ÔùÅ Integration Tests - User and Project Flow ÔÇ║ GET /user - Integration ÔÇ║ should get all users

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 404

      32 |         .set('Authorization', 'Bearer token');
      33 |
    > 34 |       expect(response.status).toBe(200);
         |                               ^
      35 |       expect(response.body.users).toBeDefined();
      36 |     });
      37 |   });

      at Object.toBe (test/integration/user-project.integration.test.js:34:31)

  ÔùÅ Integration Tests - User and Project Flow ÔÇ║ GET /user/:uid - Integration ÔÇ║ should get user by UID

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 404

      47 |         .set('Authorization', 'Bearer token');
      48 |
    > 49 |       expect(response.status).toBe(200);
         |                               ^
      50 |       expect(response.body.uid).toBe('test-uid-123');
      51 |     });
      52 |

      at Object.toBe (test/integration/user-project.integration.test.js:49:31)

  ÔùÅ Integration Tests - User and Project Flow ÔÇ║ GET /user/account/:accountId - Integration ÔÇ║ should get user by accountId

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 404

      71 |         .get('/user/account/jira-123');
      72 |
    > 73 |       expect(response.status).toBe(200);
         |                               ^
      74 |     });
      75 |   });
      76 |

      at Object.toBe (test/integration/user-project.integration.test.js:73:31)

  ÔùÅ Integration Tests - User and Project Flow ÔÇ║ PUT /user/:uid - Integration ÔÇ║ should update user successfully

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 404

      89 |         .send({ firstName: 'Updated' });
      90 |
    > 91 |       expect(response.status).toBe(200);
         |                               ^
      92 |     });
      93 |   });
      94 |

      at Object.toBe (test/integration/user-project.integration.test.js:91:31)

  ÔùÅ Integration Tests - User and Project Flow ÔÇ║ GET /project/getAllProject - Integration ÔÇ║ should get all projects

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

      101 |         .set('Authorization', 'Bearer token');
      102 |
    > 103 |       expect(response.status).toBe(200);
          |                               ^
      104 |     });
      105 |   });
      106 |

      at Object.toBe (test/integration/user-project.integration.test.js:103:31)

  ÔùÅ Integration Tests - User and Project Flow ÔÇ║ POST /project/addNewProject - Integration ÔÇ║ should create new project

    expect(received).toBe(expected) // Object.is equality

    Expected: 201
    Received: 401

      118 |         });
      119 |
    > 120 |       expect(response.status).toBe(201);
          |                               ^
      121 |     });
      122 |
      123 |     it('should validate required project fields', async () => {

      at Object.toBe (test/integration/user-project.integration.test.js:120:31)

  ÔùÅ Integration Tests - User and Project Flow ÔÇ║ POST /project/addNewProject - Integration ÔÇ║ should validate required project fields

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 401

      127 |         .send({ projectKey: 'PROJ' });
      128 |
    > 129 |       expect(response.status).toBe(400);
          |                               ^
      130 |     });
      131 |   });
      132 |

      at Object.toBe (test/integration/user-project.integration.test.js:129:31)

  ÔùÅ Integration Tests - User and Project Flow ÔÇ║ POST /project/deleteProjectByID - Integration ÔÇ║ should delete project successfully

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

      140 |         .send({ projectId: 'project-123' });
      141 |
    > 142 |       expect(response.status).toBe(200);
          |                               ^
      143 |     });
      144 |
      145 |     it('should return 404 for non-existent project', async () => {

      at Object.toBe (test/integration/user-project.integration.test.js:142:31)

  ÔùÅ Integration Tests - User and Project Flow ÔÇ║ POST /project/deleteProjectByID - Integration ÔÇ║ should return 404 for non-existent project

    expect(received).toBe(expected) // Object.is equality

    Expected: 404
    Received: 401

      151 |         .send({ projectId: 'invalid' });
      152 |
    > 153 |       expect(response.status).toBe(404);
          |                               ^
      154 |     });
      155 |   });
      156 |

      at Object.toBe (test/integration/user-project.integration.test.js:153:31)

  ÔùÅ Integration Tests - User and Project Flow ÔÇ║ POST /project/updateProjectByID - Integration ÔÇ║ should update project successfully

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

      167 |         });
      168 |
    > 169 |       expect(response.status).toBe(200);
          |                               ^
      170 |     });
      171 |   });
      172 |

      at Object.toBe (test/integration/user-project.integration.test.js:169:31)

  ÔùÅ Integration Tests - User and Project Flow ÔÇ║ should handle project with multiple users

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 404

      219 |       .set('Authorization', 'Bearer token');
      220 |
    > 221 |     expect(response.status).toBe(200);
          |                             ^
      222 |   });
      223 |
      224 |   it('should validate project key format', async () => {

      at Object.toBe (test/integration/user-project.integration.test.js:221:29)

  ÔùÅ Integration Tests - User and Project Flow ÔÇ║ should validate project key format

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 401

      232 |       });
      233 |
    > 234 |     expect(response.status).toBe(400);
          |                             ^
      235 |   });
      236 |
      237 |   it('should handle concurrent user updates', async () => {

      at Object.toBe (test/integration/user-project.integration.test.js:234:29)

  ÔùÅ Integration Tests - User and Project Flow ÔÇ║ should filter projects by user role

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

      266 |       .set('Authorization', 'Bearer token');
      267 |
    > 268 |     expect(response.status).toBe(200);
          |                             ^
      269 |     expect(response.body).toBeDefined();
      270 |   });
      271 |

      at Object.toBe (test/integration/user-project.integration.test.js:268:29)

  ÔùÅ Integration Tests - User and Project Flow ÔÇ║ should validate email format on invite

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 404

      288 |       });
      289 |
    > 290 |     expect(response.status).toBe(400);
          |                             ^
      291 |   });
      292 |
      293 |   it('should handle project deletion cascade', async () => {

      at Object.toBe (test/integration/user-project.integration.test.js:290:29)

  ÔùÅ Integration Tests - User and Project Flow ÔÇ║ should handle project deletion cascade

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

      299 |       .send({ projectId: 'project-123' });
      300 |
    > 301 |     expect(response.status).toBe(200);
          |                             ^
      302 |   });
      303 |
      304 |   it('should paginate user list', async () => {

      at Object.toBe (test/integration/user-project.integration.test.js:301:29)

  ÔùÅ Integration Tests - User and Project Flow ÔÇ║ should paginate user list

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 404

      315 |       .query({ page: 1, limit: 10 });
      316 |
    > 317 |     expect(response.status).toBe(200);
          |                             ^
      318 |   });
      319 |
      320 |   it('should search projects by name', async () => {

      at Object.toBe (test/integration/user-project.integration.test.js:317:29)

  ÔùÅ Integration Tests - User and Project Flow ÔÇ║ should search projects by name

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

      326 |       .query({ search: 'Test' });
      327 |
    > 328 |     expect(response.status).toBe(200);
          |                             ^
      329 |   });
      330 | });
      331 |

      at Object.toBe (test/integration/user-project.integration.test.js:328:29)

[0mPOST /ticket/sync [33m404[0m 4.516 ms - 108[0m
[0mPOST /jira_client/search [33m404[0m 0.642 ms - 115[0m
[0mPOST /jira_client/search [33m404[0m 0.596 ms - 115[0m
[0mGET /ticket/ticket-123 [33m404[0m 1.000 ms - 114[0m
[0mGET /ticket/invalid [33m404[0m 0.872 ms - 111[0m
[0mPUT /ticket/ticket-123 [33m404[0m 0.566 ms - 114[0m
[0mPOST /ticket/transition [33m404[0m 0.601 ms - 114[0m
[0mPOST /ticket/transition [33m404[0m 0.496 ms - 114[0m
[0mGET /ticket/transitions/PROJ-123 [33m404[0m 0.781 ms - 124[0m
[0mPOST /jira_client/search [33m404[0m 0.538 ms - 115[0m
[0mPUT /ticket/ticket-123 [33m404[0m 0.580 ms - 114[0m
[0mPOST /jira_client/search [33m404[0m 0.512 ms - 115[0m
[0mPOST /ticket/bulk-sync [33m404[0m 0.593 ms - 113[0m
[0mGET /ticket?status=Done [33m404[0m 0.694 ms - 115[0m
[0mGET /ticket?assignee=jira-123 [33m404[0m 0.900 ms - 121[0m
[0mPUT /ticket/ticket-123 [33m404[0m 0.636 ms - 114[0m
[0mPOST /ticket/ticket-123/comment [33m404[0m 0.670 ms - 122[0m
[0mGET /ticket/ticket-123/history [33m404[0m 0.726 ms - 122[0m
[0mPOST /ticket/ticket-123/attach [33m404[0m 0.512 ms - 121[0m
[0mPOST /ticket/sync [33m404[0m 0.505 ms - 108[0m
[0mPOST /jira_client/search [33m404[0m 0.488 ms - 115[0m
[0mGET /ticket/ticket-123/watchers [33m404[0m 0.835 ms - 123[0m
[0mPOST /ticket/ticket-123/link [33m404[0m 0.514 ms - 119[0m
[0mGET /ticket/ticket-123/sprints [33m404[0m 0.709 ms - 122[0m
[0mPOST /ticket [33m404[0m 0.522 ms - 103[0m
[0mDELETE /ticket/ticket-123 [33m404[0m 0.518 ms - 114[0m
[0mPUT /ticket/ticket-123 [33m404[0m 0.545 ms - 114[0m
[0mPUT /ticket/ticket-123 [33m404[0m 0.426 ms - 114[0m
[0mPUT /ticket/ticket-123 [33m404[0m 0.382 ms - 114[0m
[0mPUT /ticket/ticket-123 [33m404[0m 0.361 ms - 114[0m
[0mPUT /ticket/ticket-123 [33m404[0m 0.349 ms - 114[0m
FAIL test/integration/ticket-jira.integration.test.js
  Integration Tests - Ticket and Jira Flow
    ├ù should handle Jira connection errors gracefully (4 ms)
    ÔêÜ should handle ticket assignment (4 ms)
    ├ù should validate Jira config before operations (3 ms)
    ÔêÜ should handle bulk ticket sync (4 ms)
    ÔêÜ should filter tickets by status (3 ms)
    ÔêÜ should filter tickets by assignee (4 ms)
    ÔêÜ should handle ticket priority updates (5 ms)
    ÔêÜ should handle ticket comments (4 ms)
    ÔêÜ should get ticket history (4 ms)
    ÔêÜ should handle ticket attachments (6 ms)
    ├ù should validate ticket data on sync (3 ms)
    ├ù should handle Jira API rate limiting (4 ms)
    ÔêÜ should handle ticket watchers (4 ms)
    ÔêÜ should handle ticket links (5 ms)
    ÔêÜ should handle ticket sprints (4 ms)
    ÔêÜ should validate issue type on creation (4 ms)
    ÔêÜ should handle ticket deletion (4 ms)
    ÔêÜ should handle concurrent ticket updates (11 ms)
    POST /ticket/sync - Integration
      ÔêÜ should sync ticket with Firebase (10 ms)
    POST /jira_client/search - Integration
      ÔêÜ should search issues using JQL (4 ms)
      ÔêÜ should handle invalid JQL query (4 ms)
    GET /ticket/:ticketId - Integration
      ├ù should get ticket details (5 ms)
      ÔêÜ should return 404 for non-existent ticket (4 ms)
    PUT /ticket/:ticketId - Integration
      ÔêÜ should update ticket (4 ms)
    POST /ticket/transition - Integration
      ÔêÜ should transition ticket status (7 ms)
      ÔêÜ should validate transition ID (4 ms)
    GET /ticket/transitions/:issueId - Integration
      ÔêÜ should get available transitions (4 ms)

  ÔùÅ Integration Tests - Ticket and Jira Flow ÔÇ║ GET /ticket/:ticketId - Integration ÔÇ║ should get ticket details

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 404

      70 |         .set('Authorization', 'Bearer token');
      71 |
    > 72 |       expect(response.status).toBe(200);
         |                               ^
      73 |     });
      74 |
      75 |     it('should return 404 for non-existent ticket', async () => {

      at Object.toBe (test/integration/ticket-jira.integration.test.js:72:31)

  ÔùÅ Integration Tests - Ticket and Jira Flow ÔÇ║ should handle Jira connection errors gracefully

    expect(received).toBe(expected) // Object.is equality

    Expected: 500
    Received: 404

      160 |       .send({ projectName: 'PROJ', config: mockJiraConfig });
      161 |
    > 162 |     expect(response.status).toBe(500);
          |                             ^
      163 |   });
      164 |
      165 |   it('should handle ticket assignment', async () => {

      at Object.toBe (test/integration/ticket-jira.integration.test.js:162:29)

  ÔùÅ Integration Tests - Ticket and Jira Flow ÔÇ║ should validate Jira config before operations

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 404

      183 |       .send({ projectName: 'PROJ', config: {} });
      184 |
    > 185 |     expect(response.status).toBe(400);
          |                             ^
      186 |   });
      187 |
      188 |   it('should handle bulk ticket sync', async () => {

      at Object.toBe (test/integration/ticket-jira.integration.test.js:185:29)

  ÔùÅ Integration Tests - Ticket and Jira Flow ÔÇ║ should validate ticket data on sync

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 404

      276 |       .send({ ticket: {}, configId: 'config-123' });
      277 |
    > 278 |     expect(response.status).toBe(400);
          |                             ^
      279 |   });
      280 |
      281 |   it('should handle Jira API rate limiting', async () => {

      at Object.toBe (test/integration/ticket-jira.integration.test.js:278:29)

  ÔùÅ Integration Tests - Ticket and Jira Flow ÔÇ║ should handle Jira API rate limiting

    expect(received).toBe(expected) // Object.is equality

    Expected: 429
    Received: 404

      288 |       .send({ projectName: 'PROJ', config: mockJiraConfig });
      289 |
    > 290 |     expect(response.status).toBe(429);
          |                             ^
      291 |   });
      292 |
      293 |   it('should handle ticket watchers', async () => {

      at Object.toBe (test/integration/ticket-jira.integration.test.js:290:29)

  console.log
    Received token: Token present

      at log (middleware/auth.js:9:13)

  console.error
    Error finding user by UID: TypeError: Cannot read properties of undefined (reading 'exists')
        at Function.exists [as findByUid] (C:\Project\PFE\pfe-back\models\user.model.js:83:19)
        at Function.verifyToken (C:\Project\PFE\pfe-back\services\auth.service.js:200:20)
        at authMiddleware (C:\Project\PFE\pfe-back\middleware\auth.js:20:20)
        at Object.<anonymous> (C:\Project\PFE\pfe-back\test\unit\utils-middleware.unit.test.js:132:7)

    [0m [90m 86 |[39m       [36mreturn[39m [36mnull[39m[33m;[39m
     [90m 87 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 88 |[39m       console[33m.[39merror([32m'Error finding user by UID:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 89 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve user from database'[39m)[33m;[39m
     [90m 90 |[39m     }
     [90m 91 |[39m   }[0m

      at Function.error [as findByUid] (models/user.model.js:88:15)
      at Function.verifyToken (services/auth.service.js:200:20)
      at authMiddleware (middleware/auth.js:20:20)
      at Object.<anonymous> (test/unit/utils-middleware.unit.test.js:132:7)

  console.error
    Token verification error: Error: Failed to retrieve user from database
        at Function.findByUid (C:\Project\PFE\pfe-back\models\user.model.js:89:13)
        at Function.verifyToken (C:\Project\PFE\pfe-back\services\auth.service.js:200:20)
        at authMiddleware (C:\Project\PFE\pfe-back\middleware\auth.js:20:20)
        at Object.<anonymous> (C:\Project\PFE\pfe-back\test\unit\utils-middleware.unit.test.js:132:7)

    [0m [90m 210 |[39m       }[33m;[39m
     [90m 211 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 212 |[39m       console[33m.[39merror([32m'Token verification error:'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 213 |[39m
     [90m 214 |[39m       [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 215 |[39m         [36mthrow[39m [36mnew[39m [33mError[39m([32m'Invalid token'[39m)[33m;[39m[0m

      at Function.error [as verifyToken] (services/auth.service.js:212:15)
      at authMiddleware (middleware/auth.js:20:20)
      at Object.<anonymous> (test/unit/utils-middleware.unit.test.js:132:7)

  console.error
    Authentication error: Token verification failed

    [0m [90m 28 |[39m     next()[33m;[39m
     [90m 29 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 30 |[39m     console[33m.[39merror([32m'Authentication error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 31 |[39m
     [90m 32 |[39m     [36mconst[39m getStatusCode [33m=[39m () [33m=>[39m {
     [90m 33 |[39m       [36mif[39m (error[33m.[39mmessage [33m===[39m [32m'JWT_SECRET is not defined'[39m) {[0m

      at error (middleware/auth.js:30:13)
      at Object.<anonymous> (test/unit/utils-middleware.unit.test.js:132:7)

  console.log
    Received token: No token

      at log (middleware/auth.js:9:13)

  console.log
    Authentication failed: No token provided

      at log (middleware/auth.js:12:15)

  console.log
    Received token: Token present

      at log (middleware/auth.js:9:13)

  console.error
    Token verification error: Error: Invalid token
        at Object.<anonymous> (C:\Project\PFE\pfe-back\test\unit\utils-middleware.unit.test.js:148:15)
        at C:\Project\PFE\pfe-back\node_modules\jest-mock\build\index.js:397:39
        at Object.<anonymous> (C:\Project\PFE\pfe-back\node_modules\jest-mock\build\index.js:404:13)
        at Object.mockConstructor [as verify] (C:\Project\PFE\pfe-back\node_modules\jest-mock\build\index.js:148:19)
        at Function.verify [as verifyToken] (C:\Project\PFE\pfe-back\services\auth.service.js:199:27)
        at verifyToken (C:\Project\PFE\pfe-back\middleware\auth.js:20:38)
        at Object.authMiddleware (C:\Project\PFE\pfe-back\test\unit\utils-middleware.unit.test.js:153:13)
        at Promise.then.completed (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:316:40)
        at _runTest (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Project\PFE\pfe-back\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Project\PFE\pfe-back\node_modules\jest-runner\build\runTest.js:444:34)

    [0m [90m 210 |[39m       }[33m;[39m
     [90m 211 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 212 |[39m       console[33m.[39merror([32m'Token verification error:'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 213 |[39m
     [90m 214 |[39m       [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 215 |[39m         [36mthrow[39m [36mnew[39m [33mError[39m([32m'Invalid token'[39m)[33m;[39m[0m

      at Function.error [as verifyToken] (services/auth.service.js:212:15)
      at verifyToken (middleware/auth.js:20:38)
      at Object.authMiddleware (test/unit/utils-middleware.unit.test.js:153:13)

  console.error
    Authentication error: Token verification failed

    [0m [90m 28 |[39m     next()[33m;[39m
     [90m 29 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 30 |[39m     console[33m.[39merror([32m'Authentication error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 31 |[39m
     [90m 32 |[39m     [36mconst[39m getStatusCode [33m=[39m () [33m=>[39m {
     [90m 33 |[39m       [36mif[39m (error[33m.[39mmessage [33m===[39m [32m'JWT_SECRET is not defined'[39m) {[0m

      at error (middleware/auth.js:30:13)
      at Object.<anonymous> (test/unit/utils-middleware.unit.test.js:153:7)

  console.log
    Received token: Token present

      at log (middleware/auth.js:9:13)

  console.error
    Token verification error: Error [TokenExpiredError]: Token expired
        at Object.<anonymous> (C:\Project\PFE\pfe-back\test\unit\utils-middleware.unit.test.js:161:23)
        at C:\Project\PFE\pfe-back\node_modules\jest-mock\build\index.js:397:39
        at Object.<anonymous> (C:\Project\PFE\pfe-back\node_modules\jest-mock\build\index.js:404:13)
        at Object.mockConstructor [as verify] (C:\Project\PFE\pfe-back\node_modules\jest-mock\build\index.js:148:19)
        at Function.verify [as verifyToken] (C:\Project\PFE\pfe-back\services\auth.service.js:199:27)
        at verifyToken (C:\Project\PFE\pfe-back\middleware\auth.js:20:38)
        at Object.authMiddleware (C:\Project\PFE\pfe-back\test\unit\utils-middleware.unit.test.js:168:13)
        at Promise.then.completed (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:316:40)
        at _runTest (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Project\PFE\pfe-back\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Project\PFE\pfe-back\node_modules\jest-runner\build\runTest.js:444:34)

    [0m [90m 210 |[39m       }[33m;[39m
     [90m 211 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 212 |[39m       console[33m.[39merror([32m'Token verification error:'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 213 |[39m
     [90m 214 |[39m       [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 215 |[39m         [36mthrow[39m [36mnew[39m [33mError[39m([32m'Invalid token'[39m)[33m;[39m[0m

      at Function.error [as verifyToken] (services/auth.service.js:212:15)
      at verifyToken (middleware/auth.js:20:38)
      at Object.authMiddleware (test/unit/utils-middleware.unit.test.js:168:13)

  console.error
    Authentication error: Token expired

    [0m [90m 28 |[39m     next()[33m;[39m
     [90m 29 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 30 |[39m     console[33m.[39merror([32m'Authentication error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 31 |[39m
     [90m 32 |[39m     [36mconst[39m getStatusCode [33m=[39m () [33m=>[39m {
     [90m 33 |[39m       [36mif[39m (error[33m.[39mmessage [33m===[39m [32m'JWT_SECRET is not defined'[39m) {[0m

      at error (middleware/auth.js:30:13)
      at Object.<anonymous> (test/unit/utils-middleware.unit.test.js:168:7)

  console.log
    Received token: No token

      at log (middleware/auth.js:9:13)

  console.log
    Authentication failed: No token provided

      at log (middleware/auth.js:12:15)

FAIL test/unit/utils-middleware.unit.test.js
  Utils and Middleware - Unit Tests
    email.util
      ├ù should send weekly leaderboard email successfully (19 ms)
      ├ù should send invitation email successfully
      ├ù should handle email sending error gracefully (1 ms)
      ├ù should format email content correctly (1 ms)
      ÔêÜ should validate email address
    score.deadline.util
      ÔêÜ should check if resolution is done (1 ms)
      ÔêÜ should get deadline dates from ticket
      ÔêÜ should compute deadline rule score for early completion
      ÔêÜ should compute deadline rule score for late completion (1 ms)
      ÔêÜ should handle missing deadline gracefully
    auth middleware
      ├ù should authenticate valid token (19 ms)
      ÔêÜ should reject missing token (2 ms)
      ÔêÜ should reject invalid token (4 ms)
      ÔêÜ should reject expired token (4 ms)
      ÔêÜ should handle malformed authorization header (2 ms)
    jiraClient middleware
      ÔêÜ should create Jira client with valid config (1 ms)
      ├ù should throw error for missing config
      ├ù should throw error for invalid host
      ├ù should throw error for missing credentials (1 ms)
      ÔêÜ should use default protocol and apiVersion

  ÔùÅ Utils and Middleware - Unit Tests ÔÇ║ email.util ÔÇ║ should send weekly leaderboard email successfully

    expect(received).toBeDefined()

    Received: undefined

      29 |
      30 |       const result = await sendWeeklyLeaderboardEmail(emailData);
    > 31 |       expect(result).toBeDefined();
         |                      ^
      32 |     });
      33 |
      34 |     it('should send invitation email successfully', async () => {

      at Object.toBeDefined (test/unit/utils-middleware.unit.test.js:31:22)

  ÔùÅ Utils and Middleware - Unit Tests ÔÇ║ email.util ÔÇ║ should send invitation email successfully

    expect(received).toBeDefined()

    Received: undefined

      34 |     it('should send invitation email successfully', async () => {
      35 |       const result = await sendInvitationEmail('test@example.com', 'password123');
    > 36 |       expect(result).toBeDefined();
         |                      ^
      37 |     });
      38 |
      39 |     it('should handle email sending error gracefully', async () => {

      at Object.toBeDefined (test/unit/utils-middleware.unit.test.js:36:22)

  ÔùÅ Utils and Middleware - Unit Tests ÔÇ║ email.util ÔÇ║ should handle email sending error gracefully

    TypeError: Cannot read properties of undefined (reading 'sendMail')

      39 |     it('should handle email sending error gracefully', async () => {
      40 |       const nodemailer = require('nodemailer');
    > 41 |       nodemailer.createTransport().sendMail.mockRejectedValue(new Error('SMTP error'));
         |                                   ^
      42 |
      43 |       await expect(sendInvitationEmail('invalid@example.com', 'pass'))
      44 |         .rejects.toThrow();

      at Object.<anonymous> (test/unit/utils-middleware.unit.test.js:41:35)

  ÔùÅ Utils and Middleware - Unit Tests ÔÇ║ email.util ÔÇ║ should format email content correctly

    expect(received).toBeDefined()

    Received: undefined

      55 |
      56 |       const result = await sendWeeklyLeaderboardEmail(emailData);
    > 57 |       expect(result).toBeDefined();
         |                      ^
      58 |     });
      59 |
      60 |     it('should validate email address', () => {

      at Object.toBeDefined (test/unit/utils-middleware.unit.test.js:57:22)

  ÔùÅ Utils and Middleware - Unit Tests ÔÇ║ auth middleware ÔÇ║ should authenticate valid token

    expect(received).toBeDefined()

    Received: undefined

      132 |       await authMiddleware(req, res, next);
      133 |       
    > 134 |       expect(req.user).toBeDefined();
          |                        ^
      135 |       expect(next).toHaveBeenCalled();
      136 |     });
      137 |

      at Object.toBeDefined (test/unit/utils-middleware.unit.test.js:134:24)

  ÔùÅ Utils and Middleware - Unit Tests ÔÇ║ jiraClient middleware ÔÇ║ should throw error for missing config

    TypeError: Cannot read properties of null (reading 'protocol')

      3 | const createJiraClient = (config) => {
      4 |   return new JiraApi({
    > 5 |     protocol: config.protocol ?? 'https',
        |                      ^
      6 |     host: config.host,
      7 |     username: config.username,
      8 |     password: config.password,

      at protocol (middleware/jiraClient.js:5:22)
      at Object.createJiraClient (test/unit/utils-middleware.unit.test.js:197:20)

  ÔùÅ Utils and Middleware - Unit Tests ÔÇ║ jiraClient middleware ÔÇ║ should throw error for invalid host

    expect(received).rejects.toThrow()

    Matcher error: received value must be a promise or a function returning a promise

    Received has type:  object
    Received has value: {"config": {"apiVersion": "2", "host": "", "password": "api-token", "protocol": "https", "strictSSL": true, "username": "test@example.com"}}

      205 |       };
      206 |
    > 207 |       await expect(createJiraClient(config)).rejects.toThrow();
          |                                                      ^
      208 |     });
      209 |
      210 |     it('should throw error for missing credentials', async () => {

      at Object.toThrow (node_modules/expect/build/index.js:204:13)
      at Object.toThrow (test/unit/utils-middleware.unit.test.js:207:54)

  ÔùÅ Utils and Middleware - Unit Tests ÔÇ║ jiraClient middleware ÔÇ║ should throw error for missing credentials

    expect(received).rejects.toThrow()

    Matcher error: received value must be a promise or a function returning a promise

    Received has type:  object
    Received has value: {"config": {"apiVersion": "2", "host": "test.atlassian.net", "password": "", "protocol": "https", "strictSSL": true, "username": ""}}

      215 |       };
      216 |
    > 217 |       await expect(createJiraClient(config)).rejects.toThrow();
          |                                                      ^
      218 |     });
      219 |
      220 |     it('should use default protocol and apiVersion', async () => {

      at Object.toThrow (node_modules/expect/build/index.js:204:13)
      at Object.toThrow (test/unit/utils-middleware.unit.test.js:217:54)

FAIL test/unit/score.service.unit.test.js
  ScoreService - Unit Tests
    calculateTicketScore
      ÔêÜ should calculate and save ticket score successfully (2 ms)
      ÔêÜ should throw error when ticketId is missing (10 ms)
      ÔêÜ should throw error when rule not found
      ÔêÜ should throw error when ticket not found (1 ms)
      ÔêÜ should throw error when ticket is not completed
    calculateMultipleTicketScores
      ÔêÜ should calculate scores for multiple tickets
      ÔêÜ should throw error when ticketIds is not an array
      ├ù should handle errors for individual tickets (1 ms)
    calculatePriorityScore
      ÔêÜ should calculate priority score correctly
      ÔêÜ should return 0 when priority not found in rule
      ÔêÜ should return 0 when priority is not checked (1 ms)
    calculateTicketTypeScore
      ÔêÜ should calculate ticket type score correctly
      ÔêÜ should return 0 when type not found in rule
    getAllTicketScores
      ÔêÜ should retrieve all ticket scores
    getScoresByTicketId
      ÔêÜ should retrieve scores by ticket ID (1 ms)
      ÔêÜ should throw error when ticketId is missing
    getEmployeeGlobalScore
      ÔêÜ should retrieve employee global score (1 ms)
      ÔêÜ should throw error when userId is missing

  ÔùÅ ScoreService - Unit Tests ÔÇ║ calculateMultipleTicketScores ÔÇ║ should handle errors for individual tickets

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

       98 |
       99 |       expect(results).toHaveLength(2);
    > 100 |       expect(results[0].success).toBe(true);
          |                                  ^
      101 |       expect(results[1].success).toBe(false);
      102 |     });
      103 |   });

      at Object.toBe (test/unit/score.service.unit.test.js:100:34)

FAIL test/unit/models.unit.test.js
  Models - Unit Tests
    user.model
      ÔêÜ should create user successfully
      ÔêÜ should find user by UID
      ÔêÜ should find user by jiraId
      ÔêÜ should convert user to public format
    ticket.model
      ÔêÜ should get ticket by ID
      ÔêÜ should add new ticket (1 ms)
      ÔêÜ should update or sync ticket
      ÔêÜ should find ticket by key and config ID
    score.model
      ÔêÜ should get score by ID (1 ms)
      ÔêÜ should add score
      ÔêÜ should get all scores (1 ms)
    ticketScore.model
      ÔêÜ should upsert ticket score
      ÔêÜ should get ticket scores by ticket ID
      ÔêÜ should get ticket scores by owner ID
    rules.model
      ├ù should find rule by ID (1 ms)
      ÔêÜ should create rule (1 ms)
      ÔêÜ should get all rules
    project.model
      ÔêÜ should create project (1 ms)
      ÔêÜ should find project by ID
      ÔêÜ should get all projects

  ÔùÅ Models - Unit Tests ÔÇ║ rules.model ÔÇ║ should find rule by ID

    TypeError: findById.mockResolvedValue is not a function

      121 |     it('should find rule by ID', async () => {
      122 |       const { findById } = require('../../models/rules.model');
    > 123 |       findById.mockResolvedValue({ id: 'rule-123', name: 'Test Rule' });
          |                ^
      124 |       const rule = await findById('rule-123');
      125 |       expect(rule.id).toBe('rule-123');
      126 |     });

      at Object.mockResolvedValue (test/unit/models.unit.test.js:123:16)

FAIL test/unit/project.service.unit.test.js
  project.service - Unit Tests
    createProject
      ├ù should create project successfully (1 ms)
    getProjectById
      ├ù should retrieve project by ID (1 ms)
    getAllProjects
      ÔêÜ should retrieve all projects
    deleteProject
      ├ù should delete project successfully (1 ms)

  ÔùÅ project.service - Unit Tests ÔÇ║ createProject ÔÇ║ should create project successfully

    expect(received).toEqual(expected) // deep equality

    Expected: {"createdAt": 2024-01-01T00:00:00.000Z, "createdBy": "test-uid-123", "id": "project-123", "jiraConfigId": "config-123", "projectKey": "PROJ", "projectName": "Test Project"}
    Received: undefined

      27 |       const result = await projectService.createProject(projectData);
      28 |
    > 29 |       expect(result).toEqual(mockProject);
         |                      ^
      30 |       expect(Project.create).toHaveBeenCalledWith(projectData);
      31 |     });
      32 |   });

      at Object.toEqual (test/unit/project.service.unit.test.js:29:22)

  ÔùÅ project.service - Unit Tests ÔÇ║ getProjectById ÔÇ║ should retrieve project by ID

    TypeError: projectService.getProjectById is not a function

      36 |       Project.findById = jest.fn().mockResolvedValue(mockProject);
      37 |
    > 38 |       const result = await projectService.getProjectById('project-123');
         |                                           ^
      39 |
      40 |       expect(result).toEqual(mockProject);
      41 |       expect(Project.findById).toHaveBeenCalledWith('project-123');

      at Object.getProjectById (test/unit/project.service.unit.test.js:38:43)

  ÔùÅ project.service - Unit Tests ÔÇ║ deleteProject ÔÇ║ should delete project successfully

    TypeError: projectService.deleteProject is not a function

      59 |       Project.delete = jest.fn().mockResolvedValue({ success: true });
      60 |
    > 61 |       const result = await projectService.deleteProject('project-123');
         |                                           ^
      62 |
      63 |       expect(result.success).toBe(true);
      64 |       expect(Project.delete).toHaveBeenCalledWith('project-123');

      at Object.deleteProject (test/unit/project.service.unit.test.js:61:43)

  console.error
    Error retrieving Jira client configuration: Error: Database error
        at Object.<anonymous> (C:\Project\PFE\pfe-back\test\jiraConfig.test.js:78:44)
        at Promise.then.completed (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Project\PFE\pfe-back\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Project\PFE\pfe-back\node_modules\jest-runner\build\runTest.js:444:34)

    [0m [90m 44 |[39m       })[33m;[39m
     [90m 45 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 46 |[39m       console[33m.[39merror([32m'Error retrieving Jira client configuration:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 47 |[39m       res[33m.[39mstatus([33mHTTP_STATUS[39m[33m.[39m[33mINTERNAL_SERVER_ERROR[39m)[33m.[39mjson({
     [90m 48 |[39m         error[33m:[39m [36mtrue[39m[33m,[39m
     [90m 49 |[39m         message[33m:[39m error[33m.[39mmessage[33m,[39m[0m

      at error (controllers/jiraConfig.controller.js:46:15)

PASS test/jiraConfig.test.js
  Jira Config Routes Tests
    GET /jira-config/getAllConfig
      ÔêÜ should retrieve all configurations successfully (10 ms)
      ÔêÜ should handle errors when retrieving configurations (10 ms)
    POST /jira-config/addConfig
      ÔêÜ should add configuration successfully (8 ms)
    POST /jira-config/deleteConfigByID
      ÔêÜ should delete configurations successfully (4 ms)

PASS test/weeklyScore.test.js
  processWeeklyTopScores
    ÔêÜ calcule le top 3 et envoie des emails ├á tous les utilisateurs (2 ms)

  console.error
    Signup error: Email already exists

    [0m [90m 60 |[39m     })[33m;[39m
     [90m 61 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 62 |[39m     console[33m.[39merror([32m'Signup error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 63 |[39m
     [90m 64 |[39m     [36mreturn[39m res[33m.[39mstatus([33mHTTP_STATUS[39m[33m.[39m[33mBAD_REQUEST[39m)[33m.[39mjson({
     [90m 65 |[39m       error[33m:[39m [36mtrue[39m[33m,[39m[0m

      at error (controllers/auth.controller.js:62:13)

  console.error
    Signin error: Invalid credentials

    [0m [90m 85 |[39m     })[33m;[39m
     [90m 86 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 87 |[39m     console[33m.[39merror([32m'Signin error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 88 |[39m
     [90m 89 |[39m     [36mconst[39m getStatusCode [33m=[39m () [33m=>[39m {
     [90m 90 |[39m       [36mif[39m (error[33m.[39mmessage [33m===[39m [32m'Too many login attempts. Please try again later.'[39m) {[0m

      at error (controllers/auth.controller.js:87:13)

  console.log
    Starting isLogged check...

      at log (controllers/auth.controller.js:11:13)

  console.log
    User UID from token: test-uid-123

      at log (controllers/auth.controller.js:14:15)

  console.log
    User profile retrieved successfully

      at log (controllers/auth.controller.js:17:15)

  console.log
    Attempting to logout user: test-uid-123

      at log (controllers/auth.controller.js:115:15)

  console.log
    Successfully logged out user: test-uid-123

      at log (controllers/auth.controller.js:118:15)

PASS test/auth.test.js
  Auth Routes Tests
    POST /auth/signup
      ÔêÜ should register a new user successfully (14 ms)
      ÔêÜ should handle registration errors (8 ms)
    POST /auth/signin
      ÔêÜ should login user successfully (7 ms)
      ÔêÜ should handle invalid credentials (7 ms)
    GET /auth/isLogged
      ÔêÜ should check if user is logged in (19 ms)
    POST /auth/logout
      ÔêÜ should logout user successfully (8 ms)
    POST /auth/forgetPassword
      ÔêÜ should send password reset email (4 ms)
    POST /auth/verifyEmail
      ÔêÜ should send email verification (3 ms)

  console.error
    Error retrieving projects: Error: Database error
        at Object.<anonymous> (C:\Project\PFE\pfe-back\test\project.test.js:74:59)
        at Promise.then.completed (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Project\PFE\pfe-back\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Project\PFE\pfe-back\node_modules\jest-runner\build\runTest.js:444:34)

    [0m [90m 14 |[39m       })[33m;[39m
     [90m 15 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 16 |[39m       console[33m.[39merror([32m'Error retrieving projects:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 17 |[39m       res[33m.[39mstatus([33mHTTP_STATUS[39m[33m.[39m[33mINTERNAL_SERVER_ERROR[39m)[33m.[39mjson({
     [90m 18 |[39m         error[33m:[39m [36mtrue[39m[33m,[39m
     [90m 19 |[39m         message[33m:[39m error[33m.[39mmessage[33m,[39m[0m

      at error (controllers/project.controller.js:16:15)

  console.error
    Error adding project: Error: Database connection failed
        at Object.<anonymous> (C:\Project\PFE\pfe-back\test\project.test.js:169:58)
        at Promise.then.completed (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Project\PFE\pfe-back\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Project\PFE\pfe-back\node_modules\jest-runner\build\runTest.js:444:34)

    [0m [90m 64 |[39m       }
     [90m 65 |[39m
    [31m[1m>[22m[39m[90m 66 |[39m       console[33m.[39merror([32m'Error adding project:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 67 |[39m       res[33m.[39mstatus([33mHTTP_STATUS[39m[33m.[39m[33mINTERNAL_SERVER_ERROR[39m)[33m.[39mjson({
     [90m 68 |[39m         error[33m:[39m [36mtrue[39m[33m,[39m
     [90m 69 |[39m         message[33m:[39m [32m'Error adding project'[39m[33m,[39m[0m

      at error (controllers/project.controller.js:66:15)

  console.error
    Error deleting project: Error: Database error
        at Object.<anonymous> (C:\Project\PFE\pfe-back\test\project.test.js:233:62)
        at Promise.then.completed (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Project\PFE\pfe-back\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Project\PFE\pfe-back\node_modules\jest-runner\build\runTest.js:444:34)

    [0m [90m 101 |[39m       })[33m;[39m
     [90m 102 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 103 |[39m       console[33m.[39merror([32m'Error deleting project:'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 104 |[39m       res[33m.[39mstatus([33mHTTP_STATUS[39m[33m.[39m[33mINTERNAL_SERVER_ERROR[39m)[33m.[39mjson({
     [90m 105 |[39m         error[33m:[39m [36mtrue[39m[33m,[39m
     [90m 106 |[39m         message[33m:[39m [32m'Error deleting project'[39m[33m,[39m[0m

      at error (controllers/project.controller.js:103:15)

  console.error
    Error updating project: Error: Database error
        at Object.<anonymous> (C:\Project\PFE\pfe-back\test\project.test.js:339:62)
        at Promise.then.completed (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Project\PFE\pfe-back\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Project\PFE\pfe-back\node_modules\jest-runner\build\runTest.js:444:34)

    [0m [90m 153 |[39m       })[33m;[39m
     [90m 154 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 155 |[39m       console[33m.[39merror([32m'Error updating project:'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 156 |[39m       res[33m.[39mstatus([33mHTTP_STATUS[39m[33m.[39m[33mINTERNAL_SERVER_ERROR[39m)[33m.[39mjson({
     [90m 157 |[39m         error[33m:[39m [36mtrue[39m[33m,[39m
     [90m 158 |[39m         message[33m:[39m [32m'Error updating project'[39m[33m,[39m[0m

      at error (controllers/project.controller.js:155:15)

PASS test/project.test.js
  Project Routes Tests
    GET /project/getAllProject
      ÔêÜ should retrieve all projects successfully (17 ms)
      ÔêÜ should handle errors when retrieving projects (6 ms)
    POST /project/addNewProject
      ÔêÜ should add a new project successfully (10 ms)
      ÔêÜ should return 400 when required fields are missing (4 ms)
      ÔêÜ should handle duplicate project key error (3 ms)
      ÔêÜ should handle general creation errors (6 ms)
    POST /project/deleteProjectByID
      ÔêÜ should delete project successfully (5 ms)
      ÔêÜ should return 400 when project ID is missing (3 ms)
      ÔêÜ should return 404 when project not found (4 ms)
      ÔêÜ should handle deletion errors (5 ms)
    POST /project/updateProjectByID
      ÔêÜ should update project successfully (4 ms)
      ÔêÜ should return 400 when required fields are missing (8 ms)
      ÔêÜ should return 404 when project not found (4 ms)
      ÔêÜ should handle update errors (6 ms)

PASS test/index.test.js
  GET /
    ÔêÜ should return a JSON object with the title "CC" (6 ms)

  console.error
    Registration error: { code: 'auth/weak-password' }

    [0m [90m 44 |[39m       }[33m;[39m
     [90m 45 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 46 |[39m       console[33m.[39merror([32m'Registration error:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 47 |[39m
     [90m 48 |[39m       [90m// Handle specific Firebase Auth errors[39m
     [90m 49 |[39m       [36mif[39m (error[33m.[39mcode [33m===[39m [32m'auth/weak-password'[39m) {[0m

      at Function.error [as register] (services/auth.service.js:46:15)
      at Object.<anonymous> (test/unit/auth.service.unit.test.js:62:7)

  console.error
    Registration error: { code: 'auth/email-already-in-use' }

    [0m [90m 44 |[39m       }[33m;[39m
     [90m 45 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 46 |[39m       console[33m.[39merror([32m'Registration error:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 47 |[39m
     [90m 48 |[39m       [90m// Handle specific Firebase Auth errors[39m
     [90m 49 |[39m       [36mif[39m (error[33m.[39mcode [33m===[39m [32m'auth/weak-password'[39m) {[0m

      at Function.error [as register] (services/auth.service.js:46:15)
      at Object.<anonymous> (test/unit/auth.service.unit.test.js:73:7)

  console.error
    Login error: { code: 'auth/wrong-password' }

    [0m [90m 93 |[39m       }[33m;[39m
     [90m 94 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 95 |[39m       console[33m.[39merror([32m'Login error:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 96 |[39m
     [90m 97 |[39m       [90m// Handle specific Firebase Auth errors[39m
     [90m 98 |[39m       [36mswitch[39m (error[33m.[39mcode) {[0m

      at Function.error (services/auth.service.js:95:15)
      at Object.<anonymous> (test/unit/auth.service.unit.test.js:111:7)

  console.error
    Login error: { code: 'auth/user-not-found' }

    [0m [90m 93 |[39m       }[33m;[39m
     [90m 94 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 95 |[39m       console[33m.[39merror([32m'Login error:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 96 |[39m
     [90m 97 |[39m       [90m// Handle specific Firebase Auth errors[39m
     [90m 98 |[39m       [36mswitch[39m (error[33m.[39mcode) {[0m

      at Function.error (services/auth.service.js:95:15)
      at Object.<anonymous> (test/unit/auth.service.unit.test.js:118:7)

  console.error
    Logout error: Error: Logout failed
        at Object.<anonymous> (C:\Project\PFE\pfe-back\test\unit\auth.service.unit.test.js:135:33)
        at Promise.then.completed (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:316:40)
        at _runTest (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Project\PFE\pfe-back\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Project\PFE\pfe-back\node_modules\jest-runner\build\runTest.js:444:34)

    [0m [90m 126 |[39m       }[33m;[39m
     [90m 127 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 128 |[39m       console[33m.[39merror([32m'Logout error:'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 129 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Logout failed'[39m)[33m;[39m
     [90m 130 |[39m     }
     [90m 131 |[39m   }[0m

      at Function.error [as logout] (services/auth.service.js:128:15)
      at Object.<anonymous> (test/unit/auth.service.unit.test.js:137:7)

  console.error
    Token verification error: JsonWebTokenError {
      name: 'JsonWebTokenError',
      message: 'jwt malformed'
    }

    [0m [90m 210 |[39m       }[33m;[39m
     [90m 211 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 212 |[39m       console[33m.[39merror([32m'Token verification error:'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 213 |[39m
     [90m 214 |[39m       [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 215 |[39m         [36mthrow[39m [36mnew[39m [33mError[39m([32m'Invalid token'[39m)[33m;[39m[0m

      at Function.error [as verifyToken] (services/auth.service.js:212:15)
      at Object.verifyToken (test/unit/auth.service.unit.test.js:172:32)

PASS test/unit/auth.service.unit.test.js
  AuthService - Unit Tests
    register
      ÔêÜ should register a new user successfully (2 ms)
      ÔêÜ should throw error when required fields are missing (16 ms)
      ÔêÜ should handle weak password error (7 ms)
      ÔêÜ should handle email already in use error (3 ms)
    login
      ÔêÜ should login user successfully (6 ms)
      ÔêÜ should throw error when email or password is missing
      ÔêÜ should handle incorrect password error (2 ms)
      ÔêÜ should handle user not found error (3 ms)
    logout
      ÔêÜ should logout user successfully
      ÔêÜ should handle logout error (3 ms)
    forgotPassword
      ÔêÜ should send password reset email successfully (1 ms)
      ÔêÜ should throw error when email is missing (1 ms)
    verifyToken
      ÔêÜ should verify token and return user data (5 ms)
      ÔêÜ should throw error for invalid token (3 ms)

  console.error
    Signup error: The password is too weak

    [0m [90m 60 |[39m     })[33m;[39m
     [90m 61 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 62 |[39m     console[33m.[39merror([32m'Signup error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 63 |[39m
     [90m 64 |[39m     [36mreturn[39m res[33m.[39mstatus([33mHTTP_STATUS[39m[33m.[39m[33mBAD_REQUEST[39m)[33m.[39mjson({
     [90m 65 |[39m       error[33m:[39m [36mtrue[39m[33m,[39m[0m

      at Object.error [as signup] (controllers/auth.controller.js:62:13)
      at Object.<anonymous> (test/unit/auth.controller.unit.test.js:60:7)

  console.error
    Signin error: Incorrect password

    [0m [90m 85 |[39m     })[33m;[39m
     [90m 86 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 87 |[39m     console[33m.[39merror([32m'Signin error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 88 |[39m
     [90m 89 |[39m     [36mconst[39m getStatusCode [33m=[39m () [33m=>[39m {
     [90m 90 |[39m       [36mif[39m (error[33m.[39mmessage [33m===[39m [32m'Too many login attempts. Please try again later.'[39m) {[0m

      at Object.error [as signin] (controllers/auth.controller.js:87:13)
      at Object.<anonymous> (test/unit/auth.controller.unit.test.js:95:7)

  console.error
    Signin error: Email and password are required

    [0m [90m 85 |[39m     })[33m;[39m
     [90m 86 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 87 |[39m     console[33m.[39merror([32m'Signin error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 88 |[39m
     [90m 89 |[39m     [36mconst[39m getStatusCode [33m=[39m () [33m=>[39m {
     [90m 90 |[39m       [36mif[39m (error[33m.[39mmessage [33m===[39m [32m'Too many login attempts. Please try again later.'[39m) {[0m

      at Object.error [as signin] (controllers/auth.controller.js:87:13)
      at Object.<anonymous> (test/unit/auth.controller.unit.test.js:104:7)

  console.error
    Signin error: Too many login attempts. Please try again later.

    [0m [90m 85 |[39m     })[33m;[39m
     [90m 86 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 87 |[39m     console[33m.[39merror([32m'Signin error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 88 |[39m
     [90m 89 |[39m     [36mconst[39m getStatusCode [33m=[39m () [33m=>[39m {
     [90m 90 |[39m       [36mif[39m (error[33m.[39mmessage [33m===[39m [32m'Too many login attempts. Please try again later.'[39m) {[0m

      at Object.error [as signin] (controllers/auth.controller.js:87:13)
      at Object.<anonymous> (test/unit/auth.controller.unit.test.js:113:7)

  console.log
    Attempting to logout user: test-uid-123

      at Array.log (controllers/auth.controller.js:115:15)

  console.log
    Successfully logged out user: test-uid-123

      at Array.log (controllers/auth.controller.js:118:15)

  console.log
    Attempting to logout user: test-uid-123

      at Array.log (controllers/auth.controller.js:115:15)

  console.error
    Logout error: Logout failed

    [0m [90m 124 |[39m       })[33m;[39m
     [90m 125 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 126 |[39m       console[33m.[39merror([32m'Logout error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 127 |[39m
     [90m 128 |[39m       [36mreturn[39m res[33m.[39mstatus([33mHTTP_STATUS[39m[33m.[39m[33mINTERNAL_SERVER_ERROR[39m)[33m.[39mjson({
     [90m 129 |[39m         error[33m:[39m [36mtrue[39m[33m,[39m[0m

      at Array.error (controllers/auth.controller.js:126:15)
      at Object.<anonymous> (test/unit/auth.controller.unit.test.js:138:7)

  console.error
    Forgot password error: Email is required

    [0m [90m 148 |[39m     })[33m;[39m
     [90m 149 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 150 |[39m     console[33m.[39merror([32m'Forgot password error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 151 |[39m
     [90m 152 |[39m     [36mconst[39m getStatusCode [33m=[39m () [33m=>[39m {
     [90m 153 |[39m       [36mif[39m (error[33m.[39mmessage [33m===[39m [32m'Email is required'[39m) {[0m

      at Object.error [as forgetPassword] (controllers/auth.controller.js:150:13)
      at Object.<anonymous> (test/unit/auth.controller.unit.test.js:162:7)

PASS test/unit/auth.controller.unit.test.js
  auth.controller - Unit Tests
    signup
      ÔêÜ should register user successfully (1 ms)
      ÔêÜ should handle registration error (4 ms)
    signin
      ÔêÜ should login user successfully (1 ms)
      ÔêÜ should return 401 for incorrect credentials (1 ms)
      ÔêÜ should return 422 when email or password missing (2 ms)
      ÔêÜ should return 429 for too many requests (2 ms)
    logout
      ÔêÜ should logout user successfully (1 ms)
      ÔêÜ should handle logout error (3 ms)
    forgetPassword
      ÔêÜ should send password reset email successfully (1 ms)
      ÔêÜ should return 422 when email is missing (2 ms)

PASS test/unit/ticket.controller.unit.test.js
  ticket.controller - Unit Tests
    ÔêÜ should get ticket by ID successfully
    ÔêÜ should get all tickets successfully
    ÔêÜ should update ticket successfully (1 ms)
    ÔêÜ should sync ticket with Firebase successfully
    ÔêÜ should search issues using JQL successfully (1 ms)
    ÔêÜ should get issue details successfully
    ÔêÜ should get transitions successfully
    ÔêÜ should transition issue successfully (1 ms)

PASS test/unit/jiraConfig.service.unit.test.js
  jiraConfig.service - Unit Tests
    createConfig
      ÔêÜ should create jira config successfully (1 ms)
    getConfigById
      ÔêÜ should retrieve config by ID (1 ms)
    updateConfig
      ÔêÜ should update config successfully (1 ms)
    deleteConfig
      ÔêÜ should delete config successfully

  console.error
    Error retrieving users: Error: Database error
        at Object.<anonymous> (C:\Project\PFE\pfe-back\test\unit\user.controller.unit.test.js:55:33)
        at Promise.then.completed (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:316:40)
        at _runTest (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Project\PFE\pfe-back\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Project\PFE\pfe-back\node_modules\jest-runner\build\runTest.js:444:34)

    [0m [90m 35 |[39m       })[33m;[39m
     [90m 36 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 37 |[39m       console[33m.[39merror([32m'Error retrieving users:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 38 |[39m       [36mreturn[39m res[33m.[39mstatus([33mHTTP_STATUS[39m[33m.[39m[33mINTERNAL_SERVER_ERROR[39m)[33m.[39mjson({
     [90m 39 |[39m         error[33m:[39m [36mtrue[39m[33m,[39m
     [90m 40 |[39m         message[33m:[39m [32m'An error occurred while retrieving users'[39m[33m,[39m[0m

      at Array.error (controllers/user.controller.js:37:15)
      at Object.<anonymous> (test/unit/user.controller.unit.test.js:57:7)

  console.error
    Error: Database error
        at Object.<anonymous> (C:\Project\PFE\pfe-back\test\unit\user.controller.unit.test.js:150:33)
        at Promise.then.completed (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:316:40)
        at _runTest (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Project\PFE\pfe-back\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Project\PFE\pfe-back\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Project\PFE\pfe-back\node_modules\jest-runner\build\runTest.js:444:34)

    [0m [90m 103 |[39m     })[33m;[39m
     [90m 104 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 105 |[39m     console[33m.[39merror(error)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 106 |[39m     [36mreturn[39m res[33m.[39mstatus([33mHTTP_STATUS[39m[33m.[39m[33mINTERNAL_SERVER_ERROR[39m)[33m.[39mjson({ message[33m:[39m [32m'Erreur lors du calcul des statistiques'[39m })[33m;[39m
     [90m 107 |[39m   }
     [90m 108 |[39m }[33m;[39m[0m

      at Object.error [as getTicketStatsByUser] (controllers/user.controller.js:105:13)
      at Object.<anonymous> (test/unit/user.controller.unit.test.js:152:7)

PASS test/unit/user.controller.unit.test.js
  user.controller - Unit Tests
    getAllUsers
      ÔêÜ should retrieve all users successfully (1 ms)
      ÔêÜ should handle error when retrieving users (10 ms)
    getUserByAccountId
      ÔêÜ should retrieve user by accountId successfully
      ÔêÜ should return 404 when user not found (1 ms)
    getUserByUid
      ÔêÜ should retrieve user by UID successfully
      ÔêÜ should return 404 when user not found by UID
    getTicketStatsByUser
      ÔêÜ should retrieve ticket stats successfully (1 ms)
      ÔêÜ should handle error when retrieving stats (2 ms)

PASS test/unit/weeklyScore.service.unit.test.js
  weeklyScore.service - Unit Tests
    processWeeklyTopScores
      ÔêÜ should process weekly scores and send emails successfully (2 ms)
      ÔêÜ should return empty leaderboard when no scores (1 ms)
      ÔêÜ should handle users without email
      ÔêÜ should continue on individual email failure (1 ms)
      ÔêÜ should limit leaderboard to top 3 users (1 ms)
      ÔêÜ should handle scores without ownerId (1 ms)
      ÔêÜ should aggregate multiple scores per user (1 ms)
      ÔêÜ should handle WeeklyTopScores.create failure gracefully (1 ms)
      ÔêÜ should use correct week boundaries
      ÔêÜ should handle empty users snapshot

PASS test/unit/ticket.service.unit.test.js
  ticketService - Unit Tests
    syncTicketWithFirebase
      ÔêÜ should update existing ticket (2 ms)
      ÔêÜ should add new ticket when not exists
    updateIssueJiraClient
      ÔêÜ should update issue summary successfully (1 ms)
      ÔêÜ should handle Jira update error
    SearchForIssuesUsingJQLEnhancedSearch
      ÔêÜ should search for issues using JQL
      ÔêÜ should handle search error (8 ms)
    getIssueDetails
      ÔêÜ should get issue details successfully (1 ms)
      ÔêÜ should handle fetch error (1 ms)
    getTransitions
      ÔêÜ should get issue transitions successfully
    transitionIssue
      ÔêÜ should transition issue successfully
      ÔêÜ should handle transition error

PASS test/unit/score.controller.unit.test.js
  score.controller - Unit Tests
    getScoreById
      ÔêÜ should retrieve score by ID successfully (1 ms)
      ÔêÜ should return 404 when score not found (1 ms)
    createScore
      ÔêÜ should create score successfully
      ÔêÜ should handle error when creating score (1 ms)
    getAllScores
      ÔêÜ should retrieve all scores successfully
    calculateTicketScore
      ÔêÜ should calculate ticket score successfully (1 ms)
      ÔêÜ should handle calculation error
    calculateMultipleTicketScores
      ÔêÜ should calculate multiple ticket scores successfully
    getAllTicketScores
      ÔêÜ should retrieve all ticket scores successfully
    getScoresByTicketId
      ÔêÜ should retrieve scores by ticket ID successfully
    getEmployeeGlobalScore
      ÔêÜ should retrieve employee global score successfully
      ÔêÜ should return 400 when uid is missing

PASS test/unit/project.controller.unit.test.js
  project.controller - Unit Tests
    ÔêÜ should create project successfully (2 ms)
    ÔêÜ should get project by ID successfully (1 ms)
    ÔêÜ should get all projects successfully
    ÔêÜ should update project successfully (1 ms)
    ÔêÜ should delete project successfully
    ÔêÜ should get projects by config ID successfully

PASS test/ticketAssign.test.js
  ticketService.getIssueDetails
    ÔêÜ returns parsed issue data when request succeeds (2 ms)
    ÔêÜ throws when Jira returns a non-OK status (8 ms)
    ÔêÜ wraps fetch failures with Jira connection message (1 ms)

PASS test/unit/rules.controller.unit.test.js
  rules.controller - Unit Tests
    ÔêÜ should create rule successfully (1 ms)
    ÔêÜ should get rule by ID successfully
    ÔêÜ should get all rules successfully (1 ms)
    ÔêÜ should delete rule successfully

PASS test/config.test.js
  Configuration Test
    ÔêÜ Jest configuration works (1 ms)
    ÔêÜ Mocks work correctly (1 ms)
    ÔêÜ Async operations work
  Cleanup Test
    ÔêÜ Cleanup hooks work

Summary of all failing tests
FAIL test/integration/score.integration.test.js
  ÔùÅ Integration Tests - Score and Rules Flow ÔÇ║ POST /scores/calculate - Integration ÔÇ║ should calculate score through full stack

    expect(received).toBe(expected) // Object.is equality

    Expected: 201
    Received: 401

      34 |         });
      35 |
    > 36 |       expect(response.status).toBe(201);
         |                               ^
      37 |       expect(response.body.success).toBe(true);
      38 |     });
      39 |

      at Object.toBe (test/integration/score.integration.test.js:36:31)

  ÔùÅ Integration Tests - Score and Rules Flow ÔÇ║ POST /scores/calculate - Integration ÔÇ║ should validate ticket data

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 401

      46 |         .send({ ticket: {}, ruleId: 'rule-123' });
      47 |
    > 48 |       expect(response.status).toBe(400);
         |                               ^
      49 |     });
      50 |
      51 |     it('should validate rule exists', async () => {

      at Object.toBe (test/integration/score.integration.test.js:48:31)

  ÔùÅ Integration Tests - Score and Rules Flow ÔÇ║ POST /scores/calculate - Integration ÔÇ║ should validate rule exists

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 401

      57 |         .send({ ticket: mockTicket, ruleId: 'invalid' });
      58 |
    > 59 |       expect(response.status).toBe(400);
         |                               ^
      60 |     });
      61 |
      62 |     it('should require authentication', async () => {

      at Object.toBe (test/integration/score.integration.test.js:59:31)

  ÔùÅ Integration Tests - Score and Rules Flow ÔÇ║ POST /scores/calculate-multiple - Integration ÔÇ║ should calculate multiple scores

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

      84 |         });
      85 |
    > 86 |       expect(response.status).toBe(200);
         |                               ^
      87 |       expect(response.body.data).toHaveLength(2);
      88 |     });
      89 |

      at Object.toBe (test/integration/score.integration.test.js:86:31)

  ÔùÅ Integration Tests - Score and Rules Flow ÔÇ║ POST /scores/calculate-multiple - Integration ÔÇ║ should handle partial failures

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

      102 |         });
      103 |
    > 104 |       expect(response.status).toBe(200);
          |                               ^
      105 |       expect(response.body.data).toHaveLength(2);
      106 |     });
      107 |   });

      at Object.toBe (test/integration/score.integration.test.js:104:31)

  ÔùÅ Integration Tests - Score and Rules Flow ÔÇ║ GET /scores/ticket/:ticketId - Integration ÔÇ║ should get scores by ticket ID

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 404

      115 |         .set('Authorization', 'Bearer token');
      116 |
    > 117 |       expect(response.status).toBe(200);
          |                               ^
      118 |       expect(response.body.data).toBeDefined();
      119 |     });
      120 |

      at Object.toBe (test/integration/score.integration.test.js:117:31)

  ÔùÅ Integration Tests - Score and Rules Flow ÔÇ║ GET /scores/ticket/:ticketId - Integration ÔÇ║ should return empty array for ticket with no scores

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 404

      126 |         .set('Authorization', 'Bearer token');
      127 |
    > 128 |       expect(response.status).toBe(200);
          |                               ^
      129 |       expect(response.body.data).toEqual([]);
      130 |     });
      131 |   });

      at Object.toBe (test/integration/score.integration.test.js:128:31)

  ÔùÅ Integration Tests - Score and Rules Flow ÔÇ║ GET /scores/employee/:uid - Integration ÔÇ║ should get employee global score

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 404

      139 |         .set('Authorization', 'Bearer token');
      140 |
    > 141 |       expect(response.status).toBe(200);
          |                               ^
      142 |     });
      143 |
      144 |     it('should validate uid parameter', async () => {

      at Object.toBe (test/integration/score.integration.test.js:141:31)

  ÔùÅ Integration Tests - Score and Rules Flow ÔÇ║ GET /scores - Integration ÔÇ║ should get all ticket scores

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 404

      159 |         .set('Authorization', 'Bearer token');
      160 |
    > 161 |       expect(response.status).toBe(200);
          |                               ^
      162 |       expect(response.body.data).toHaveLength(2);
      163 |     });
      164 |   });

      at Object.toBe (test/integration/score.integration.test.js:161:31)

  ÔùÅ Integration Tests - Score and Rules Flow ÔÇ║ should handle score calculation with priority rules

    TypeError: Cannot read properties of undefined (reading 'score')

      176 |       .send({ ticket: mockTicket, ruleId: 'rule-123' });
      177 |
    > 178 |     expect(response.body.data.score).toBe(10);
          |                               ^
      179 |   });
      180 |
      181 |   it('should handle score calculation with deadline rules', async () => {

      at Object.score (test/integration/score.integration.test.js:178:31)

  ÔùÅ Integration Tests - Score and Rules Flow ÔÇ║ should handle score calculation with deadline rules

    TypeError: Cannot read properties of undefined (reading 'score')

      190 |       .send({ ticket: mockTicket, ruleId: 'rule-123' });
      191 |
    > 192 |     expect(response.body.data.score).toBeGreaterThan(0);
          |                               ^
      193 |   });
      194 |
      195 |   it('should handle negative scores for late tickets', async () => {

      at Object.score (test/integration/score.integration.test.js:192:31)

  ÔùÅ Integration Tests - Score and Rules Flow ÔÇ║ should handle negative scores for late tickets

    TypeError: Cannot read properties of undefined (reading 'score')

      204 |       .send({ ticket: mockTicket, ruleId: 'rule-123' });
      205 |
    > 206 |     expect(response.body.data.score).toBeLessThan(0);
          |                               ^
      207 |   });
      208 |
      209 |   it('should aggregate scores per user', async () => {

      at Object.score (test/integration/score.integration.test.js:206:31)

  ÔùÅ Integration Tests - Score and Rules Flow ÔÇ║ should aggregate scores per user

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has type:  object
    Received has value: {"error": {}, "message": "Not Found", "path": "/scores/employee/jira-123", "status": 404, "timestamp": "2025-12-22T08:31:13.486Z"}

      218 |       .set('Authorization', 'Bearer token');
      219 |
    > 220 |     expect(response.body).toHaveLength(3);
          |                           ^
      221 |   });
      222 |
      223 |   it('should handle concurrent score calculations', async () => {

      at Object.toHaveLength (test/integration/score.integration.test.js:220:27)

  ÔùÅ Integration Tests - Score and Rules Flow ÔÇ║ should handle concurrent score calculations

    expect(received).toBe(expected) // Object.is equality

    Expected: 201
    Received: 401

      236 |     const responses = await Promise.all(requests);
      237 |     responses.forEach(response => {
    > 238 |       expect(response.status).toBe(201);
          |                               ^
      239 |     });
      240 |   });
      241 |

      at toBe (test/integration/score.integration.test.js:238:31)
          at Array.forEach (<anonymous>)
      at Object.forEach (test/integration/score.integration.test.js:237:15)

  ÔùÅ Integration Tests - Score and Rules Flow ÔÇ║ should cache frequently accessed scores

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 2
    Received number of calls: 0

      251 |       .set('Authorization', 'Bearer token');
      252 |
    > 253 |     expect(ScoreService.getScoresByTicketId).toHaveBeenCalledTimes(2);
          |                                              ^
      254 |   });
      255 |
      256 |   it('should validate score data types', async () => {

      at Object.toHaveBeenCalledTimes (test/integration/score.integration.test.js:253:46)

  ÔùÅ Integration Tests - Score and Rules Flow ÔÇ║ should validate score data types

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 401

      262 |       .send({ ticket: mockTicket, ruleId: 123 });
      263 |
    > 264 |     expect(response.status).toBe(400);
          |                             ^
      265 |   });
      266 |
      267 |   it('should handle database timeout gracefully', async () => {

      at Object.toBe (test/integration/score.integration.test.js:264:29)

  ÔùÅ Integration Tests - Score and Rules Flow ÔÇ║ should handle database timeout gracefully

    expect(received).toBe(expected) // Object.is equality

    Expected: 500
    Received: 404

      272 |       .set('Authorization', 'Bearer token');
      273 |
    > 274 |     expect(response.status).toBe(500);
          |                             ^
      275 |   });
      276 |
      277 |   it('should audit score calculations', async () => {

      at Object.toBe (test/integration/score.integration.test.js:274:29)

  ÔùÅ Integration Tests - Score and Rules Flow ÔÇ║ should audit score calculations

    TypeError: Cannot read properties of undefined (reading 'createdAt')

      286 |       .send({ ticket: mockTicket, ruleId: 'rule-123' });
      287 |
    > 288 |     expect(response.body.data.createdAt).toBeDefined();
          |                               ^
      289 |   });
      290 | });
      291 |

      at Object.createdAt (test/integration/score.integration.test.js:288:31)

FAIL test/e2e/complete-workflows.e2e.test.js
  ÔùÅ E2E Tests - Complete Workflows ÔÇ║ Complete User Registration and Project Setup Workflow ÔÇ║ should complete full user onboarding

    expect(received).toContain(expected) // indexOf

    Expected value: 404
    Received array: [200, 401]

      45 |         .get('/auth/isLogged')
      46 |         .set('Authorization', authToken || 'Bearer mock-token');
    > 47 |       expect([200, 401]).toContain(verifyRes.status);
         |                          ^
      48 |     });
      49 |
      50 |     it('should setup project with Jira integration', async () => {

      at Object.toContain (test/e2e/complete-workflows.e2e.test.js:47:26)

  ÔùÅ E2E Tests - Complete Workflows ÔÇ║ Complete User Registration and Project Setup Workflow ÔÇ║ should setup project with Jira integration

    expect(received).toContain(expected) // indexOf

    Expected value: 404
    Received array: [200, 201, 400, 401]

      59 |           protocol: 'https',
      60 |         });
    > 61 |       expect([200, 201, 400, 401]).toContain(configRes.status);
         |                                    ^
      62 |
      63 |       const configId = configRes.body?.id || 'mock-config-id';
      64 |

      at Object.toContain (test/e2e/complete-workflows.e2e.test.js:61:36)

  ÔùÅ E2E Tests - Complete Workflows ÔÇ║ Complete User Registration and Project Setup Workflow ÔÇ║ should create scoring rules for project

    expect(received).toContain(expected) // indexOf

    Expected value: 404
    Received array: [200, 201, 400, 401]

      100 |           },
      101 |         });
    > 102 |       expect([200, 201, 400, 401]).toContain(ruleRes.status);
          |                                    ^
      103 |
      104 |       ruleId = ruleRes.body?.id || 'mock-rule-id';
      105 |     });

      at Object.toContain (test/e2e/complete-workflows.e2e.test.js:102:36)

  ÔùÅ E2E Tests - Complete Workflows ÔÇ║ Complete Ticket Management Workflow ÔÇ║ should sync tickets from Jira and calculate scores

    expect(received).toContain(expected) // indexOf

    Expected value: 404
    Received array: [200, 400, 401, 500]

      122 |           },
      123 |         });
    > 124 |       expect([200, 400, 401, 500]).toContain(searchRes.status);
          |                                    ^
      125 |
      126 |       // 2. Sync ticket to Firebase
      127 |       if (searchRes.body?.issues && searchRes.body.issues.length > 0) {

      at Object.toContain (test/e2e/complete-workflows.e2e.test.js:124:36)

  ÔùÅ E2E Tests - Complete Workflows ÔÇ║ Complete Reporting and Analytics Workflow ÔÇ║ should retrieve employee scores and statistics

    expect(received).toContain(expected) // indexOf

    Expected value: 404
    Received array: [200, 400, 401]

      208 |         .get(`/scores/employee/${userId || 'mock-user-id'}`)
      209 |         .set('Authorization', authToken || 'Bearer mock-token');
    > 210 |       expect([200, 400, 401]).toContain(globalScoreRes.status);
          |                               ^
      211 |
      212 |       // 2. Get ticket statistics
      213 |       const statsRes = await request(app)

      at Object.toContain (test/e2e/complete-workflows.e2e.test.js:210:31)

  ÔùÅ E2E Tests - Complete Workflows ÔÇ║ Complete Reporting and Analytics Workflow ÔÇ║ should generate and retrieve weekly reports

    expect(received).toContain(expected) // indexOf

    Expected value: 404
    Received array: [200, 401]

      234 |         .get('/scores')
      235 |         .set('Authorization', authToken || 'Bearer mock-token');
    > 236 |       expect([200, 401]).toContain(allScoresRes.status);
          |                          ^
      237 |     });
      238 |   });
      239 |

      at Object.toContain (test/e2e/complete-workflows.e2e.test.js:236:26)

  ÔùÅ E2E Tests - Complete Workflows ÔÇ║ Complete Team Management Workflow ÔÇ║ should invite and manage team members

    expect(received).toContain(expected) // indexOf

    Expected value: 404
    Received array: [201, 400, 409, 401]

      248 |           managerId: userId || 'mock-manager-id',
      249 |         });
    > 250 |       expect([201, 400, 409, 401]).toContain(inviteRes.status);
          |                                    ^
      251 |
      252 |       // 2. Get all team members
      253 |       const usersRes = await request(app)

      at Object.toContain (test/e2e/complete-workflows.e2e.test.js:250:36)

FAIL test/integration/auth.integration.test.js
  ÔùÅ Integration Tests - Auth Flow ÔÇ║ POST /auth/forgot-password - Integration ÔÇ║ should send reset email through full stack

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 404

      127 |         .send({ email: 'test@example.com' });
      128 |
    > 129 |       expect(response.status).toBe(200);
          |                               ^
      130 |       expect(response.body.message).toContain('reset');
      131 |     });
      132 |

      at Object.toBe (test/integration/auth.integration.test.js:129:31)

  ÔùÅ Integration Tests - Auth Flow ÔÇ║ POST /auth/forgot-password - Integration ÔÇ║ should validate email format

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 404

      138 |         .send({ email: 'invalid-email' });
      139 |
    > 140 |       expect(response.status).toBe(400);
          |                               ^
      141 |     });
      142 |   });
      143 |

      at Object.toBe (test/integration/auth.integration.test.js:140:31)

  ÔùÅ Integration Tests - Auth Flow ÔÇ║ GET /auth/isLogged - Integration ÔÇ║ should verify authenticated user

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 404

      153 |         .set('Authorization', 'Bearer valid-jwt-token');
      154 |
    > 155 |       expect(response.status).toBe(200);
          |                               ^
      156 |       expect(response.body.user).toBeDefined();
      157 |     });
      158 |

      at Object.toBe (test/integration/auth.integration.test.js:155:31)

  ÔùÅ Integration Tests - Auth Flow ÔÇ║ GET /auth/isLogged - Integration ÔÇ║ should reject unauthenticated request

    expect(received).toBe(expected) // Object.is equality

    Expected: 401
    Received: 404

      161 |         .get('/auth/isLogged');
      162 |
    > 163 |       expect(response.status).toBe(401);
          |                               ^
      164 |     });
      165 |   });
      166 |

      at Object.toBe (test/integration/auth.integration.test.js:163:31)

  ÔùÅ Integration Tests - Auth Flow ÔÇ║ POST /auth/logout - Integration ÔÇ║ should logout user successfully

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

      176 |         .set('Authorization', 'Bearer valid-jwt-token');
      177 |
    > 178 |       expect(response.status).toBe(200);
          |                               ^
      179 |       expect(response.body.clearToken).toBe(true);
      180 |     });
      181 |   });

      at Object.toBe (test/integration/auth.integration.test.js:178:31)

  ÔùÅ Integration Tests - Auth Flow ÔÇ║ should sanitize error messages

    expect(received).not.toContain(expected) // indexOf

    Expected substring: not "secret"
    Received string:        "Database connection failed: password=secret123"

      217 |       .send({ email: 'test@example.com', password: 'pass' });
      218 |
    > 219 |     expect(response.body.message).not.toContain('secret');
          |                                       ^
      220 |   });
      221 |
      222 |   it('should rate limit excessive requests', async () => {

      at Object.toContain (test/integration/auth.integration.test.js:219:39)

FAIL test/functional/api.functional.test.js
  ÔùÅ Functional API Tests - Complete Endpoints ÔÇ║ POST /auth/forgot-password ÔÇ║ should send password reset email

    expect(received).toContain(expected) // indexOf

    Expected value: 404
    Received array: [200, 400]

      44 |         .post('/auth/forgot-password')
      45 |         .send({ email: 'test@example.com' });
    > 46 |       expect([200, 400]).toContain(res.status);
         |                          ^
      47 |     });
      48 |   });
      49 |

      at Object.toContain (test/functional/api.functional.test.js:46:26)

  ÔùÅ Functional API Tests - Complete Endpoints ÔÇ║ GET /auth/isLogged ÔÇ║ should verify authentication

    expect(received).toContain(expected) // indexOf

    Expected value: 404
    Received array: [200, 401]

      53 |         .get('/auth/isLogged')
      54 |         .set('Authorization', authToken);
    > 55 |       expect([200, 401]).toContain(res.status);
         |                          ^
      56 |     });
      57 |   });
      58 |

      at Object.toContain (test/functional/api.functional.test.js:55:26)

  ÔùÅ Functional API Tests - Complete Endpoints ÔÇ║ GET /user ÔÇ║ should get all users

    expect(received).toContain(expected) // indexOf

    Expected value: 404
    Received array: [200, 401]

      72 |         .get('/user')
      73 |         .set('Authorization', authToken);
    > 74 |       expect([200, 401]).toContain(res.status);
         |                          ^
      75 |     });
      76 |   });
      77 |

      at Object.toContain (test/functional/api.functional.test.js:74:26)

  ÔùÅ Functional API Tests - Complete Endpoints ÔÇ║ POST /user/invite ÔÇ║ should invite new user

    expect(received).toContain(expected) // indexOf

    Expected value: 404
    Received array: [201, 400, 409, 401]

      109 |         .set('Authorization', authToken)
      110 |         .send({ email: 'new@example.com', managerId: 'manager-123' });
    > 111 |       expect([201, 400, 409, 401]).toContain(res.status);
          |                                    ^
      112 |     });
      113 |   });
      114 |

      at Object.toContain (test/functional/api.functional.test.js:111:36)

  ÔùÅ Functional API Tests - Complete Endpoints ÔÇ║ GET /scores ÔÇ║ should get all ticket scores

    expect(received).toContain(expected) // indexOf

    Expected value: 404
    Received array: [200, 401]

      201 |         .get('/scores')
      202 |         .set('Authorization', authToken);
    > 203 |       expect([200, 401]).toContain(res.status);
          |                          ^
      204 |     });
      205 |   });
      206 |

      at Object.toContain (test/functional/api.functional.test.js:203:26)

  ÔùÅ Functional API Tests - Complete Endpoints ÔÇ║ GET /scores/ticket/:ticketId ÔÇ║ should get scores by ticket ID

    expect(received).toContain(expected) // indexOf

    Expected value: 404
    Received array: [200, 401]

      210 |         .get('/scores/ticket/ticket-123')
      211 |         .set('Authorization', authToken);
    > 212 |       expect([200, 401]).toContain(res.status);
          |                          ^
      213 |     });
      214 |   });
      215 |

      at Object.toContain (test/functional/api.functional.test.js:212:26)

  ÔùÅ Functional API Tests - Complete Endpoints ÔÇ║ GET /scores/employee/:uid ÔÇ║ should get employee global score

    expect(received).toContain(expected) // indexOf

    Expected value: 404
    Received array: [200, 400, 401]

      219 |         .get('/scores/employee/jira-123')
      220 |         .set('Authorization', authToken);
    > 221 |       expect([200, 400, 401]).toContain(res.status);
          |                               ^
      222 |     });
      223 |   });
      224 |

      at Object.toContain (test/functional/api.functional.test.js:221:31)

  ÔùÅ Functional API Tests - Complete Endpoints ÔÇ║ POST /rules ÔÇ║ should create new rule

    expect(received).toContain(expected) // indexOf

    Expected value: 404
    Received array: [201, 400, 401]

      234 |           priority: { High: { checked: true, value: 10 } },
      235 |         });
    > 236 |       expect([201, 400, 401]).toContain(res.status);
          |                               ^
      237 |     });
      238 |   });
      239 |

      at Object.toContain (test/functional/api.functional.test.js:236:31)

  ÔùÅ Functional API Tests - Complete Endpoints ÔÇ║ GET /rules ÔÇ║ should get all rules

    expect(received).toContain(expected) // indexOf

    Expected value: 404
    Received array: [200, 401]

      243 |         .get('/rules')
      244 |         .set('Authorization', authToken);
    > 245 |       expect([200, 401]).toContain(res.status);
          |                          ^
      246 |     });
      247 |   });
      248 |

      at Object.toContain (test/functional/api.functional.test.js:245:26)

  ÔùÅ Functional API Tests - Complete Endpoints ÔÇ║ POST /jira_config ÔÇ║ should create Jira config

    expect(received).toContain(expected) // indexOf

    Expected value: 404
    Received array: [201, 400, 401]

      267 |           password: 'api-token',
      268 |         });
    > 269 |       expect([201, 400, 401]).toContain(res.status);
          |                               ^
      270 |     });
      271 |   });
      272 |

      at Object.toContain (test/functional/api.functional.test.js:269:31)

  ÔùÅ Functional API Tests - Complete Endpoints ÔÇ║ GET /weeklyscores ÔÇ║ should get weekly top scores

    expect(received).toContain(expected) // indexOf

    Expected value: 404
    Received array: [200, 401]

      286 |         .get('/weeklyscores')
      287 |         .set('Authorization', authToken);
    > 288 |       expect([200, 401]).toContain(res.status);
          |                          ^
      289 |     });
      290 |   });
      291 |

      at Object.toContain (test/functional/api.functional.test.js:288:26)

  ÔùÅ Functional API Tests - Complete Endpoints ÔÇ║ POST /jira_client/search ÔÇ║ should search Jira issues

    expect(received).toContain(expected) // indexOf

    Expected value: 404
    Received array: [200, 400, 401, 500]

      335 |           },
      336 |         });
    > 337 |       expect([200, 400, 401, 500]).toContain(res.status);
          |                                    ^
      338 |     });
      339 |   });
      340 | });

      at Object.toContain (test/functional/api.functional.test.js:337:36)

FAIL test/integration/user-project.integration.test.js
  ÔùÅ Integration Tests - User and Project Flow ÔÇ║ GET /user - Integration ÔÇ║ should get all users

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 404

      32 |         .set('Authorization', 'Bearer token');
      33 |
    > 34 |       expect(response.status).toBe(200);
         |                               ^
      35 |       expect(response.body.users).toBeDefined();
      36 |     });
      37 |   });

      at Object.toBe (test/integration/user-project.integration.test.js:34:31)

  ÔùÅ Integration Tests - User and Project Flow ÔÇ║ GET /user/:uid - Integration ÔÇ║ should get user by UID

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 404

      47 |         .set('Authorization', 'Bearer token');
      48 |
    > 49 |       expect(response.status).toBe(200);
         |                               ^
      50 |       expect(response.body.uid).toBe('test-uid-123');
      51 |     });
      52 |

      at Object.toBe (test/integration/user-project.integration.test.js:49:31)

  ÔùÅ Integration Tests - User and Project Flow ÔÇ║ GET /user/account/:accountId - Integration ÔÇ║ should get user by accountId

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 404

      71 |         .get('/user/account/jira-123');
      72 |
    > 73 |       expect(response.status).toBe(200);
         |                               ^
      74 |     });
      75 |   });
      76 |

      at Object.toBe (test/integration/user-project.integration.test.js:73:31)

  ÔùÅ Integration Tests - User and Project Flow ÔÇ║ PUT /user/:uid - Integration ÔÇ║ should update user successfully

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 404

      89 |         .send({ firstName: 'Updated' });
      90 |
    > 91 |       expect(response.status).toBe(200);
         |                               ^
      92 |     });
      93 |   });
      94 |

      at Object.toBe (test/integration/user-project.integration.test.js:91:31)

  ÔùÅ Integration Tests - User and Project Flow ÔÇ║ GET /project/getAllProject - Integration ÔÇ║ should get all projects

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

      101 |         .set('Authorization', 'Bearer token');
      102 |
    > 103 |       expect(response.status).toBe(200);
          |                               ^
      104 |     });
      105 |   });
      106 |

      at Object.toBe (test/integration/user-project.integration.test.js:103:31)

  ÔùÅ Integration Tests - User and Project Flow ÔÇ║ POST /project/addNewProject - Integration ÔÇ║ should create new project

    expect(received).toBe(expected) // Object.is equality

    Expected: 201
    Received: 401

      118 |         });
      119 |
    > 120 |       expect(response.status).toBe(201);
          |                               ^
      121 |     });
      122 |
      123 |     it('should validate required project fields', async () => {

      at Object.toBe (test/integration/user-project.integration.test.js:120:31)

  ÔùÅ Integration Tests - User and Project Flow ÔÇ║ POST /project/addNewProject - Integration ÔÇ║ should validate required project fields

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 401

      127 |         .send({ projectKey: 'PROJ' });
      128 |
    > 129 |       expect(response.status).toBe(400);
          |                               ^
      130 |     });
      131 |   });
      132 |

      at Object.toBe (test/integration/user-project.integration.test.js:129:31)

  ÔùÅ Integration Tests - User and Project Flow ÔÇ║ POST /project/deleteProjectByID - Integration ÔÇ║ should delete project successfully

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

      140 |         .send({ projectId: 'project-123' });
      141 |
    > 142 |       expect(response.status).toBe(200);
          |                               ^
      143 |     });
      144 |
      145 |     it('should return 404 for non-existent project', async () => {

      at Object.toBe (test/integration/user-project.integration.test.js:142:31)

  ÔùÅ Integration Tests - User and Project Flow ÔÇ║ POST /project/deleteProjectByID - Integration ÔÇ║ should return 404 for non-existent project

    expect(received).toBe(expected) // Object.is equality

    Expected: 404
    Received: 401

      151 |         .send({ projectId: 'invalid' });
      152 |
    > 153 |       expect(response.status).toBe(404);
          |                               ^
      154 |     });
      155 |   });
      156 |

      at Object.toBe (test/integration/user-project.integration.test.js:153:31)

  ÔùÅ Integration Tests - User and Project Flow ÔÇ║ POST /project/updateProjectByID - Integration ÔÇ║ should update project successfully

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

      167 |         });
      168 |
    > 169 |       expect(response.status).toBe(200);
          |                               ^
      170 |     });
      171 |   });
      172 |

      at Object.toBe (test/integration/user-project.integration.test.js:169:31)

  ÔùÅ Integration Tests - User and Project Flow ÔÇ║ should handle project with multiple users

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 404

      219 |       .set('Authorization', 'Bearer token');
      220 |
    > 221 |     expect(response.status).toBe(200);
          |                             ^
      222 |   });
      223 |
      224 |   it('should validate project key format', async () => {

      at Object.toBe (test/integration/user-project.integration.test.js:221:29)

  ÔùÅ Integration Tests - User and Project Flow ÔÇ║ should validate project key format

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 401

      232 |       });
      233 |
    > 234 |     expect(response.status).toBe(400);
          |                             ^
      235 |   });
      236 |
      237 |   it('should handle concurrent user updates', async () => {

      at Object.toBe (test/integration/user-project.integration.test.js:234:29)

  ÔùÅ Integration Tests - User and Project Flow ÔÇ║ should filter projects by user role

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

      266 |       .set('Authorization', 'Bearer token');
      267 |
    > 268 |     expect(response.status).toBe(200);
          |                             ^
      269 |     expect(response.body).toBeDefined();
      270 |   });
      271 |

      at Object.toBe (test/integration/user-project.integration.test.js:268:29)

  ÔùÅ Integration Tests - User and Project Flow ÔÇ║ should validate email format on invite

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 404

      288 |       });
      289 |
    > 290 |     expect(response.status).toBe(400);
          |                             ^
      291 |   });
      292 |
      293 |   it('should handle project deletion cascade', async () => {

      at Object.toBe (test/integration/user-project.integration.test.js:290:29)

  ÔùÅ Integration Tests - User and Project Flow ÔÇ║ should handle project deletion cascade

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

      299 |       .send({ projectId: 'project-123' });
      300 |
    > 301 |     expect(response.status).toBe(200);
          |                             ^
      302 |   });
      303 |
      304 |   it('should paginate user list', async () => {

      at Object.toBe (test/integration/user-project.integration.test.js:301:29)

  ÔùÅ Integration Tests - User and Project Flow ÔÇ║ should paginate user list

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 404

      315 |       .query({ page: 1, limit: 10 });
      316 |
    > 317 |     expect(response.status).toBe(200);
          |                             ^
      318 |   });
      319 |
      320 |   it('should search projects by name', async () => {

      at Object.toBe (test/integration/user-project.integration.test.js:317:29)

  ÔùÅ Integration Tests - User and Project Flow ÔÇ║ should search projects by name

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

      326 |       .query({ search: 'Test' });
      327 |
    > 328 |     expect(response.status).toBe(200);
          |                             ^
      329 |   });
      330 | });
      331 |

      at Object.toBe (test/integration/user-project.integration.test.js:328:29)

FAIL test/integration/ticket-jira.integration.test.js
  ÔùÅ Integration Tests - Ticket and Jira Flow ÔÇ║ GET /ticket/:ticketId - Integration ÔÇ║ should get ticket details

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 404

      70 |         .set('Authorization', 'Bearer token');
      71 |
    > 72 |       expect(response.status).toBe(200);
         |                               ^
      73 |     });
      74 |
      75 |     it('should return 404 for non-existent ticket', async () => {

      at Object.toBe (test/integration/ticket-jira.integration.test.js:72:31)

  ÔùÅ Integration Tests - Ticket and Jira Flow ÔÇ║ should handle Jira connection errors gracefully

    expect(received).toBe(expected) // Object.is equality

    Expected: 500
    Received: 404

      160 |       .send({ projectName: 'PROJ', config: mockJiraConfig });
      161 |
    > 162 |     expect(response.status).toBe(500);
          |                             ^
      163 |   });
      164 |
      165 |   it('should handle ticket assignment', async () => {

      at Object.toBe (test/integration/ticket-jira.integration.test.js:162:29)

  ÔùÅ Integration Tests - Ticket and Jira Flow ÔÇ║ should validate Jira config before operations

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 404

      183 |       .send({ projectName: 'PROJ', config: {} });
      184 |
    > 185 |     expect(response.status).toBe(400);
          |                             ^
      186 |   });
      187 |
      188 |   it('should handle bulk ticket sync', async () => {

      at Object.toBe (test/integration/ticket-jira.integration.test.js:185:29)

  ÔùÅ Integration Tests - Ticket and Jira Flow ÔÇ║ should validate ticket data on sync

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 404

      276 |       .send({ ticket: {}, configId: 'config-123' });
      277 |
    > 278 |     expect(response.status).toBe(400);
          |                             ^
      279 |   });
      280 |
      281 |   it('should handle Jira API rate limiting', async () => {

      at Object.toBe (test/integration/ticket-jira.integration.test.js:278:29)

  ÔùÅ Integration Tests - Ticket and Jira Flow ÔÇ║ should handle Jira API rate limiting

    expect(received).toBe(expected) // Object.is equality

    Expected: 429
    Received: 404

      288 |       .send({ projectName: 'PROJ', config: mockJiraConfig });
      289 |
    > 290 |     expect(response.status).toBe(429);
          |                             ^
      291 |   });
      292 |
      293 |   it('should handle ticket watchers', async () => {

      at Object.toBe (test/integration/ticket-jira.integration.test.js:290:29)

FAIL test/unit/utils-middleware.unit.test.js
  ÔùÅ Utils and Middleware - Unit Tests ÔÇ║ email.util ÔÇ║ should send weekly leaderboard email successfully

    expect(received).toBeDefined()

    Received: undefined

      29 |
      30 |       const result = await sendWeeklyLeaderboardEmail(emailData);
    > 31 |       expect(result).toBeDefined();
         |                      ^
      32 |     });
      33 |
      34 |     it('should send invitation email successfully', async () => {

      at Object.toBeDefined (test/unit/utils-middleware.unit.test.js:31:22)

  ÔùÅ Utils and Middleware - Unit Tests ÔÇ║ email.util ÔÇ║ should send invitation email successfully

    expect(received).toBeDefined()

    Received: undefined

      34 |     it('should send invitation email successfully', async () => {
      35 |       const result = await sendInvitationEmail('test@example.com', 'password123');
    > 36 |       expect(result).toBeDefined();
         |                      ^
      37 |     });
      38 |
      39 |     it('should handle email sending error gracefully', async () => {

      at Object.toBeDefined (test/unit/utils-middleware.unit.test.js:36:22)

  ÔùÅ Utils and Middleware - Unit Tests ÔÇ║ email.util ÔÇ║ should handle email sending error gracefully

    TypeError: Cannot read properties of undefined (reading 'sendMail')

      39 |     it('should handle email sending error gracefully', async () => {
      40 |       const nodemailer = require('nodemailer');
    > 41 |       nodemailer.createTransport().sendMail.mockRejectedValue(new Error('SMTP error'));
         |                                   ^
      42 |
      43 |       await expect(sendInvitationEmail('invalid@example.com', 'pass'))
      44 |         .rejects.toThrow();

      at Object.<anonymous> (test/unit/utils-middleware.unit.test.js:41:35)

  ÔùÅ Utils and Middleware - Unit Tests ÔÇ║ email.util ÔÇ║ should format email content correctly

    expect(received).toBeDefined()

    Received: undefined

      55 |
      56 |       const result = await sendWeeklyLeaderboardEmail(emailData);
    > 57 |       expect(result).toBeDefined();
         |                      ^
      58 |     });
      59 |
      60 |     it('should validate email address', () => {

      at Object.toBeDefined (test/unit/utils-middleware.unit.test.js:57:22)

  ÔùÅ Utils and Middleware - Unit Tests ÔÇ║ auth middleware ÔÇ║ should authenticate valid token

    expect(received).toBeDefined()

    Received: undefined

      132 |       await authMiddleware(req, res, next);
      133 |       
    > 134 |       expect(req.user).toBeDefined();
          |                        ^
      135 |       expect(next).toHaveBeenCalled();
      136 |     });
      137 |

      at Object.toBeDefined (test/unit/utils-middleware.unit.test.js:134:24)

  ÔùÅ Utils and Middleware - Unit Tests ÔÇ║ jiraClient middleware ÔÇ║ should throw error for missing config

    TypeError: Cannot read properties of null (reading 'protocol')

      3 | const createJiraClient = (config) => {
      4 |   return new JiraApi({
    > 5 |     protocol: config.protocol ?? 'https',
        |                      ^
      6 |     host: config.host,
      7 |     username: config.username,
      8 |     password: config.password,

      at protocol (middleware/jiraClient.js:5:22)
      at Object.createJiraClient (test/unit/utils-middleware.unit.test.js:197:20)

  ÔùÅ Utils and Middleware - Unit Tests ÔÇ║ jiraClient middleware ÔÇ║ should throw error for invalid host

    expect(received).rejects.toThrow()

    Matcher error: received value must be a promise or a function returning a promise

    Received has type:  object
    Received has value: {"config": {"apiVersion": "2", "host": "", "password": "api-token", "protocol": "https", "strictSSL": true, "username": "test@example.com"}}

      205 |       };
      206 |
    > 207 |       await expect(createJiraClient(config)).rejects.toThrow();
          |                                                      ^
      208 |     });
      209 |
      210 |     it('should throw error for missing credentials', async () => {

      at Object.toThrow (node_modules/expect/build/index.js:204:13)
      at Object.toThrow (test/unit/utils-middleware.unit.test.js:207:54)

  ÔùÅ Utils and Middleware - Unit Tests ÔÇ║ jiraClient middleware ÔÇ║ should throw error for missing credentials

    expect(received).rejects.toThrow()

    Matcher error: received value must be a promise or a function returning a promise

    Received has type:  object
    Received has value: {"config": {"apiVersion": "2", "host": "test.atlassian.net", "password": "", "protocol": "https", "strictSSL": true, "username": ""}}

      215 |       };
      216 |
    > 217 |       await expect(createJiraClient(config)).rejects.toThrow();
          |                                                      ^
      218 |     });
      219 |
      220 |     it('should use default protocol and apiVersion', async () => {

      at Object.toThrow (node_modules/expect/build/index.js:204:13)
      at Object.toThrow (test/unit/utils-middleware.unit.test.js:217:54)

FAIL test/unit/score.service.unit.test.js
  ÔùÅ ScoreService - Unit Tests ÔÇ║ calculateMultipleTicketScores ÔÇ║ should handle errors for individual tickets

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

       98 |
       99 |       expect(results).toHaveLength(2);
    > 100 |       expect(results[0].success).toBe(true);
          |                                  ^
      101 |       expect(results[1].success).toBe(false);
      102 |     });
      103 |   });

      at Object.toBe (test/unit/score.service.unit.test.js:100:34)

FAIL test/unit/models.unit.test.js
  ÔùÅ Models - Unit Tests ÔÇ║ rules.model ÔÇ║ should find rule by ID

    TypeError: findById.mockResolvedValue is not a function

      121 |     it('should find rule by ID', async () => {
      122 |       const { findById } = require('../../models/rules.model');
    > 123 |       findById.mockResolvedValue({ id: 'rule-123', name: 'Test Rule' });
          |                ^
      124 |       const rule = await findById('rule-123');
      125 |       expect(rule.id).toBe('rule-123');
      126 |     });

      at Object.mockResolvedValue (test/unit/models.unit.test.js:123:16)

FAIL test/unit/project.service.unit.test.js
  ÔùÅ project.service - Unit Tests ÔÇ║ createProject ÔÇ║ should create project successfully

    expect(received).toEqual(expected) // deep equality

    Expected: {"createdAt": 2024-01-01T00:00:00.000Z, "createdBy": "test-uid-123", "id": "project-123", "jiraConfigId": "config-123", "projectKey": "PROJ", "projectName": "Test Project"}
    Received: undefined

      27 |       const result = await projectService.createProject(projectData);
      28 |
    > 29 |       expect(result).toEqual(mockProject);
         |                      ^
      30 |       expect(Project.create).toHaveBeenCalledWith(projectData);
      31 |     });
      32 |   });

      at Object.toEqual (test/unit/project.service.unit.test.js:29:22)

  ÔùÅ project.service - Unit Tests ÔÇ║ getProjectById ÔÇ║ should retrieve project by ID

    TypeError: projectService.getProjectById is not a function

      36 |       Project.findById = jest.fn().mockResolvedValue(mockProject);
      37 |
    > 38 |       const result = await projectService.getProjectById('project-123');
         |                                           ^
      39 |
      40 |       expect(result).toEqual(mockProject);
      41 |       expect(Project.findById).toHaveBeenCalledWith('project-123');

      at Object.getProjectById (test/unit/project.service.unit.test.js:38:43)

  ÔùÅ project.service - Unit Tests ÔÇ║ deleteProject ÔÇ║ should delete project successfully

    TypeError: projectService.deleteProject is not a function

      59 |       Project.delete = jest.fn().mockResolvedValue({ success: true });
      60 |
    > 61 |       const result = await projectService.deleteProject('project-123');
         |                                           ^
      62 |
      63 |       expect(result.success).toBe(true);
      64 |       expect(Project.delete).toHaveBeenCalledWith('project-123');

      at Object.deleteProject (test/unit/project.service.unit.test.js:61:43)


Test Suites: 10 failed, 17 passed, 27 total
Tests:       78 failed, 231 passed, 309 total
Snapshots:   0 total
Time:        6.309 s, estimated 7 s
Ran all test suites.
Force exiting Jest: Have you considered using `--detectOpenHandles` to detect async operations that kept running after all tests finished?
